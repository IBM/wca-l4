
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IBM watsonx Code Assistant for Practitioners Level 4">
      
      
        <meta name="author" content="Christopher Bienko (cdbienko@us.ibm.com)">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>IBM watsonx Code Assistant for Practitioners Level 4 Lab Guide - IBM watsonx Code Assistant for Practitioners Level 4</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();
        })
        </script>
        </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IBM watsonx Code Assistant for Practitioners Level 4" class="md-header__button md-logo" aria-label="IBM watsonx Code Assistant for Practitioners Level 4" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM watsonx Code Assistant for Practitioners Level 4
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IBM watsonx Code Assistant for Practitioners Level 4 Lab Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IBM watsonx Code Assistant for Practitioners Level 4" class="md-nav__button md-logo" aria-label="IBM watsonx Code Assistant for Practitioners Level 4" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    IBM watsonx Code Assistant for Practitioners Level 4
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          On-Premises Installation and Deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="On-Premises Installation and Deployment" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          On-Premises Installation and Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../on-premises/1/" class="md-nav__link">
        1. Objectives and requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../on-premises/2/" class="md-nav__link">
        2. Reserve an environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../on-premises/3/" class="md-nav__link">
        3. Bastion host setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../on-premises/4/" class="md-nav__link">
        4. Cluster preparation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../on-premises/5/" class="md-nav__link">
        5. Install prerequisite software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../on-premises/6/" class="md-nav__link">
        6. Install IBM Software Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../on-premises/7/" class="md-nav__link">
        7. Install watsonx Code Assistant
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          IBM Cloud (SaaS) Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IBM Cloud (SaaS) Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          IBM Cloud (SaaS) Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../saas/1/" class="md-nav__link">
        1. Objectives and requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../saas/2/" class="md-nav__link">
        2. Reserve an environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../saas/3/" class="md-nav__link">
        3. Install WCA extension for Visual Studio Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../saas/4/" class="md-nav__link">
        4. Install WCA plug-in for Eclipse IDE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Application Modernization - WebSphere to Liberty
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Application Modernization - WebSphere to Liberty" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Application Modernization - WebSphere to Liberty
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/1/" class="md-nav__link">
        1. Objectives and requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/2/" class="md-nav__link">
        2. Basic migration capabilities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/3/" class="md-nav__link">
        3. Configuration management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/4/" class="md-nav__link">
        4. APIs and libraries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/5/" class="md-nav__link">
        5. EJB modernization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/6/" class="md-nav__link">
        6. JSP modernization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/7/" class="md-nav__link">
        7. Security modernization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/8/" class="md-nav__link">
        8. Data source pooling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/9/" class="md-nav__link">
        9. JMS messaging integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/10/" class="md-nav__link">
        10. State handling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/11/" class="md-nav__link">
        11. Load balancing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appmod1/12/" class="md-nav__link">
        12. Performance optimization
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Tuning and Customization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tuning and Customization" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Tuning and Customization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tuning/1/" class="md-nav__link">
        1. Getting code suggestions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tuning/2/" class="md-nav__link">
        2. Explaining code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tuning/3/" class="md-nav__link">
        3. Documenting code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tuning/4/" class="md-nav__link">
        4. Unit test generation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tuning/5/" class="md-nav__link">
        5. Upgrading Java versions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-on-premises-installation-and-deployment" class="md-nav__link">
    On-Premises Installation and Deployment
  </a>
  
    <nav class="md-nav" aria-label="On-Premises Installation and Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#on-premises-1" class="md-nav__link">
    1. Objectives and requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-premises-2" class="md-nav__link">
    2. Reserve an environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-premises-3" class="md-nav__link">
    3. Bastion host setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-premises-4" class="md-nav__link">
    4. Cluster preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-premises-5" class="md-nav__link">
    5. Install prerequisite software
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-premises-6" class="md-nav__link">
    6. Install IBM Software Hub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-premises-7" class="md-nav__link">
    7. Install watsonx Code Assistant
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-ibm-cloud-saas-configuration" class="md-nav__link">
    IBM Cloud (SaaS) Configuration
  </a>
  
    <nav class="md-nav" aria-label="IBM Cloud (SaaS) Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#saas-1" class="md-nav__link">
    1. Objectives and requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saas-2" class="md-nav__link">
    2. Reserve an environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saas-3" class="md-nav__link">
    3. Install WCA extension for Visual Studio Code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saas-4" class="md-nav__link">
    4. Install WCA plug-in for Eclipse IDE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-application-modernization-websphere-to-liberty" class="md-nav__link">
    Application Modernization - WebSphere to Liberty
  </a>
  
    <nav class="md-nav" aria-label="Application Modernization - WebSphere to Liberty">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appmod1-1" class="md-nav__link">
    1. Objectives and requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-2" class="md-nav__link">
    2. Basic migration capabilities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-3" class="md-nav__link">
    3. Configuration management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-4" class="md-nav__link">
    4. APIs and libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-5" class="md-nav__link">
    5. EJB modernization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-6" class="md-nav__link">
    6. JSP modernization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-7" class="md-nav__link">
    7. Security modernization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-8" class="md-nav__link">
    8. Data source pooling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-9" class="md-nav__link">
    9. JMS messaging integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-10" class="md-nav__link">
    10. State handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-11" class="md-nav__link">
    11. Load balancing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appmod1-12" class="md-nav__link">
    12. Performance optimization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-tuning-and-customization" class="md-nav__link">
    Tuning and Customization
  </a>
  
    <nav class="md-nav" aria-label="Tuning and Customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tuning-1" class="md-nav__link">
    1. Getting code suggestions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-2" class="md-nav__link">
    2. Explaining code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-3" class="md-nav__link">
    3. Documenting code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-4" class="md-nav__link">
    4. Unit test generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-5" class="md-nav__link">
    5. Upgrading Java versions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<div id="print-site-page" class="">
        <section id="print-site-cover-page">
            
<div>

    
        <h1>IBM watsonx Code Assistant for Practitioners Level 4</h1>
    

</div>


<table>

    
    <tr>
        <td>Description</td>
        <td>IBM watsonx Code Assistant for Practitioners Level 4</td>
    </tr>
    

    
    <tr>
        <td>Author(s)</td>
        <td>Christopher Bienko (cdbienko@us.ibm.com)</td>
    </tr>
    

    

    
    <tr>
        <td>Copyright</td>
        <td>Copyright &copy; 2025 IBM</td>
    </tr>
    

</table>





        </section>
        <section class="print-page" id="index"><p>Under construction.</p></section>
                        <h1 class='nav-section-title' id='section-on-premises-installation-and-deployment'>
                            On-Premises Installation and Deployment <a class='headerlink' href='#section-on-premises-installation-and-deployment' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="on-premises-1"><h1 id="on-premises-1-objectives-and-requirementson-premises-installation-and-deployment"><strong>Objectives and requirements</strong></br><em>On-Premises Installation and Deployment</em></h1>
<h2 id="on-premises-1-i-about-this-lab"><strong>i. About this lab</strong></h2>
<p>The <strong>On-Premises Installation and Deployment</strong> module provides comprehensive instructions for how to prepare, configure, and deploy a simulated on-premises cluster for <em>IBM watsonx Code Assistant</em> (WCA) on environments hosted by <em>IBM Technology Zone</em> (ITZ).</p>
<p>By completing this module, participants will have learned and applied the skills necessary for deploying WCA on a client's on-premises infrastructure. The complete stack of technologies and services that you will deploy include:</p>
<ul>
<li>
<p><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.18" target="_blank"><strong>Red Hat OpenShift Container Platform v4.18</strong></a>: a unified application development platform that lets clients build, modernize, and deploy applications at scale on their choice of hybrid cloud infrastructure.</p>
</li>
<li>
<p><a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/5.1.x" target="_blank"><strong>IBM Cloud Pak for Data v5.1.x</strong></a>: a set of services comprising a data fabric solution for data governance, data engineering, data analysis, and AI lifecycle tasks.</p>
</li>
<li>
<p><a href="https://www.ibm.com/docs/en/software-hub/5.1.x" target="_blank"><strong>IBM Software Hub v5.1</strong></a>: a cloud-native solution that clients use to install, manage, and monitor IBM solutions on Red Hat OpenShift Container Platform.</p>
</li>
<li>
<p><a href="https://www.ibm.com/docs/en/wx-code-assistant/5.1.x" target="_blank"><strong>IBM watsonx Code Assistant v5.1</strong></a>: a generative AI coding companion that provides contextually aware assistance for programming languages.</p>
</li>
</ul>
<p>Special acknowledgement and thanks to IBM colleagues Coralie Jonvel, Nelson Nunes, and Noe Samaille for adaptation of their <a href="https://github.ibm.com/CESC-Infrastructure-Services/Installation-CP4D-WatsonX" target="_blank"><strong>deployment instructions</strong></a> for watsonx.ai on Red Hat OpenShift.</p>
<hr />
<p><strong> INSERT ARCHITECTURE GRAPHIC AND DESCRIPTION HERE </strong></p>
<hr />
<div class="admonition warning">
<p class="admonition-title">GPUs NOT SUPPORTED FOR ON-PREMISES DEPLOYMENTS</p>
<p>Resource and budget constraints for IBM Technology Zone and the IBM Enablement teams means that GPUs are <strong>unavailable for the on-premises portion</strong> of the Level 4 curriculum.</p>
<p>The NVIDIA A100 or H100 GPUs required are simply too cost-prohibitive to be made available for individual IBMers and business partners. GPUs cannot be shared in a multi-tenant access pattern for IBM watsonx Code Assistant — and as such at minimum two of such cards would need to be made available for every L4 reservation. These costs are beyond the scope of what can be supported by this training.</p>
<p>Participants <strong><em>will</em> have access to GPUs for the IBM Cloud (SaaS) portion</strong> of the Level 4 curriculum.</p>
</div>
<hr />
<h2 id="on-premises-1-ii-infrastructure-and-resource-requirements"><strong>ii. Infrastructure and resource requirements</strong></h2>
<div class="admonition note">
<p>Requirements specific to the hands-on environment are outlined in the section below. Comprehensive details about the <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=requirements-x86-64-hardware#services" target="_blank"><strong>hardware requirements for x86_64 cluster services</strong></a> are available from IBM Software Hub documentation.</p>
</div>
<p>Although the hands-on environment that will be provisioned in the next module utilizes a templated, pre-defined ITZ infrastructure configuration, it will be useful for those enrolled to understand the resources required to reproduce a similar cluster in real-world client scenarios. This includes details about the CPU, memory, GPU, and other hardware components required to support the necessary cluster services.</p>
<p></br></p>
<p><strong>IBM Software Hub platform</strong>
</br>Additional details available from <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=requirements-x86-64-hardware#platform" target="_blank"><strong>IBM Documentation</strong></a></p>
<table>
<thead>
<tr>
<th>Node Role</th>
<th>Number of Services</th>
<th>Minimum Available vCPU</th>
<th>Minimum Memory</th>
<th>Minimum Storage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Control plane</strong></td>
<td>3 (for high availability)</td>
<td>4 vCPU per node</br>(This configuration supports up to 24 worker nodes.)</td>
<td>16 GB RAM per node. This configuration supports up to 24 worker nodes.</td>
<td>No additional storage is needed for IBM Software Hub.</td>
</tr>
<tr>
<td><strong>Infra</strong></td>
<td>3 (recommended)</td>
<td>4 vCPU per node. This configuration supports up to 27 worker nodes.</td>
<td>24 GB RAM per node</br>(This configuration supports up to 27 worker nodes.)</td>
<td>See the Red Hat OpenShift Container Platform documentation for sizing guidance.</td>
</tr>
<tr>
<td><strong>Worker (compute)</strong></td>
<td>3 or more worker (compute) nodes</td>
<td>16 vCPU per node</td>
<td><strong>Minimum</strong>: 64 GB RAM per node</br><strong>Recommended</strong>: 128 GB RAM per node</td>
<td>300 GB of storage space per node for storing container images locally. If you plan to install watsonx.ai, increase the storage to 500 GB per node.</td>
</tr>
<tr>
<td><strong>Load balancer</strong></td>
<td>2 load balancer nodes</td>
<td>2 vCPU per node</td>
<td>4 GB RAM per node. Add another 4 GB of RAM for access restrictions and security control.</td>
<td>Add 100 GB of root storage for access restrictions and security control.</td>
</tr>
</tbody>
</table>
<p></br></p>
<p><strong>IBM Cloud Pak Foundational Services</strong>
</br>Additional details available from <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=requirements-x86-64-hardware#instance-prereq__cpfs__title__1" target="_blank"><strong>IBM Documentation</strong></a></p>
<table>
<thead>
<tr>
<th>vCPU</th>
<th>Memory</th>
<th>Storage</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>4 vCPU</td>
<td>5 GB RAM</td>
<td>Reference the <a href="https://www.ibm.com/docs/SSRV9V_4.10/installer/hardware_sizing_reqs.html" target="_blank"><strong>v4.10 hardware requirements and recommendations</strong></a>.</td>
<td><strong>Required.</strong> IBM Cloud Pak Foundational Services are installed once for each instance of IBM Software Hub on the cluster.</td>
</tr>
</tbody>
</table>
<p></br></p>
<p><strong>Red Hat OpenShift Container Platform (single node)</strong>
</br>Additional details available from <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=requirements-x86-64-hardware#platform__sno-reqs__title__1" target="_blank"><strong>IBM Documentation</strong></a></p>
<table>
<thead>
<tr>
<th>VM Role</th>
<th>Minimum Available vCPU</th>
<th>Minimum Memory</th>
<th>Minimum Storage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Bastion node</strong></td>
<td>4 vCPU</td>
<td>8 GB RAM</td>
<td>Allocate a minimum of 500 GB of disk space. The disk can be: in the same disk as the general bastion node storage; in a separate disk on the bastion node; or on external storage.</td>
</tr>
<tr>
<td><strong>Worker (compute)</strong></td>
<td>16 vCPU</td>
<td>64 GB RAM</td>
<td>Allocate a minimum of 300 GB of disk space on the node for image storage.</td>
</tr>
</tbody>
</table>
<p></br></p>
<p><strong>IBM watsonx Code Assistant</strong>
</br>Additional details available from <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=requirements-x86-64-hardware#services__wxca__title__1" target="_blank"><strong>IBM Documentation</strong></a></p>
<table>
<thead>
<tr>
<th>vCPU</th>
<th>Memory</th>
<th>Storage</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Operator pods:</strong> </br>0.1 vCPU</td>
<td><strong>Operator pods:</strong> </br>0.256 GB RAM</td>
<td><strong>Persistent storage:</strong> </br>120 GB</td>
<td>Minimum resources for an installation with a single replica per service</td>
</tr>
<tr>
<td><strong>Catalog pods:</strong> </br>0.01 vCPU</td>
<td><strong>Catalog pods:</strong> </br>0.05 GB RAM</td>
<td><strong>Ephemeral storage:</strong> </br>0.4 GB</td>
<td>The service requires at least two GPUs</td>
</tr>
<tr>
<td><strong>Operand:</strong> </br>7 vCPU</td>
<td><strong>Operand:</strong> </br>25 GB RAM</td>
<td><strong>Image storage:</strong> </br>Up to 107 GB with all models</td>
<td>GPU support is limited to: NVIDIA H100 GPUs with 80 GB RAM</td>
</tr>
</tbody>
</table>
<h2 id="on-premises-1-iii-prerequisites-checklist"><strong>iii. Prerequisites checklist</strong></h2>
<hr />
<p><strong>Register for an IBM Technology Zone account</strong></p>
<p>Participants require access to ITZ in order to reserve an environment and complete the hands-on work. If you do not yet have an account with the ITZ, you will need to <a href="https://techzone.ibm.com/" target="_blank"><strong>register for one</strong></a>.</p>
<hr />
<p><strong>Obtain an IBM Entitlement API key</strong></p>
<p>Participants require an entitlement API key to proceed with the on-premises installation. In order to retrieve the key:</p>
<ol>
<li>
<p>Use your <em>IBMid</em> and <em>password</em> to <strong>log in</strong> to the <a href="https://myibm.ibm.com/products-services/containerlibrary" target="_blank"><strong>Container Software Library</strong></a>.</p>
</li>
<li>
<p>Click the <strong>Entitlement keys</strong><sup>[A]</sup> tab from the navigation menu.</p>
</li>
<li>
<p>Click <strong>Add new key</strong><sup>[B]</sup> to generate a new entitlement key.</p>
</li>
<li>
<p>Select <strong>Copy</strong><sup>[C]</sup> to capture the entitlement key to the clipboard.</p>
</li>
<li>
<p>Paste and <strong>save</strong> the entitlement key to a text file on your local machine.</p>
</li>
</ol>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-1.1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../on-premises/_attachments/onprem-1.1.png" width="400" /></a></p>
<hr />
<h2 id="on-premises-1-iv-troubleshooting-and-support"><strong>iv. Troubleshooting and support</strong></h2>
<p>If you require assistance or run into issues with the hands-on lab, help is available.</p>
<ul>
<li>
<p><strong>Environment issues:</strong> The lab environment is managed by IBM Technology Zone. <a href="https://techzone.ibm.com/help" target="_blank"><strong>Opening a support case ticket</strong></a> is recommended for issues related to the hands-on environment (provisioning, running, and so on.)</p>
</li>
<li>
<p><strong>Product questions:</strong> For questions related to IBM watsonx Code Assistant capabilities, sales opportunities, roadmap, and other such matters, open a thread on the <a href="https://ibm.enterprise.slack.com/archives/C059NKPUCP9" target="_blank"><strong>#watsonx-code-assistant</strong></a> Slack channel.</p>
</li>
</ul>
<hr />
<h2 id="on-premises-1-v-next-steps"><strong>v. Next steps</strong></h2>
<p>In the following module, you will provision an OpenShift Container Platform cluster via IBM Technology Zone, which will serve as the basis for the on-premises environment.</p></section><section class="print-page" id="on-premises-2"><h1 id="on-premises-2-reserve-an-environmenton-premises-installation-and-deployment"><strong>Reserve an environment</strong></br><em>On-Premises Installation and Deployment</em></h1>
<h2 id="on-premises-2-i-configuring-the-ibm-technology-zone-reservation"><strong>i. Configuring the IBM Technology Zone reservation</strong></h2>
<p>The foundation for the on-premises environment utilizes the <code>OpenShift Cluster (VMware on IBM Cloud) - UPI - Public</code> template from the collection of <a href="https://techzone.ibm.com/collection/tech-zone-certified-base-images/journey-vmware-on-ibm-cloud-environments" target="_blank"><strong>IBM Technolgy Zone (ITZ) Certified Base Images</strong></a>.</p>
<hr />
<ol>
<li>
<p><strong>Click</strong> the link below to request a reservation directly from ITZ:</p>
<div class="admonition warning">
<p><strong>URL:</strong> <a href="https://techzone.ibm.com/my/reservations/create/63a3a25a3a4689001740dbb3" target="_blank"><strong>https://techzone.ibm.com/my/reservations/create/63a3a25a3a4689001740dbb3</strong></a></p>
</div>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>From the <em>Single environment reservation options</em>, select <strong>Reserve now</strong><sup>[A]</sup>.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-2.2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-2.2.png" /></a></p>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>Supply additional details about the ITZ reservation request:</p>
<div class="admonition note">
<p class="admonition-title">RESERVATON POLICY NOTICE</p>
<p>After selecting <code>Education</code> for the <em>Purpose</em> field, you may receive a pop-up notification stating that <code>this environment is now being redirected to the OCP base image hosted On-Prem for Education and Test</code>. You can safely <strong>ignore</strong> this notice and close it by clicking the <em>X</em> in the top-right corner.</p>
<p><strong>Do not</strong> configure using the Poughkeepsie-based resource that the notice attempts to redirect you to — it will not allow you to configure the necessary hardware specifications. Continue with the ITZ reservation request form as detailed below. If the pop-up appears again later in the configuration steps, continue to disregard the notice.</p>
</div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Name</strong></td>
<td>Give your reservation a unique name.</td>
</tr>
<tr>
<td><strong>Purpose</strong></td>
<td><code>Education</code></td>
</tr>
<tr>
<td><strong>Purpose Description</strong></td>
<td>Give your reservation a unique description.</td>
</tr>
<tr>
<td><strong>Preferred Geography</strong></td>
<td>Select the region and data center geographically closest to your location.</td>
</tr>
<tr>
<td><strong>End Date and Time</strong></td>
<td>Select a time and date for when the reservation will expire.</td>
</tr>
<tr>
<td><strong>OpenShift Version</strong></td>
<td><code>4.16</code></td>
</tr>
<tr>
<td><strong>Worker Node Count</strong></td>
<td><code>3</code></td>
</tr>
<tr>
<td><strong>Worker Node Flavor</strong></td>
<td><code>32 vCPU x 128 GB - 300 GB ephemeral storage</code></td>
</tr>
<tr>
<td><strong>Storage</strong></td>
<td><code>ODF - 2 TB</code></td>
</tr>
<tr>
<td><strong>OCP/Kubernetes Cluster Network</strong></td>
<td><code>10.128.0.0/14</code></td>
</tr>
<tr>
<td><strong>OCP/Kubernetes Service Network</strong></td>
<td><code>172.30.0.0/16</code></td>
</tr>
<tr>
<td><strong>Enable nested hardware virtualization on workers</strong></td>
<td><code>No</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>When satisfied, verify that you agree to the <em>Terms and Conditions</em> for the environment and finalize your reservation request by clicking <strong>Submit</strong>.</p>
<p>Navigate to the <strong><a href="https://techzone.ibm.com/my/reservations" target="_blank">My Reservations</a></strong> tab of the ITZ to monitor the progress of your reservation. While <em>"Provisioning"</em><sup>[A]</sup>, the reservation will be marked with a yellow tile. <strong>Wait</strong> for the ITZ reservation to be marked as <em>"Ready"</em><sup>[B]</sup>before continuing.</p>
<div class="admonition warning">
<p class="admonition-title">PROVISIONING TIMES</p>
<p>This operation will take approximately <strong>90 - 120 minutes</strong> to complete.</p>
</div>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-2.4a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-2.4a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-2.4b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-2.4b.png" /></a></p>
</li>
</ol>
<h2 id="on-premises-2-ii-accessing-the-cluster"><strong>ii. Accessing the cluster</strong></h2>
<p>Once the cluster has been successfully deployed, you will receive an email with the header: <code>Reservation Ready on IBM Technology Zone</code>. </p>
<hr />
<ol start="5">
<li>
<p>Confirm that the ITZ email states that <strong>Status Update: Ready</strong><sup>[A]</sup>. Follow the link provided in the email, or access the <strong><a href="https://techzone.ibm.com/my/reservations" target="_blank">My Reservations</a></strong> tab on ITZ to access your reservation.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-2.5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-2.5.png" /></a></p>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>Scroll down the page until you reach the <strong>Reservation Details</strong> section. Record the following connection details for the OpenShift Container Platform (OCP) cluster to a notepad:</p>
<ul>
<li><em>Desktop URL</em> (interchangeable with <strong>OCP Dashboard URL</strong>)<sup>[A]</sup></li>
<li><em>Cluster Admin Username</em><sup>[B]</sup></li>
<li><em>Cluster Admin Password</em><sup>[C]</sup></li>
<li><em>API URL</em><sup>[D]</sup></li>
<li><em>Bastion Username</em><sup>[E]</sup></li>
<li><em>Bastion Password</em><sup>[F]</sup></li>
<li><em>Bastion SSH Connection</em><sup>[G]</sup></li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-2.6a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-2.6a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-2.6b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-2.6b.png" /></a></p>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>Click the blue <strong>Open your IBM Cloud environment</strong> button at the top of the page to launch a new browser window for accessing the OCP cluster.</p>
<p>Choose the <strong>kube:admin</strong> log in option and then provide the following credentials:</p>
<ul>
<li><em>Username:</em> <code>kubeadmin</code></li>
<li><em>Password:</em> <em>Cluster Admin Password</em> recorded in Step 6</li>
</ul>
<p>At this stage, you should have successfully logged in to the OCP Dashboard.</p>
<h2 id="on-premises-2-_1"><a class="glightbox" href="../on-premises/_attachments/onprem-2.7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-2.7.png" /></a></h2>
</li>
</ol>
<h2 id="on-premises-2-iii-next-steps"><strong>iii. Next steps</strong></h2>
<p>In the following module, you will access and configure the cluster's bastion node.</p></section><section class="print-page" id="on-premises-3"><h1 id="on-premises-3-bastion-host-setupon-premises-installation-and-deployment"><strong>Bastion host setup</strong></br><em>On-Premises Installation and Deployment</em></h1>
<div class="admonition quote">
<p>The following section is based off of IBM Documentation write-ups that detail how to install IBM Software Hub on a Red Hat OpenShift Container Platform cluster. Reference the instructions in full at the following resource: <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=workstation-installing-software-hub-cli" target="_blank"><strong>Installing the IBM Software Hub command-line interface</strong></a>.</p>
</div>
<h2 id="on-premises-3-i-connect-to-the-bastion-host"><strong>i. Connect to the bastion host</strong></h2>
<p>To access and configure the bastion host node, <strong>open a Terminal</strong> (Windows Terminal or the Terminal built into VS Code are good alternatives if you're on a PC).</p>
<hr />
<ol>
<li>
<p><strong>Copy</strong> the <em>Bastion SSH Connection</em> recorded in Step 6 of the previous module and <strong>paste</strong> it into the terminal console. Hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to create an SSH connection to the bastion host.</p>
<ul>
<li>
<p>When prompted <em>Are you sure you want to continue connecting (yes/no/fingerprint)?</em>, enter <code>yes</code> and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to proceed.</p>
</li>
<li>
<p>The console will return a <em>Welcome to IBM Technology Zone</em> once connected to the bastion host, at which point you must authenticate.</p>
</li>
<li>
<p><strong>Authenticate</strong> when prompted to do so by providing the <em>Bastion Password</em>.</p>
</li>
<li>
<p>If the console now reads <code>[itzuser@localhost ~]$</code> then you have successfully accessed the bastion host.</p>
</li>
</ul>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-3.1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-3.1.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-3-ii-openshift-command-line-interface-oc"><strong>ii. OpenShift command line interface (oc)</strong></h2>
<p>Next, install the OpenShift Command Line Interface (CLI), designated <code>oc</code>, to programmatically perform work with the bastion node.</p>
<div class="admonition note">
<p class="admonition-title">ELEVATED PERMISSIONS<p><strong>Execute</strong> the following command in the Terminal console to ensure that subsequent actions taken via the Terminal console are done with elevated permissions. This will save you needing to re-authenticate again for future commands.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#on-premises-3-__codelineno-0-1"></a>sudo bash
</code></pre></div>
</p>
</div>
<hr />
<ol start="2">
<li>
<p>Retrieve the <em>OCP Dashboard URL</em> (recorded in Step 6 of the previous module). Obtain the <strong>OpenShift Base Domain</strong> by extracting the portion of the URL that matches the position highlighted in the sample URL below. Extract the characters following <code>.apps.</code> up to and including <code>.com</code>. Do not include the <code>/dashboards</code> addendum.</p>
<div class="admonition note">
<p>https://console-openshift-console.apps.<strong>678a250b79141644e78804e0.ocp.techzone.ibm.com</strong></p>
</div>
<ul>
<li>
<p>In this example, the value of the <em>OpenShift base domain</em> is <code>678a250b79141644e78804e0.ocp.techzone.ibm.com</code></p>
</li>
<li>
<p>Record <em>your</em> OCP cluster's value to a notepad for future reference.</p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>The following instruction set, when executed within a Terminal window, will install the OpenShift CLI on the bastion host node. However, the instructions require some modification before they will successfully execute.</p>
<p></br>
<strong>Install OpenShift CLI</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#on-premises-3-__codelineno-1-1"></a><span class="hll"><span class="nb">export</span> <span class="nv">OPENSHIFT_BASE_DOMAIN</span><span class="o">=</span>&lt;CHANGE_ME&gt;
</span><a id="__codelineno-1-2" name="__codelineno-1-2" href="#on-premises-3-__codelineno-1-2"></a>wget --no-check-certificate https://downloads-openshift-console.apps.<span class="si">${</span><span class="nv">OPENSHIFT_BASE_DOMAIN</span><span class="si">}</span>/amd64/linux/oc.tar
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#on-premises-3-__codelineno-1-3"></a>tar -xvf oc.tar
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#on-premises-3-__codelineno-1-4"></a>chmod +x oc
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#on-premises-3-__codelineno-1-5"></a>sudo mv oc /usr/local/bin/oc
</code></pre></div></p>
<ul>
<li>Copy the instructions above and paste into a notepad.</li>
<li>Replace the highlighted <code>&lt;CHANGE_ME&gt;</code> text with the <em>OpenShift base domain</em> value recorded in Step 2.</li>
<li>Copy the modified notepad instructions to your clipboard and paste into your Terminal console.</li>
<li>Press <span class="keys"><kbd class="key-enter">Enter</kbd></span> to execute the instructions.</li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-3.3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-3.3.png" /></a></p>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>The setup should only take a moment to complete. Once finished, try typing <code>oc</code> into the console window and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span>. The console output should verify that <code>oc</code> (the OpenShift CLI) has been successfully installed on the bastion host.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-3.4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-3.4.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-3-iii-podman-install"><strong>iii. Podman install </strong></h2>
<p>IBM Cloud Pak for Data (CP4D)'s installer requires containers, for which you will need to install Podman on the cluster nodes via the bastion host. </p>
<hr />
<ol start="5">
<li>
<p>Using the connected Terminal console, <strong>execute</strong> the following instruction to install Podman:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#on-premises-3-__codelineno-2-1"></a>sudo yum install -y podman
</code></pre></div>
<div class="admonition warning">
<p>The operation will take approximately <strong>2 minutes</strong> to complete. After a successful operation, the console will return the message <code>Complete!</code> alongside a summary of the installed components.</p>
</div>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-3.5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-3.5.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-3-iv-environment-variables"><strong>iv. Environment variables </strong></h2>
<p>Set the environment variables needed for installation of CP4D on the cluster. The list is quite extensive and long, so rather than set these one at a time it's recommended that you first compile them into a single file on the bastion host. Afterwards, you can set all the variables automatically using the single file.</p>
<hr />
<ol start="6">
<li>
<p>Below is a code block containing all of the necessary CP4D environment variables. <strong>Copy</strong> the contents of the entire block to your clipboard and <strong>paste</strong> into a notepad.</p>
<p></br>
<strong>CP4D Environment Variables</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#on-premises-3-__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-10">10</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-11">11</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-12">12</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-13">13</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-14">14</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-15">15</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-16">16</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-17">17</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-18">18</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-19">19</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-20">20</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-21">21</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-22">22</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-23">23</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-24">24</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-25">25</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-26">26</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-27">27</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-28">28</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-29">29</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-30">30</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-31">31</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-32">32</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-33">33</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-34">34</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-35">35</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-36">36</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-37">37</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-38">38</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-39">39</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-40">40</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-41">41</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-42">42</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-43">43</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-44">44</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-45">45</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-46">46</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-47">47</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-48">48</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-49">49</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-50">50</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-51">51</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-52">52</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-53">53</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-54">54</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-55">55</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-56">56</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-57">57</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-58">58</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-59">59</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-60">60</a></span>
<span class="normal"><a href="#on-premises-3-__codelineno-3-61">61</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1">#===============================================================================</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="c1"># Cloud Pak for Data installation variables</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="c1">#===============================================================================</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="c1"># Client workstation</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="c1"># Set the following variables if you want to override the default behavior of the Cloud Pak for Data CLI.</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="c1">#</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="c1"># To export these variables, you must uncomment each command in this sec-tion.</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="c1">#export CPD_CLI_MANAGE_WORKSPACE=&lt;enter a fully qualified directory&gt;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="c1"># following lines could be used for environment with self-signed certificates and hostnames not resolved by DNS server</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="c1">#export OLM_UTILS_LAUNCH_ARGS=&quot;-v ./api-wxai.pem:/etc/k8scert --env K8S_AUTH_SSL_CA_CERT=/etc/k8scert --add-host oauth-openshift.apps.ocpinstall.gym.lan:192.168.252.4 --add-host api.ocpinstall.gym.lan:192.168.252.3&quot;</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/home/itzuser/cpd-cli-linux-EE-14.1.0-1189&quot;</span>:<span class="nv">$PATH</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="c1">#-----------------------------------------------------------------------------</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="c1"># Cluster</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="hll"><span class="nb">export</span> <span class="nv">OCP_URL</span><span class="o">=</span>api.&lt;REPLACE THIS VALUE&gt;:6443
</span><a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="c1">#export OPENSHIFT_TYPE=&lt;enter your deployment type&gt;</span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="c1">#export IMAGE_ARCH=amd64</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="nb">export</span> <span class="nv">OCP_USERNAME</span><span class="o">=</span>kubeadmin
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="hll"><span class="nb">export</span> <span class="nv">OCP_PASSWORD</span><span class="o">=</span>&lt;REPLACE THIS VALUE&gt;
</span><a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="c1"># export OCP_TOKEN=&lt;enter your token&gt;</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="nb">export</span> <span class="nv">SERVER_ARGUMENTS</span><span class="o">=</span><span class="s2">&quot;--server=</span><span class="si">${</span><span class="nv">OCP_URL</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="nb">export</span> <span class="nv">LOGIN_ARGUMENTS</span><span class="o">=</span><span class="s2">&quot;--username=</span><span class="si">${</span><span class="nv">OCP_USERNAME</span><span class="si">}</span><span class="s2"> --password=</span><span class="si">${</span><span class="nv">OCP_PASSWORD</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="c1"># export LOGIN_ARGUMENTS=&quot;--token=${OCP_TOKEN}&quot;</span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a><span class="nb">export</span> <span class="nv">CPDM_OC_LOGIN</span><span class="o">=</span><span class="s2">&quot;cpd-cli manage login-to-ocp </span><span class="si">${</span><span class="nv">SERVER_ARGUMENTS</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">LOGIN_ARGUMENTS</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a><span class="nb">export</span> <span class="nv">OC_LOGIN</span><span class="o">=</span><span class="s2">&quot;oc login </span><span class="si">${</span><span class="nv">OCP_URL</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">LOGIN_ARGUMENTS</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-33" name="__codelineno-3-33"></a><span class="c1"># Projects</span>
<a id="__codelineno-3-34" name="__codelineno-3-34"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-35" name="__codelineno-3-35"></a><span class="nb">export</span> <span class="nv">PROJECT_LICENSE_SERVICE</span><span class="o">=</span>cpd-license
<a id="__codelineno-3-36" name="__codelineno-3-36"></a><span class="nb">export</span> <span class="nv">PROJECT_SCHEDULING_SERVICE</span><span class="o">=</span>cpd-scheduling
<a id="__codelineno-3-37" name="__codelineno-3-37"></a><span class="nb">export</span> <span class="nv">PROJECT_CPD_INST_OPERATORS</span><span class="o">=</span>cpd-operators
<a id="__codelineno-3-38" name="__codelineno-3-38"></a><span class="nb">export</span> <span class="nv">PROJECT_CPD_INST_OPERANDS</span><span class="o">=</span>cpd-watsonx
<a id="__codelineno-3-39" name="__codelineno-3-39"></a><span class="c1"># export PROJECT_CPD_INSTANCE_TETHERED=&lt;enter your tethered project&gt;</span>
<a id="__codelineno-3-40" name="__codelineno-3-40"></a><span class="c1"># export PROJECT_CPD_INSTANCE_TETHERED_LIST=&lt;a comma-separated list of teth-ered projects&gt;</span>
<a id="__codelineno-3-41" name="__codelineno-3-41"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-42" name="__codelineno-3-42"></a><span class="c1"># Storage</span>
<a id="__codelineno-3-43" name="__codelineno-3-43"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-44" name="__codelineno-3-44"></a><span class="nb">export</span> <span class="nv">STG_CLASS_BLOCK</span><span class="o">=</span>ocs-storagecluster-ceph-rbd
<a id="__codelineno-3-45" name="__codelineno-3-45"></a><span class="nb">export</span> <span class="nv">STG_CLASS_FILE</span><span class="o">=</span>ocs-storagecluster-cephfs
<a id="__codelineno-3-46" name="__codelineno-3-46"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-47" name="__codelineno-3-47"></a><span class="c1"># IBM Entitled Registry</span>
<a id="__codelineno-3-48" name="__codelineno-3-48"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-49" name="__codelineno-3-49"></a><span class="hll"><span class="nb">export</span> <span class="nv">IBM_ENTITLEMENT_KEY</span><span class="o">=</span>&lt;REPLACE THIS VALUE&gt;
</span><a id="__codelineno-3-50" name="__codelineno-3-50"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-51" name="__codelineno-3-51"></a><span class="c1"># Cloud Pak for Data version</span>
<a id="__codelineno-3-52" name="__codelineno-3-52"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-53" name="__codelineno-3-53"></a><span class="nb">export</span> <span class="nv">VERSION</span><span class="o">=</span><span class="m">5</span>.1.0
<a id="__codelineno-3-54" name="__codelineno-3-54"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-55" name="__codelineno-3-55"></a><span class="c1"># Components</span>
<a id="__codelineno-3-56" name="__codelineno-3-56"></a><span class="c1">#------------------------------------------------------------------------------</span>
<a id="__codelineno-3-57" name="__codelineno-3-57"></a>
<a id="__codelineno-3-58" name="__codelineno-3-58"></a><span class="c1">#export COMPONENTS=ibm-cert-manager,ibm-licensing,scheduler,cpfs,cpd_plat-form</span>
<a id="__codelineno-3-59" name="__codelineno-3-59"></a><span class="c1"># export COMPONENTS_TO_SKIP=&lt;component-ID-1&gt;,&lt;component-ID-2&gt;</span>
<a id="__codelineno-3-60" name="__codelineno-3-60"></a><span class="c1">#export COMPONENTS=ibm-cert-manager,ibm-licensing,cpfs,scheduler,cpd_plat-form,wml,ws,watsonx_ai</span>
<a id="__codelineno-3-61" name="__codelineno-3-61"></a><span class="nb">export</span> <span class="nv">COMPONENTS</span><span class="o">=</span>cpd_platform,wca
</code></pre></div></td></tr></table></div></p>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>You must make <strong>modifications</strong> to <strong>Line 19</strong>, <strong>Line 23</strong>, and <strong>Line 49</strong> of the <em>CP4D Environment Variables</em> to tailor the variables to <em>your</em> specific cluster.</p>
<ul>
<li>
<p><strong>Line 19:</strong> substitute the <code>&lt;REPLACE THIS VALUE&gt;</code> placeholder for <code>export OCP_URL=</code> with to the value of <em>OpenShift Base Domain</em> that was recorded in Step 2. <strong>Do not replace the <code>.api.</code> or <code>:6443:</code> components</strong>, as these are required. Your modified Line 19 should resemble the following:</p>
<div class="admonition note">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#on-premises-3-__codelineno-4-1"></a><span class="nb">export</span> <span class="nv">OCP_URL</span><span class="o">=</span>api.678a250b79141644e78804e0.ocp.techzone.ibm.com:6443
</code></pre></div>
</div>
</li>
<li>
<p><strong>Line 23:</strong> set the value of <code>export OCP_PASSWORD=</code> equal to the value of <em>Cluster Admin Password</em> recorded in Step 6 of the previous module. For example:</p>
<div class="admonition note">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#on-premises-3-__codelineno-5-1"></a><span class="nb">export</span> <span class="nv">OCP_PASSWORD</span><span class="o">=</span>password1234
</code></pre></div>
</div>
</li>
<li>
<p><strong>Line 49:</strong> set the value of <code>export IBM_ENTITLEMENT_KEY=</code> equal to the value of the key specific to <em>your</em> IBM account. Reference the <em>IBM Entitlement API Key</em> that was generated in the <a href="https://ibm.github.io/wca-l4/on-premises/1/#ii-infrastructure-and-resource-requirements" target="_blank"><strong>iii. Prerequisites checklist section of Module 1 (Objectives and Requirements)</strong></a>. Instructions for how to generate an <em>IBM Entitlement API Key</em> are provided in that section. For example:</p>
<div class="admonition note">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#on-premises-3-__codelineno-6-1"></a><span class="nb">export</span> <span class="nv">IBM_ENTITLEMENT_KEY</span><span class="o">=</span>verylongAPIkey1234
</code></pre></div>
</div>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="8">
<li>
<p>With your Terminal console, execute the following instruction to open the <strong>vi</strong> editor and create a shell script named <code>cpd_vars.sh</code> on the bastion host:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#on-premises-3-__codelineno-7-1"></a>vi cpd_vars.sh
</code></pre></div>
<ul>
<li>
<p><strong>Copy</strong> the modified <em>CP4D Environment Variables</em> contents from the notepad (Step 7) to your machine's clipboard.</p>
</li>
<li>
<p>Switch back to the Terminal where the VI editor is now open and press the <span class="keys"><kbd class="key-i">I</kbd></span> key to enable inserting text.</p>
</li>
<li>
<p>Press <span class="keys"><kbd class="key-command">Cmd</kbd></span> + <span class="keys"><kbd class="key-v">V</kbd></span> (or <span class="keys"><kbd class="key-control">Ctrl</kbd></span> + <span class="keys"><kbd class="key-v">V</kbd></span>) to paste the contents from your clipboard.</p>
</li>
<li>
<p>To save, press <span class="keys"><kbd class="key-escape">Esc</kbd></span> and then type <code>:wq</code> followed by <span class="keys"><kbd class="key-enter">Enter</kbd></span> to write the file and exit the editor.</p>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="on-premises-3-v-cloud-pak-for-data-command-line-interface-cpd-cli"><strong>v. Cloud Pak for Data command line interface (cpd-cli) </strong></h2>
<p>Now that the environment variables have been set, the next step towards installing CP4D is preparing the command line interface (<code>cpd-cli</code>). </p>
<hr />
<ol start="9">
<li>
<p><strong>Copy</strong> the following code block and <strong>execute</strong> it within the console to install <code>cpd-cli</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#on-premises-3-__codelineno-8-1"></a>wget https://github.com/IBM/cpd-cli/releases/download/v14.1.0/cpd-cli-linux-EE-14.1.0.tgz
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#on-premises-3-__codelineno-8-2"></a>tar -xzf cpd-cli-linux-EE-14.1.0.tgz
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#on-premises-3-__codelineno-8-3"></a><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">/cpd-cli-linux-EE-14.1.0-1189&quot;</span>:<span class="nv">$PATH</span>
</code></pre></div>
<div class="admonition warning">
<p>The operation will take approximately <strong>1 minute</strong> to complete.</p>
</div>
</li>
</ol>
<hr />
<ol start="10">
<li>
<p><strong>Verify</strong> that the CLI has been successfully integrated with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#on-premises-3-__codelineno-9-1"></a>cpd-cli
</code></pre></div>
<p>The output from the console should resemble the screenshot below.</p>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-3.10.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-3.10.png" /></a></p>
</li>
</ol>
<hr />
<ol start="11">
<li>
<p><strong>Verify</strong> the status of the restarted container by typing <code>podman ps</code> and <span class="keys"><kbd class="key-enter">Enter</kbd></span>, which should return the result of a single container running on the bastion host.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#on-premises-3-__codelineno-10-1"></a><span class="nb">echo</span> <span class="nv">$PATH</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#on-premises-3-__codelineno-10-2"></a>cpd-cli manage restart-container
</code></pre></div>
<div class="admonition warning">
<p>The operation will take approximately <strong>1 minute</strong> to complete. After a successful operation, the console will return a pair of messages that resemble the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#on-premises-3-__codelineno-11-1"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T17:51:35.317974Z Successfully started the container olm-utils-play-v3
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#on-premises-3-__codelineno-11-2"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T17:51:35.318017Z Container olm-utils-play-v3 has been re-created
</code></pre></div>
</div>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-3.11.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-3.11.png" /></a></p>
</li>
</ol>
<hr />
<ol start="12">
<li>
<p>Source the newly-configured environment variables with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#on-premises-3-__codelineno-12-1"></a><span class="nb">source</span> cpd_vars.sh
</code></pre></div>
</li>
</ol>
<hr />
<ol start="13">
<li>
<p>Test that the login for <code>oc</code> command line is now functioning properly:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#on-premises-3-__codelineno-13-1"></a>oc login <span class="si">${</span><span class="nv">OCP_URL</span><span class="si">}</span> <span class="si">${</span><span class="nv">LOGIN_ARGUMENTS</span><span class="si">}</span>
</code></pre></div>
<p>The command line should return back with a prompt describing <code>You have access to ... projects</code> which indicates that <code>oc</code> and the environment variables have been configured.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-3.13.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-3.13.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-3-vi-next-steps"><strong>vi. Next steps </strong></h2>
<p>At this stage the bastion host node has been fully configured ahead of installing the necessary software, which will be covered in the subsequent modules.</p>
<details class="note">
<summary>TROUBLESHOOTING: LOGGING IN AND SESSION TIMEOUTS</summary>
<p>Be aware that SSH connections made over Terminal will time out after a long period of inactivity or due to a connection error. If you need to log back into the bastion terminal, follow the procedure below. Replace the <code>&lt;BASTION_PWD&gt;</code> placeholder with the password specific to <em>your</em> environment.</p>
<ol>
<li>
<p>Log back into the bastion node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#on-premises-3-__codelineno-14-1"></a>ssh itzuser@api.67828ca5e432cac47ccc4230.ocp.techzone.ibm.com -p <span class="m">40222</span> &lt;BASTION_PWD&gt;
</code></pre></div>
</li>
<li>
<p>Engage the <code>sudo</code> (privileged access) session:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#on-premises-3-__codelineno-15-1"></a>sudo bash
</code></pre></div>
</li>
<li>
<p>Source the environment variables stored in <code>cpd_vars.sh</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#on-premises-3-__codelineno-16-1"></a><span class="nb">source</span> cpd_vars.sh
</code></pre></div>
</li>
<li>
<p>Log back into OpenShift:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#on-premises-3-__codelineno-17-1"></a><span class="si">${</span><span class="nv">OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
<li>
<p>Log back into <code>cpd-cli</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#on-premises-3-__codelineno-18-1"></a><span class="si">${</span><span class="nv">CPDM_OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
</ol>
</details></section><section class="print-page" id="on-premises-4"><h1 id="on-premises-4-cluster-preparationon-premises-installation-and-deployment"><strong>Cluster preparation</strong></br><em>On-Premises Installation and Deployment</em></h1>
<div class="admonition quote">
<p>The following section is based off of IBM Documentation detailing how to prepare an OpenShift cluster for IBM Cloud Pak for Data. Reference the instructions in full at the following resource: <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=installing-preparing-your-cluster" target="_blank"><strong>Preparing Your Cluster for IBM Software Hub</strong></a>.</p>
</div>
<h2 id="on-premises-4-i-change-process-ids-limit"><strong>i. Change process IDs limit</strong></h2>
<p>With a newly installed cluster, a <em>KubeletConfig</em> will need to be manually created before the cluster's process IDs can be modified. This file will define the <code>podPidsLimit</code> and <code>maxPods</code> variables for the environment.</p>
<hr />
<ol>
<li>
<p>Copy the contents of the following code block and then <strong>execute</strong> within your Terminal console to generate a new <em>KubeletConfig</em> file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#on-premises-4-__codelineno-0-1"></a>oc apply -f - <span class="s">&lt;&lt; EOF</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#on-premises-4-__codelineno-0-2"></a><span class="s">apiVersion: machineconfiguration.openshift.io/v1</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#on-premises-4-__codelineno-0-3"></a><span class="s">kind: KubeletConfig</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#on-premises-4-__codelineno-0-4"></a><span class="s">metadata:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#on-premises-4-__codelineno-0-5"></a><span class="s">  name: cpd-watsonx-kubeletconfig</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#on-premises-4-__codelineno-0-6"></a><span class="s">spec:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#on-premises-4-__codelineno-0-7"></a><span class="s">  kubeletConfig:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#on-premises-4-__codelineno-0-8"></a><span class="s">    podPidsLimit: 16384</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#on-premises-4-__codelineno-0-9"></a><span class="s">    podsPerCore: 0</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#on-premises-4-__codelineno-0-10"></a><span class="s">    maxPods: 500</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#on-premises-4-__codelineno-0-11"></a><span class="s">  machineConfigPoolSelector:</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#on-premises-4-__codelineno-0-12"></a><span class="s">    matchExpressions:</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#on-premises-4-__codelineno-0-13"></a><span class="s">    - key: pools.operator.machineconfiguration.openshift.io/worker</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#on-premises-4-__codelineno-0-14"></a><span class="s">      operator: Exists</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#on-premises-4-__codelineno-0-15"></a><span class="s">EOF</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">KUBELETCONFIG TEST</p>
<p>You can test whether a <em>KubeletConfig</em> file exists on the system by executing the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#on-premises-4-__codelineno-1-1"></a>oc get kubeletconfig
</code></pre></div>
</div>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-4.1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-4.1.png" /></a></p>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>Use the CP4D command line (<code>cpd-cli</code>) to log into OCP by <strong>executing</strong> the following code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#on-premises-4-__codelineno-2-1"></a>cpd-cli manage login-to-ocp <span class="se">\</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#on-premises-4-__codelineno-2-2"></a>--username<span class="o">=</span><span class="si">${</span><span class="nv">OCP_USERNAME</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#on-premises-4-__codelineno-2-3"></a>--password<span class="o">=</span><span class="si">${</span><span class="nv">OCP_PASSWORD</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#on-premises-4-__codelineno-2-4"></a>--server<span class="o">=</span><span class="si">${</span><span class="nv">OCP_URL</span><span class="si">}</span>
</code></pre></div>
<div class="admonition warning">
<p>The operation will take approximately <strong>1 minute</strong> to complete. After a successful run, the console should return a pair of messages that resemble the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#on-premises-4-__codelineno-3-1"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T18:04:23.978349Z You may find output and logs <span class="k">in</span> the /home/itzuser/cpd-cli-workspace/olm-utils-workspace/work directory.
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#on-premises-4-__codelineno-3-2"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T18:04:23.978412Z The login-to-ocp <span class="nb">command</span> ran successfully.
</code></pre></div>
</div>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-4.2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-4.2.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-4-ii-update-the-clusters-global-pull-secret"><strong>ii. Update the cluster's global pull secret</strong></h2>
<p>Use <code>cpd-cli</code> to manage the creation or updating of the global image pull <em>secret</em> via the <code>add-icr-cred-to-global-pull-secret</code> command.</p>
<hr />
<ol start="3">
<li>
<p><strong>Execute</strong> the following command within the Terminal console:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#on-premises-4-__codelineno-4-1"></a>cpd-cli manage add-icr-cred-to-global-pull-secret --entitled_registry_key<span class="o">=</span><span class="si">${</span><span class="nv">IBM_ENTITLEMENT_KEY</span><span class="si">}</span> 
</code></pre></div>
<p>The console will return two <code>[SUCCESS]</code> statements indicating a successful run.</p>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-4.3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-4.3.png" /></a></p>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>Now you must update all nodes across the cluster using OpenShift command line (<code>oc</code>). <strong>Execute</strong> the following instructions via the Terminal console:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#on-premises-4-__codelineno-5-1"></a>oc login <span class="si">${</span><span class="nv">OCP_URL</span><span class="si">}</span> --username<span class="o">=</span><span class="si">${</span><span class="nv">OCP_USERNAME</span><span class="si">}</span> --password<span class="o">=</span><span class="si">${</span><span class="nv">OCP_PASSWORD</span><span class="si">}</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#on-premises-4-__codelineno-5-2"></a>oc get mcp
</code></pre></div>
<p>Once completed, <strong>execute</strong> the following statement to check the status of the cluster nodes (this can be performed periodically to track the progress of the node updates):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#on-premises-4-__codelineno-6-1"></a>cpd-cli manage oc get nodes
</code></pre></div>
<p>Wait until the <code>STATUS</code> returns for all nodes (3 master nodes, 3 storage nodes, and 3 worker nodes) all report as <code>Ready</code>.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-4.4a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-4.4a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-4.4b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-4.4b.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-4-iii-next-steps"><strong>iii. Next steps</strong></h2>
<p>In the following module, you will install the necessary prerequisite software required to deploy IBM Cloud Pak for Data and IBM watsonx Code Assistant.</p>
<details class="note">
<summary>TROUBLESHOOTING: LOGGING IN AND SESSION TIMEOUTS</summary>
<p>Be aware that SSH connections made over Terminal will time out after a long period of inactivity or due to a connection error. If you need to log back into the bastion terminal, follow the procedure below. Replace the <code>&lt;BASTION_PWD&gt;</code> placeholder with the password specific to <em>your</em> environment.</p>
<ol>
<li>
<p>Log back into the bastion node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#on-premises-4-__codelineno-7-1"></a>ssh itzuser@api.67828ca5e432cac47ccc4230.ocp.techzone.ibm.com -p <span class="m">40222</span> &lt;BASTION_PWD&gt;
</code></pre></div>
</li>
<li>
<p>Engage the <code>sudo</code> (privileged access) session:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#on-premises-4-__codelineno-8-1"></a>sudo bash
</code></pre></div>
</li>
<li>
<p>Source the environment variables stored in <code>cpd_vars.sh</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#on-premises-4-__codelineno-9-1"></a><span class="nb">source</span> cpd_vars.sh
</code></pre></div>
</li>
<li>
<p>Log back into OpenShift:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#on-premises-4-__codelineno-10-1"></a><span class="si">${</span><span class="nv">OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
<li>
<p>Log back into <code>cpd-cli</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#on-premises-4-__codelineno-11-1"></a><span class="si">${</span><span class="nv">CPDM_OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
</ol>
</details></section><section class="print-page" id="on-premises-5"><h1 id="on-premises-5-install-prerequisite-softwareon-premises-installation-and-deployment"><strong>Install prerequisite software</strong></br><em>On-Premises Installation and Deployment</em></h1>
<div class="admonition quote">
<ul>
<li>Review the <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=cluster-installing-cert-manager-operator" target="_blank"><strong>latest documentation on IBM Software Hub</strong></a> to determine the appropriate version needed for your client opportunity and OpenShift cluster version.</li>
<li>The following module <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.16/html/security_and_compliance/cert-manager-operator-for-red-hat-openshift#cert-manager-operator-install" target="_blank"><strong>follows the documentation</strong></a> for installing IBM Software Hub's <code>cert-manager-operator.v.13.0</code> for OpenShift Container Platform (OCP) v4.16.</li>
</ul>
</div>
<h2 id="on-premises-5-i-install-the-red-hat-openshift-cert-manager"><strong>i. Install the Red Hat OpenShift cert-manager</strong></h2>
<p>After the release of <strong>IBM Software Hub</strong>, previous methods for installing IBM Cloud Pak for Data (CP4D) that relied on IBM Cert Manager are no longer required. IBM Software Hub is now the recommended path and will be the method adhered in the following section.</p>
<hr />
<ol>
<li>
<p>First create the prerequisite project <em>namespace</em> by <strong>executing</strong> the following instruction:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#on-premises-5-__codelineno-0-1"></a>oc new-project cert-manager-operator
</code></pre></div>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-5.1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.1.png" /></a></p>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>Afterwards, return to your web browser and open the <strong>OCP Dashboard</strong> (<a href="https://ibm.github.io/wca-l4/on-premises/2/#ii-accessing-the-cluster" target="_blank"><strong>Step 8 of Module 2</strong></a>).</p>
<p>From the left-hand navigation menu, navigate to <strong>Operators</strong> &gt; <strong>OperatorHub</strong><sup>[A]</sup>.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.2.png" /></a></p>
</li>
</ol>
<hr />
<ol start="3">
<li>Into the filter box<sup>[B]</sup>, type <code>cert-manager Operator for Red Hat OpenShift</code> and <strong>click</strong><sup>[C]</sup> the filtered result with the same name.</li>
</ol>
<hr />
<ol start="4">
<li>
<p>From the configuration screen, select the following options:</p>
<ul>
<li><em>Channel</em><sup>[A]</sup> : <code>stable-v1.13</code></li>
<li><em>Version</em><sup>[B]</sup> : <code>1.13.0</code></li>
<li>When ready, click the blue <strong>Install</strong><sup>[C]</sup> button</li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../on-premises/_attachments/onprem-5.4.png" width="400" /></a></p>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>A new page will load, summarizing the settings of the proposed Operator. Verify that the details are correct:</p>
<ul>
<li><em>Update channel</em><sup>[A]</sup> : <code>stable-v1.13</code></li>
<li><em>Version</em><sup>[B]</sup> : <code>1.13.0</code></li>
<li><em>Installation mode</em><sup>[C]</sup> : <code>A specific namespace on the cluster</code></li>
<li><em>Installed namespace</em><sup>[D]</sup> : <code>Operator recommended Namespace: cert-manager-operator</code></li>
<li><em>Update approval</em><sup>[E]</sup> : <code>Manual</code></li>
</ul>
<p></br>
When ready, scroll down to the bottom of the page and click the blue <strong>Install</strong><sup>[F]</sup> button. The page will refresh periodically as the Operator is installed on the cluster. This may take several minutes to complete.</p>
<ul>
<li>When prompted with a <em>Manual approval required</em> splashscreen, click <strong>Approve</strong><sup>[G]</sup></li>
<li>Wait until the page refreshes with the message <em>Installed operator: ready for use</em> and then click <strong>View Operator</strong><sup>[H]</sup> to view the finalized Operator</li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.5a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.5a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.5b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.5b.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.5c.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.5c.png" /></a></p>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>You can also track the progress of the Operator installation by drilling down into <strong>Operators</strong> &gt; <strong>Installed Operators</strong> from the left-hand side of the OCP Dashboard. Scroll down until you locate the <code>cert-manager Operator for Red Hat OpenShift</code> entry in the table.</p>
<p></br>
Monitor the progress by observing changes to the fourth column of the table. <strong>Wait</strong> until Operator shows a status of <code>Succeeded</code>.</p>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>On the OCP Dashboard, make sure you are under the <strong>Operators</strong> &gt; <strong>Installed Operators</strong> view.</p>
<ul>
<li><strong>Click</strong> the title of the <code>cert-manager-Operator for Red Hat OpenShift</code> to open the details panel</li>
<li>From the tabs along the top of the page, click <strong>Subscription</strong><sup>[A]</sup></li>
<li>Under the <em>Subscription details</em> header, there are three panels: <em>Update channel</em>, <em>Update approval</em>, and <em>Update status</em>*</li>
<li>Click the hyperlinked <strong>1 requires approval</strong><sup>[B]</sup> text next to the <em>Update Status</em> panel</li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.7.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.7b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.7b.png" /></a></p>
</li>
</ol>
<hr />
<ol start="8">
<li>
<p>A new page, <em>InstallPlan details</em> for <code>install-12xyz</code>, will load.</p>
<ul>
<li>Click the blue <strong>Preview InstallPlan</strong><sup>[A]</sup> button</li>
<li>When the panel refreshes, click the blue <strong>Approve</strong> button to begin updating to <code>v1.13.1</code></li>
<li>Wait for the status to the right of <code>install-12xyz</code> to read <code>Complete</code><sup>[B]</sup></li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.8a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.8a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.8b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.8b.png" /></a></p>
</li>
</ol>
<hr />
<ol start="9">
<li>
<p>From the left-hand navigation bar of the OCP Dashboard, once again navigate into <strong>Operators</strong> &gt; <strong>Installed Operators</strong> to watch the progress of the update. The <code>cert-manager Operator for Red Hat OpenShift</code> will show a <em>Status</em> of <code>Installing</code> while the update is underway. Wait until the status changes to <code>Succeeded</code><sup>[A]</sup>.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.9.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.9.png" /></a></p>
</li>
</ol>
<hr />
<ol start="10">
<li>
<p><strong>Verify</strong> that <code>cert-manager</code> pods are up and running by executing the following command with your Terminal console:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#on-premises-5-__codelineno-1-1"></a>oc get pods -n cert-manager
</code></pre></div>
<p>The console should return output closely resembling the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#on-premises-5-__codelineno-2-1"></a>NAME                                       READY   STATUS    RESTARTS   AGE
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#on-premises-5-__codelineno-2-2"></a>cert-manager-bd7fbb9fc-wvbbt               <span class="m">1</span>/1     Running   <span class="m">0</span>          3m39s
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#on-premises-5-__codelineno-2-3"></a>cert-manager-cainjector-56cc5f9868-7g9z7   <span class="m">1</span>/1     Running   <span class="m">0</span>          4m5s
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#on-premises-5-__codelineno-2-4"></a>cert-manager-webhook-d4f79d7f7-9dg9w       <span class="m">1</span>/1     Running   <span class="m">0</span>          4m9s
</code></pre></div>
<p>At this point, the OpenShift <code>cert-manager</code> has been successfully deployed on the cluster.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.10.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.10.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-5-ii-operators-for-gpus"><strong>ii. Operators for GPUs</strong></h2>
<div class="admonition warning">
<p class="admonition-title">GPUs NOT SUPPORTED FOR ON-PREMISES DEPLOYMENTS</p>
<p>Resource and budget constraints for IBM Technology Zone and the IBM Enablement teams means that GPUs are <strong>unavailable for the on-premises portion</strong> of the Level 4 curriculum.</p>
<p>The NVIDIA A100 or H100 GPUs required are simply too cost-prohibitive to be made available for individual IBMers and business partners. GPUs cannot be shared in a multi-tenant access pattern for IBM watsonx Code Assistant — and as such at minimum two of such cards would need to be made available for every L4 reservation. These costs are beyond the scope of what can be supported by this training.</p>
<p>Participants <strong><em>will</em> have access to GPUs for the IBM Cloud (SaaS) portion</strong> of the Level 4 curriculum.</p>
</div>
<p></br>
Although GPUs will not be available to deploy or interact with for the <em>On-Premises Installation and Deployment</em> L4 training modules, participants will still be able to practice and learn the skills needed to prepare a cluster for GPUs.</p>
<p>This section will cover all of the necessary configuration and setup required to make GPUs available to an IBM watsonx Code Asssitant service — shy of actually getting to use the GPUs with the on-premises deployment. Participants will still be able to interact with GPU-powered instances in the latter IBM Cloud (SaaS) modules of the L4 curriculum.</p>
<p>Services such as IBM watsonx Code Assistant (on-premises), which requires access to GPUs, need to install several Operators on the OpenShift cluster to support the management of NVIDIA software components. Those components, in turn, are needed to provision the GPUs for access by the cluster.</p>
<p>IBM watsonx Code Assistant requires that the following Operators be installed:
    - <em>Node Feature Discovery Operator</em>: within the <code>openshift-nfd</code> namespace
    - <em>NVIDIA GPU Operator</em>: within the <code>nvidia-gpu-operator</code> namespace
    - <em>Red Hat OpenShift AI</em></p>
<hr />
<h2 id="on-premises-5-iii-install-the-node-feature-discovery-operator"><strong>iii. Install the Node Feature Discovery Operator</strong></h2>
<div class="admonition note">
<p>The following section is based off a selection of the complete IBM Documentation available for <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=software-installing-operators-services-that-require-gpus" target="_blank"><strong>Installing operators for services that require GPUs</strong></a>.</p>
</div>
<p>The following section will provide the instructions necessary to replicate this procedure. <strong>Participants are welcome to practice this with the L4 environment provided</strong> — just be aware that no physical GPU hardware will be available or connected at the conclusion of these steps.</p>
<hr />
<ol start="11">
<li>
<p>First, you will use the Terminal console to programmatically create a namespace <code>openshift-nfd</code> for the Node Feature Discovery (NDF) Operator. The following instruction set will create a namespace <strong>Custom Resource</strong> (CR) that defines the <code>openshift-ndf</code> namespace and then saves the YAML file to  <code>nfd-namespace.yaml</code>.</p>
<p>Copy and paste the following code block into the Terminal console, then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#on-premises-5-__codelineno-3-1"></a>oc apply -f - <span class="s">&lt;&lt;EOF </span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#on-premises-5-__codelineno-3-2"></a><span class="s">apiVersion: v1</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#on-premises-5-__codelineno-3-3"></a><span class="s">kind: Namespace</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#on-premises-5-__codelineno-3-4"></a><span class="s">metadata:</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#on-premises-5-__codelineno-3-5"></a><span class="s">    name: openshift-nfd</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#on-premises-5-__codelineno-3-6"></a><span class="s">    labels:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#on-premises-5-__codelineno-3-7"></a><span class="s">        name: openshift-nfd</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#on-premises-5-__codelineno-3-8"></a><span class="s">        openshift.io/cluster-monitoring: &quot;true&quot;</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#on-premises-5-__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#on-premises-5-__codelineno-3-10"></a><span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="12">
<li>
<p>Install the <strong>NDF Operator</strong> within the <code>openshift-nfd</code> namespace that was created in Step 11 by first defining the following objects. This will create an OperatorGroup CR and subsequently save the YAML file to <code>operatorgroup.yaml</code>.</p>
<p>Copy and paste the following code block into the Terminal console, then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#on-premises-5-__codelineno-4-1"></a>oc apply -f - <span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#on-premises-5-__codelineno-4-2"></a><span class="s">apiVersion: operators.coreos.com/v1</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#on-premises-5-__codelineno-4-3"></a><span class="s">kind: OperatorGroup</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#on-premises-5-__codelineno-4-4"></a><span class="s">metadata:</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#on-premises-5-__codelineno-4-5"></a><span class="s">    generateName: openshift-nfd-</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#on-premises-5-__codelineno-4-6"></a><span class="s">    name: openshift-nfd</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#on-premises-5-__codelineno-4-7"></a><span class="s">    namespace: openshift-nfd</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#on-premises-5-__codelineno-4-8"></a><span class="s">spec:</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#on-premises-5-__codelineno-4-9"></a><span class="s">    targetNamespaces:</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#on-premises-5-__codelineno-4-10"></a><span class="s">    - openshift-nfd</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#on-premises-5-__codelineno-4-11"></a><span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="13">
<li>
<p>Create a <strong>Subscription CR</strong> and save the YAML file to <code>nfd-sub.yaml</code>.</p>
<p>Copy and paste the following code block into the Terminal console, then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#on-premises-5-__codelineno-5-1"></a>oc apply -f - <span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#on-premises-5-__codelineno-5-2"></a><span class="s">apiVersion: operators.coreos.com/v1alpha1</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#on-premises-5-__codelineno-5-3"></a><span class="s">kind: Subscription</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#on-premises-5-__codelineno-5-4"></a><span class="s">metadata:</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#on-premises-5-__codelineno-5-5"></a><span class="s">    name: nfd</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#on-premises-5-__codelineno-5-6"></a><span class="s">    namespace: openshift-nfd</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#on-premises-5-__codelineno-5-7"></a><span class="s">spec:</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#on-premises-5-__codelineno-5-8"></a><span class="s">    channel: &quot;stable&quot;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#on-premises-5-__codelineno-5-9"></a><span class="s">    installPlanApproval: Automatic</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#on-premises-5-__codelineno-5-10"></a><span class="s">    name: nfd</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#on-premises-5-__codelineno-5-11"></a><span class="s">    source: redhat-operators</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#on-premises-5-__codelineno-5-12"></a><span class="s">    sourceNamespace: openshift-marketplace</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#on-premises-5-__codelineno-5-13"></a><span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="14">
<li>
<p>Check on the <strong>status</strong> of the OpenShift pods with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#on-premises-5-__codelineno-6-1"></a>oc get pods -n openshift-nfd
</code></pre></div>
<p></br>
Initially, the console may return a response such as <code>No resources found in openshift-ndf namespace.</code> This likely is because the pod is still provisioning. Check the status of the deployment with the following steps:</p>
<ul>
<li>Return to the OCP Dashboard and navigate to <strong>Operators</strong> &gt; <strong>Installed Operators</strong><sup>[A]</sup></li>
<li>Within the table, look for a resource named <code>nfd</code><sup>[B]</sup></li>
<li>If the code from Step 13 was only recently executed, the <em>Managed Namespaces</em> of this resource may be showing as <code>None</code> and the <em>Status</em> as <code>Unknown</code><sup>[C]</sup></li>
<li>Wait a few moments (and refresh the page if you wish) until the <code>nfd</code> resource is replaced by <code>Node Feature Discovery Operator</code><sup>[D]</sup>, which should then belong to the <code>openshift-nfd</code> <em>Managed Namespace</em> and have a <code>Succeeded</code> <em>Status</em><sup>[E]</sup></li>
</ul>
<div class="admonition warning">
<p>This operation will take approximately <strong>2 minutes</strong> to complete. Wait and then <strong>execute</strong> the previous command from Step 14 a second time within the Terminal console. Observe the updated pod status. The console should report back the following to indicate that the Operator was successfully deployed:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#on-premises-5-__codelineno-7-1"></a>NAME                                      READY   STATUS    RESTARTS   AGE
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#on-premises-5-__codelineno-7-2"></a>nfd-controller-manager-7f4c4cf577-wn96r   <span class="m">2</span>/2     Running   <span class="m">0</span>          3m10s
</code></pre></div></p>
</div>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.14a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.14a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.14b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.14b.png" /></a></p>
</li>
</ol>
<hr />
<ol start="15">
<li>
<p>Create a <strong>NodeFeatureDiscovery CR</strong> and save the YAML file to <code>NodeFeatureDiscovery.yaml</code>.</p>
<p>Copy and paste the following code block into the Terminal console, then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#on-premises-5-__codelineno-8-1"></a>oc apply -f - <span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#on-premises-5-__codelineno-8-2"></a><span class="s">apiVersion: nfd.openshift.io/v1</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#on-premises-5-__codelineno-8-3"></a><span class="s">kind: NodeFeatureDiscovery</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#on-premises-5-__codelineno-8-4"></a><span class="s">metadata:</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#on-premises-5-__codelineno-8-5"></a><span class="s">    name: nfd-instance</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#on-premises-5-__codelineno-8-6"></a><span class="s">    namespace: openshift-nfd</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#on-premises-5-__codelineno-8-7"></a><span class="s">spec:</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#on-premises-5-__codelineno-8-8"></a><span class="s">    instance: &quot;&quot; # instance is empty by default</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#on-premises-5-__codelineno-8-9"></a><span class="s">    operand:</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#on-premises-5-__codelineno-8-10"></a><span class="s">        image: registry.redhat.io/openshift4/ose-node-feature-discovery-rhel9:v4.16 </span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#on-premises-5-__codelineno-8-11"></a><span class="s">        imagePullPolicy: Always</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#on-premises-5-__codelineno-8-12"></a><span class="s">    workerConfig:</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#on-premises-5-__codelineno-8-13"></a><span class="s">        configData: |</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#on-premises-5-__codelineno-8-14"></a><span class="s">            core:</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#on-premises-5-__codelineno-8-15"></a><span class="s">            #  labelWhiteList:</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#on-premises-5-__codelineno-8-16"></a><span class="s">            #  noPublish: false</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#on-premises-5-__codelineno-8-17"></a><span class="s">                sleepInterval: 60s</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#on-premises-5-__codelineno-8-18"></a><span class="s">            #  sources: [all]</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#on-premises-5-__codelineno-8-19"></a><span class="s">            #  klog:</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#on-premises-5-__codelineno-8-20"></a><span class="s">            #    addDirHeader: false</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#on-premises-5-__codelineno-8-21"></a><span class="s">            #    alsologtostderr: false</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#on-premises-5-__codelineno-8-22"></a><span class="s">            #    logBacktraceAt:</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#on-premises-5-__codelineno-8-23"></a><span class="s">            #    logtostderr: true</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#on-premises-5-__codelineno-8-24"></a><span class="s">            #    skipHeaders: false</span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#on-premises-5-__codelineno-8-25"></a><span class="s">            #    stderrthreshold: 2</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#on-premises-5-__codelineno-8-26"></a><span class="s">            #    v: 0</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#on-premises-5-__codelineno-8-27"></a><span class="s">            #    vmodule:</span>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#on-premises-5-__codelineno-8-28"></a><span class="s">            ##   NOTE: the following options are not dynamically run-time configurable</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#on-premises-5-__codelineno-8-29"></a><span class="s">            ##         and require a nfd-worker restart to take effect after being changed</span>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#on-premises-5-__codelineno-8-30"></a><span class="s">            #    logDir:</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#on-premises-5-__codelineno-8-31"></a><span class="s">            #    logFile:</span>
<a id="__codelineno-8-32" name="__codelineno-8-32" href="#on-premises-5-__codelineno-8-32"></a><span class="s">            #    logFileMaxSize: 1800</span>
<a id="__codelineno-8-33" name="__codelineno-8-33" href="#on-premises-5-__codelineno-8-33"></a><span class="s">            #    skipLogHeaders: false</span>
<a id="__codelineno-8-34" name="__codelineno-8-34" href="#on-premises-5-__codelineno-8-34"></a><span class="s">            sources:</span>
<a id="__codelineno-8-35" name="__codelineno-8-35" href="#on-premises-5-__codelineno-8-35"></a><span class="s">                cpu:</span>
<a id="__codelineno-8-36" name="__codelineno-8-36" href="#on-premises-5-__codelineno-8-36"></a><span class="s">                    cpuid:</span>
<a id="__codelineno-8-37" name="__codelineno-8-37" href="#on-premises-5-__codelineno-8-37"></a><span class="s">                        # NOTE: whitelist has priority over blacklist</span>
<a id="__codelineno-8-38" name="__codelineno-8-38" href="#on-premises-5-__codelineno-8-38"></a><span class="s">                        attributeBlacklist:</span>
<a id="__codelineno-8-39" name="__codelineno-8-39" href="#on-premises-5-__codelineno-8-39"></a><span class="s">                            - &quot;BMI1&quot;</span>
<a id="__codelineno-8-40" name="__codelineno-8-40" href="#on-premises-5-__codelineno-8-40"></a><span class="s">                            - &quot;BMI2&quot;</span>
<a id="__codelineno-8-41" name="__codelineno-8-41" href="#on-premises-5-__codelineno-8-41"></a><span class="s">                            - &quot;CLMUL&quot;</span>
<a id="__codelineno-8-42" name="__codelineno-8-42" href="#on-premises-5-__codelineno-8-42"></a><span class="s">                            - &quot;CMOV&quot;</span>
<a id="__codelineno-8-43" name="__codelineno-8-43" href="#on-premises-5-__codelineno-8-43"></a><span class="s">                            - &quot;CX16&quot;</span>
<a id="__codelineno-8-44" name="__codelineno-8-44" href="#on-premises-5-__codelineno-8-44"></a><span class="s">                            - &quot;ERMS&quot;</span>
<a id="__codelineno-8-45" name="__codelineno-8-45" href="#on-premises-5-__codelineno-8-45"></a><span class="s">                            - &quot;F16C&quot;</span>
<a id="__codelineno-8-46" name="__codelineno-8-46" href="#on-premises-5-__codelineno-8-46"></a><span class="s">                            - &quot;HTT&quot;</span>
<a id="__codelineno-8-47" name="__codelineno-8-47" href="#on-premises-5-__codelineno-8-47"></a><span class="s">                            - &quot;LZCNT&quot;</span>
<a id="__codelineno-8-48" name="__codelineno-8-48" href="#on-premises-5-__codelineno-8-48"></a><span class="s">                            - &quot;MMX&quot;</span>
<a id="__codelineno-8-49" name="__codelineno-8-49" href="#on-premises-5-__codelineno-8-49"></a><span class="s">                            - &quot;MMXEXT&quot;</span>
<a id="__codelineno-8-50" name="__codelineno-8-50" href="#on-premises-5-__codelineno-8-50"></a><span class="s">                            - &quot;NX&quot;</span>
<a id="__codelineno-8-51" name="__codelineno-8-51" href="#on-premises-5-__codelineno-8-51"></a><span class="s">                            - &quot;POPCNT&quot;</span>
<a id="__codelineno-8-52" name="__codelineno-8-52" href="#on-premises-5-__codelineno-8-52"></a><span class="s">                            - &quot;RDRAND&quot;</span>
<a id="__codelineno-8-53" name="__codelineno-8-53" href="#on-premises-5-__codelineno-8-53"></a><span class="s">                            - &quot;RDSEED&quot;</span>
<a id="__codelineno-8-54" name="__codelineno-8-54" href="#on-premises-5-__codelineno-8-54"></a><span class="s">                            - &quot;RDTSCP&quot;</span>
<a id="__codelineno-8-55" name="__codelineno-8-55" href="#on-premises-5-__codelineno-8-55"></a><span class="s">                            - &quot;SGX&quot;</span>
<a id="__codelineno-8-56" name="__codelineno-8-56" href="#on-premises-5-__codelineno-8-56"></a><span class="s">                            - &quot;SSE&quot;</span>
<a id="__codelineno-8-57" name="__codelineno-8-57" href="#on-premises-5-__codelineno-8-57"></a><span class="s">                            - &quot;SSE2&quot;</span>
<a id="__codelineno-8-58" name="__codelineno-8-58" href="#on-premises-5-__codelineno-8-58"></a><span class="s">                            - &quot;SSE3&quot;</span>
<a id="__codelineno-8-59" name="__codelineno-8-59" href="#on-premises-5-__codelineno-8-59"></a><span class="s">                            - &quot;SSE4.1&quot;</span>
<a id="__codelineno-8-60" name="__codelineno-8-60" href="#on-premises-5-__codelineno-8-60"></a><span class="s">                            - &quot;SSE4.2&quot;</span>
<a id="__codelineno-8-61" name="__codelineno-8-61" href="#on-premises-5-__codelineno-8-61"></a><span class="s">                            - &quot;SSSE3&quot;</span>
<a id="__codelineno-8-62" name="__codelineno-8-62" href="#on-premises-5-__codelineno-8-62"></a><span class="s">                        attributeWhitelist:</span>
<a id="__codelineno-8-63" name="__codelineno-8-63" href="#on-premises-5-__codelineno-8-63"></a><span class="s">                    kernel:</span>
<a id="__codelineno-8-64" name="__codelineno-8-64" href="#on-premises-5-__codelineno-8-64"></a><span class="s">                        kconfigFile: &quot;/path/to/kconfig&quot;</span>
<a id="__codelineno-8-65" name="__codelineno-8-65" href="#on-premises-5-__codelineno-8-65"></a><span class="s">                        configOpts:</span>
<a id="__codelineno-8-66" name="__codelineno-8-66" href="#on-premises-5-__codelineno-8-66"></a><span class="s">                            - &quot;NO_HZ&quot;</span>
<a id="__codelineno-8-67" name="__codelineno-8-67" href="#on-premises-5-__codelineno-8-67"></a><span class="s">                            - &quot;X86&quot;</span>
<a id="__codelineno-8-68" name="__codelineno-8-68" href="#on-premises-5-__codelineno-8-68"></a><span class="s">                            - &quot;DMI&quot;</span>
<a id="__codelineno-8-69" name="__codelineno-8-69" href="#on-premises-5-__codelineno-8-69"></a><span class="s">                    pci:</span>
<a id="__codelineno-8-70" name="__codelineno-8-70" href="#on-premises-5-__codelineno-8-70"></a><span class="s">                        deviceClassWhitelist:</span>
<a id="__codelineno-8-71" name="__codelineno-8-71" href="#on-premises-5-__codelineno-8-71"></a><span class="s">                            - &quot;0200&quot;</span>
<a id="__codelineno-8-72" name="__codelineno-8-72" href="#on-premises-5-__codelineno-8-72"></a><span class="s">                            - &quot;03&quot;</span>
<a id="__codelineno-8-73" name="__codelineno-8-73" href="#on-premises-5-__codelineno-8-73"></a><span class="s">                            - &quot;12&quot;</span>
<a id="__codelineno-8-74" name="__codelineno-8-74" href="#on-premises-5-__codelineno-8-74"></a><span class="s">                        deviceLabelFields:           </span>
<a id="__codelineno-8-75" name="__codelineno-8-75" href="#on-premises-5-__codelineno-8-75"></a><span class="s">                            - &quot;class&quot;</span>
<a id="__codelineno-8-76" name="__codelineno-8-76" href="#on-premises-5-__codelineno-8-76"></a><span class="s">                            - &quot;vendor&quot;</span>
<a id="__codelineno-8-77" name="__codelineno-8-77" href="#on-premises-5-__codelineno-8-77"></a><span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="16">
<li>
<p>As before, check on the <strong>status</strong> of the OpenShift pods with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#on-premises-5-__codelineno-9-1"></a>oc get pods -n openshift-nfd
</code></pre></div>
<div class="admonition warning">
<p>This operation will take approximately <strong>1 minutes</strong> to complete. Wait until all pods return a status of <code>Running</code> before continuing to Step 17.</p>
</div>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-5.16.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.16.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-5-iv-install-the-nvidia-gpu-operator"><strong>iv. Install the NVIDIA GPU Operator</strong></h2>
<div class="admonition note">
<p>The following section is based off a selection of the complete NVIDIA Corporation documentation for <a href="https://docs.nvidia.com/datacenter/cloud-native/openshift/24.9.1/install-gpu-ocp.html" target="_blank"><strong>Installing the NVIDIA GPU Operator on OpenShift</strong></a>.</p>
</div>
<hr />
<ol start="17">
<li>
<p><strong>Create</strong> the <code>nvidia-gpu-operator</code> namespace by executing the following code block with a Terminal console:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#on-premises-5-__codelineno-10-1"></a>oc apply -f - <span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#on-premises-5-__codelineno-10-2"></a><span class="s">apiVersion: v1</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#on-premises-5-__codelineno-10-3"></a><span class="s">kind: Namespace</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#on-premises-5-__codelineno-10-4"></a><span class="s">metadata:</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#on-premises-5-__codelineno-10-5"></a><span class="s">    name: nvidia-gpu-operator</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#on-premises-5-__codelineno-10-6"></a><span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="18">
<li>
<p>Define the <strong>OperatorGroup</strong> within the same namespace:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#on-premises-5-__codelineno-11-1"></a>oc apply -f - <span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#on-premises-5-__codelineno-11-2"></a><span class="s">apiVersion: operators.coreos.com/v1</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#on-premises-5-__codelineno-11-3"></a><span class="s">kind: OperatorGroup</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#on-premises-5-__codelineno-11-4"></a><span class="s">metadata:</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#on-premises-5-__codelineno-11-5"></a><span class="s">    name: nvidia-gpu-operator-group</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#on-premises-5-__codelineno-11-6"></a><span class="s">    namespace: nvidia-gpu-operator</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#on-premises-5-__codelineno-11-7"></a><span class="s">spec:</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#on-premises-5-__codelineno-11-8"></a><span class="s">    targetNamespaces:</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#on-premises-5-__codelineno-11-9"></a><span class="s">    - nvidia-gpu-operator</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#on-premises-5-__codelineno-11-10"></a><span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="19">
<li>
<p><strong>Execute</strong> the following code block within a Terminal console to get the channel version (required for Step 20), as well as create the <code>gpu-operator-certified</code> Operator within the <code>nvidia-gpu-operator</code> namespace:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#on-premises-5-__codelineno-12-1"></a><span class="nb">export</span> <span class="nv">CHANNEL</span><span class="o">=</span><span class="k">$(</span> oc get packagemanifest gpu-operator-certified -n openshift-marketplace -o <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.status.defaultChannel}&#39;</span> <span class="p">;</span> <span class="nb">echo</span><span class="k">)</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#on-premises-5-__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#on-premises-5-__codelineno-12-3"></a><span class="nb">export</span> <span class="nv">CURRENT_CSV</span><span class="o">=</span><span class="k">$(</span> oc get packagemanifests/gpu-operator-certified -n openshift-marketplace -ojson <span class="p">|</span> jq -r <span class="s1">&#39;.status.channels[] | select(.name == &quot;&#39;</span><span class="nv">$CHANNEL</span><span class="s1">&#39;&quot;) | .currentCSV&#39;</span> <span class="p">;</span> <span class="nb">echo</span><span class="k">)</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#on-premises-5-__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#on-premises-5-__codelineno-12-5"></a>oc apply -f - <span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#on-premises-5-__codelineno-12-6"></a><span class="s">apiVersion: operators.coreos.com/v1alpha1</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#on-premises-5-__codelineno-12-7"></a><span class="s">kind: Subscription</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#on-premises-5-__codelineno-12-8"></a><span class="s">metadata:</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#on-premises-5-__codelineno-12-9"></a><span class="s">    name: gpu-operator-certified</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#on-premises-5-__codelineno-12-10"></a><span class="s">    namespace: nvidia-gpu-operator</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#on-premises-5-__codelineno-12-11"></a><span class="s">spec:</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#on-premises-5-__codelineno-12-12"></a><span class="s">    channel: &quot;${CHANNEL}&quot;</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#on-premises-5-__codelineno-12-13"></a><span class="s">    installPlanApproval: Manual</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#on-premises-5-__codelineno-12-14"></a><span class="s">    name: gpu-operator-certified</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#on-premises-5-__codelineno-12-15"></a><span class="s">    source: certified-operators</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#on-premises-5-__codelineno-12-16"></a><span class="s">    sourceNamespace: openshift-marketplace</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#on-premises-5-__codelineno-12-17"></a><span class="s">    startingCSV: &quot;${CURRENT_CSV}&quot;</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#on-premises-5-__codelineno-12-18"></a><span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="20">
<li>
<p><strong>Execute</strong> the following command to verify the status of the install plan:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#on-premises-5-__codelineno-13-1"></a>oc get installplan -n nvidia-gpu-operator
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">No resources found in nvidia-gpu-operator namespace.</p>
<p><strong>Troubleshooting:</strong> The <code>nvidia-gpu-operator</code> namespace is still being deployed. Wait for 1 minute and then try executing Step 20 again.</p>
</div>
<p></br>
The console will return a statement that Operator's <em>APPROVAL</em> status is currently set to <code>Manual</code> and incomplete (<em>APPROVED</em> state is set to <code>false</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#on-premises-5-__codelineno-14-1"></a>NAME            CSV                              APPROVAL   APPROVED
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#on-premises-5-__codelineno-14-2"></a>install-4rq4j   gpu-operator-certified.v24.9.2   Manual     <span class="nb">false</span>
</code></pre></div>
<p></br>
Therefore, you will need to approve the install plan by <strong>executing</strong> the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#on-premises-5-__codelineno-15-1"></a><span class="nb">export</span> <span class="nv">INSTALL_PLAN</span><span class="o">=</span><span class="k">$(</span>oc get installplan -n nvidia-gpu-operator -oname<span class="k">)</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#on-premises-5-__codelineno-15-2"></a>oc patch <span class="nv">$INSTALL_PLAN</span> -n nvidia-gpu-operator --type merge --patch <span class="s1">&#39;{&quot;spec&quot;:{&quot;approved&quot;:true }}&#39;</span>
</code></pre></div>
<p><a class="glightbox" href="../on-premises/_attachments/onprem-5.20a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.20a.png" /></a></p>
<p></br>
Return to the OCP Dashboard and drill down into <strong>Operators</strong> &gt; <strong>Installed Operators</strong> to monitor the progress of the update. Wait until the <code>NVIDIA GPU Operator</code><sup>[A]</sup> appears in the table with <em>Status</em> set to <code>Succeeded</code> before continuing.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.20b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.20b.png" /></a></p>
</li>
</ol>
<hr />
<ol start="21">
<li>
<p>Create a <strong>ClusterPolicy</strong> by executing the following instructions:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#on-premises-5-__codelineno-16-1"></a>oc get csv -n nvidia-gpu-operator <span class="si">${</span><span class="nv">CURRENT_CSV</span><span class="si">}</span> -ojsonpath<span class="o">={</span>.metadata.annotations.alm-examples<span class="o">}</span> <span class="p">|</span> jq .<span class="o">[</span><span class="m">0</span><span class="o">]</span> &gt; clusterpolicy.json
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#on-premises-5-__codelineno-16-2"></a>oc apply -f clusterpolicy.json
</code></pre></div>
</li>
</ol>
<hr />
<ol start="22">
<li>
<p>Check the status of the pods. If GPUs are detected within the cluster, they will be included in the read-out. As the Level 4 demonstration environment is not equipped with GPU hardware, no GPU resources will be discovered by the <code>oc get</code> command.</p>
<p><strong>Execute</strong> the following command with the Terminal console:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#on-premises-5-__codelineno-17-1"></a>oc get pods -n nvidia-gpu-operator
</code></pre></div>
</li>
</ol>
<hr />
<div class="admonition tip">
<p class="admonition-title">NOTE TO THE AUTHOR</p>
<p><strong> THIS WILL BE THE SECTION YOU WILL NEED TO FILL OUT WITH A DEDICATED CLUSTER WITH GPU ACCESS, PURELY FOR DEMONSTRATION PURPOSES. REFER TO 00:21:00 TIMESTAMP IN THE RECORDING.</strong></p>
</div>
<hr />
<h2 id="on-premises-5-v-install-red-hat-openshift-ai"><strong>v. Install Red Hat OpenShift AI</strong></h2>
<div class="admonition note">
<p>The following steps are extracted from the complete documentation available from IBM Documentation for <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=software-installing-red-hat-openshift-ai" target="_blank"><strong>Installing Red Hat OpenShift AI</strong></a>.</p>
</div>
<p>IBM watsonx Code Assistant (on-premises) requires installation and configuration of <strong>Red Hat OpenShift AI</strong> on the OCP cluster. In the following section, you will:</p>
<ul>
<li>Install the Operator for Red Hat OpenShift AI (v2.13)</li>
<li>Create a <em>DSCInitialization</em> instance</li>
<li>Create a <em>DataScienceCluster</em> instance</li>
<li>Edit the model inferencing configuration</li>
</ul>
<hr />
<ol start="23">
<li>
<p>Create the <code>redhat-ods-operator</code> <strong>Project</strong> on the OCP cluster with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#on-premises-5-__codelineno-18-1"></a>oc new-project redhat-ods-operator
</code></pre></div>
</li>
</ol>
<hr />
<ol start="24">
<li>
<p>Define the <code>rhods-operator</code> <strong>Operator Group</strong> within the project defined in Step 23:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#on-premises-5-__codelineno-19-1"></a>cat <span class="s">&lt;&lt;EOF |oc apply -f -</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#on-premises-5-__codelineno-19-2"></a><span class="s">apiVersion: operators.coreos.com/v1</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#on-premises-5-__codelineno-19-3"></a><span class="s">kind: OperatorGroup</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#on-premises-5-__codelineno-19-4"></a><span class="s">metadata:</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#on-premises-5-__codelineno-19-5"></a><span class="s">    name: rhods-operator</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#on-premises-5-__codelineno-19-6"></a><span class="s">    namespace: redhat-ods-operator</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#on-premises-5-__codelineno-19-7"></a><span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="25">
<li>
<p>Create the <strong>Operator Subscription</strong> for <code>rhods-operator</code> within the same project:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#on-premises-5-__codelineno-20-1"></a>cat <span class="s">&lt;&lt;EOF |oc apply -f -</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#on-premises-5-__codelineno-20-2"></a><span class="s">apiVersion: operators.coreos.com/v1alpha1</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#on-premises-5-__codelineno-20-3"></a><span class="s">kind: Subscription</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#on-premises-5-__codelineno-20-4"></a><span class="s">metadata:</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#on-premises-5-__codelineno-20-5"></a><span class="s">    name: rhods-operator</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#on-premises-5-__codelineno-20-6"></a><span class="s">    namespace: redhat-ods-operator</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#on-premises-5-__codelineno-20-7"></a><span class="s">spec:</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#on-premises-5-__codelineno-20-8"></a><span class="s">    name: rhods-operator</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#on-premises-5-__codelineno-20-9"></a><span class="s">    channel: stable-2.13</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#on-premises-5-__codelineno-20-10"></a><span class="s">    source: redhat-operators</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#on-premises-5-__codelineno-20-11"></a><span class="s">    sourceNamespace: openshift-marketplace</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#on-premises-5-__codelineno-20-12"></a><span class="s">    config:</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#on-premises-5-__codelineno-20-13"></a><span class="s">        env:</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#on-premises-5-__codelineno-20-14"></a><span class="s">            - name: &quot;DISABLE_DSC_CONFIG&quot;</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#on-premises-5-__codelineno-20-15"></a><span class="s">EOF</span>
</code></pre></div>
<div class="admonition warning">
<p>This operation will take approximately <strong>5 minutes</strong> to complete. Return to the OCP Dashboard and drill down into <strong>Operators</strong> &gt; <strong>Installed Operators</strong> to monitor the progress of the <em>Red Hat OpenShift AI</em><sup>[A]</sup> Operator deployment.</p>
</div>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.25.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.25.png" /></a></p>
</li>
</ol>
<hr />
<ol start="26">
<li>
<p>Create a <strong>DSCInitialization</strong> object <code>default-dsci</code> in <code>redhat-ods-monitoring</code> project:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#on-premises-5-__codelineno-21-1"></a>cat <span class="s">&lt;&lt;EOF |oc apply -f -</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#on-premises-5-__codelineno-21-2"></a><span class="s">apiVersion: dscinitialization.opendatahub.io/v1</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#on-premises-5-__codelineno-21-3"></a><span class="s">kind: DSCInitialization</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#on-premises-5-__codelineno-21-4"></a><span class="s">metadata:</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#on-premises-5-__codelineno-21-5"></a><span class="s">    name: default-dsci</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#on-premises-5-__codelineno-21-6"></a><span class="s">spec:</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#on-premises-5-__codelineno-21-7"></a><span class="s">    applicationsNamespace: redhat-ods-applications</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#on-premises-5-__codelineno-21-8"></a><span class="s">    monitoring:</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#on-premises-5-__codelineno-21-9"></a><span class="s">        managementState: Managed</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#on-premises-5-__codelineno-21-10"></a><span class="s">        namespace: redhat-ods-monitoring</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#on-premises-5-__codelineno-21-11"></a><span class="s">    serviceMesh:</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#on-premises-5-__codelineno-21-12"></a><span class="s">        managementState: Removed</span>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#on-premises-5-__codelineno-21-13"></a><span class="s">    trustedCABundle:</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#on-premises-5-__codelineno-21-14"></a><span class="s">        managementState: Managed</span>
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#on-premises-5-__codelineno-21-15"></a><span class="s">        customCABundle: &quot;&quot;</span>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#on-premises-5-__codelineno-21-16"></a><span class="s">EOF</span>
</code></pre></div>
<p></br>
<strong>Monitor</strong> the progress of the <em>DSCInitialization</em> object by executing the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#on-premises-5-__codelineno-22-1"></a>oc get dscinitialization
</code></pre></div>
<div class="admonition warning">
<p>This operation will take approximately <strong>2 minutes</strong> to complete. <strong>Wait</strong> for the <em>DSCInitialization</em> object (<code>dscinitialization</code>) to return a <code>Ready</code> status before continuing on to Step 27.</p>
</div>
</li>
</ol>
<hr />
<ol start="27">
<li>
<p>Create a <strong>DataScienceCluster</strong> object named <code>default-dsc</code> within the same project:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#on-premises-5-__codelineno-23-1"></a>cat <span class="s">&lt;&lt;EOF |oc apply -f -</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#on-premises-5-__codelineno-23-2"></a><span class="s">apiVersion: datasciencecluster.opendatahub.io/v1</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#on-premises-5-__codelineno-23-3"></a><span class="s">kind: DataScienceCluster</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#on-premises-5-__codelineno-23-4"></a><span class="s">metadata:</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#on-premises-5-__codelineno-23-5"></a><span class="s">    name: default-dsc</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#on-premises-5-__codelineno-23-6"></a><span class="s">spec:</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#on-premises-5-__codelineno-23-7"></a><span class="s">    components:</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#on-premises-5-__codelineno-23-8"></a><span class="s">        codeflare:</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#on-premises-5-__codelineno-23-9"></a><span class="s">            managementState: Removed</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#on-premises-5-__codelineno-23-10"></a><span class="s">        dashboard:</span>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#on-premises-5-__codelineno-23-11"></a><span class="s">            managementState: Removed</span>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#on-premises-5-__codelineno-23-12"></a><span class="s">        datasciencepipelines:</span>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#on-premises-5-__codelineno-23-13"></a><span class="s">            managementState: Removed</span>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#on-premises-5-__codelineno-23-14"></a><span class="s">        kserve:</span>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#on-premises-5-__codelineno-23-15"></a><span class="s">            managementState: Managed</span>
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#on-premises-5-__codelineno-23-16"></a><span class="s">            defaultDeploymentMode: RawDeployment</span>
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#on-premises-5-__codelineno-23-17"></a><span class="s">            serving:</span>
<a id="__codelineno-23-18" name="__codelineno-23-18" href="#on-premises-5-__codelineno-23-18"></a><span class="s">                managementState: Removed</span>
<a id="__codelineno-23-19" name="__codelineno-23-19" href="#on-premises-5-__codelineno-23-19"></a><span class="s">                name: knative-serving</span>
<a id="__codelineno-23-20" name="__codelineno-23-20" href="#on-premises-5-__codelineno-23-20"></a><span class="s">        kueue:</span>
<a id="__codelineno-23-21" name="__codelineno-23-21" href="#on-premises-5-__codelineno-23-21"></a><span class="s">            managementState: Removed</span>
<a id="__codelineno-23-22" name="__codelineno-23-22" href="#on-premises-5-__codelineno-23-22"></a><span class="s">        modelmeshserving:</span>
<a id="__codelineno-23-23" name="__codelineno-23-23" href="#on-premises-5-__codelineno-23-23"></a><span class="s">            managementState: Removed</span>
<a id="__codelineno-23-24" name="__codelineno-23-24" href="#on-premises-5-__codelineno-23-24"></a><span class="s">        ray:</span>
<a id="__codelineno-23-25" name="__codelineno-23-25" href="#on-premises-5-__codelineno-23-25"></a><span class="s">            managementState: Removed</span>
<a id="__codelineno-23-26" name="__codelineno-23-26" href="#on-premises-5-__codelineno-23-26"></a><span class="s">        trainingoperator:</span>
<a id="__codelineno-23-27" name="__codelineno-23-27" href="#on-premises-5-__codelineno-23-27"></a><span class="s">            managementState: Managed</span>
<a id="__codelineno-23-28" name="__codelineno-23-28" href="#on-premises-5-__codelineno-23-28"></a><span class="s">        trustyai:</span>
<a id="__codelineno-23-29" name="__codelineno-23-29" href="#on-premises-5-__codelineno-23-29"></a><span class="s">            managementState: Removed</span>
<a id="__codelineno-23-30" name="__codelineno-23-30" href="#on-premises-5-__codelineno-23-30"></a><span class="s">        workbenches:</span>
<a id="__codelineno-23-31" name="__codelineno-23-31" href="#on-premises-5-__codelineno-23-31"></a><span class="s">            managementState: Removed</span>
<a id="__codelineno-23-32" name="__codelineno-23-32" href="#on-premises-5-__codelineno-23-32"></a><span class="s">EOF</span>
</code></pre></div>
<p></br>
The <em>Red Hat OpenShift AI Operator</em> automatically installs and manages services that are listed as <code>Managed</code>. Services with a status of <code>Removed</code> are ignored and will not be installed.</p>
<div class="admonition warning">
<p>This operation will take approximately <strong>2-3 minutes</strong> to complete.</p>
</div>
</li>
</ol>
<hr />
<ol start="28">
<li>
<p><strong>Execute</strong> the following instruction to check the status of pods within the <code>redhat-ods-applications</code> project:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#on-premises-5-__codelineno-24-1"></a>oc get pods -n redhat-ods-applications
</code></pre></div>
<div class="admonition warning">
<p>If no pods are detected, wait an additional <strong>3 minutes</strong> and try again. Confirm that <strong>ALL FIVE</strong> of the following pods are deployed with a <code>Running</code> status before continuing to Step 29.
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#on-premises-5-__codelineno-25-1"></a>NAME                                          READY   STATUS    RESTARTS   AGE
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#on-premises-5-__codelineno-25-2"></a>kserve-controller-manager-7b745757cb-wx7qc    <span class="m">1</span>/1     Running   <span class="m">0</span>          42s
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#on-premises-5-__codelineno-25-3"></a>kubeflow-training-operator-659b5dcb99-5t8vt   <span class="m">1</span>/1     Running   <span class="m">0</span>          56s
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#on-premises-5-__codelineno-25-4"></a>odh-model-controller-b774fb859-2b4b4          <span class="m">1</span>/1     Running   <span class="m">0</span>          117s
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#on-premises-5-__codelineno-25-5"></a>odh-model-controller-b774fb859-4gxhv          <span class="m">1</span>/1     Running   <span class="m">0</span>          117s
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#on-premises-5-__codelineno-25-6"></a>odh-model-controller-b774fb859-fpnrl          <span class="m">1</span>/1     Running   <span class="m">0</span>          117s
</code></pre></div></p>
</div>
</li>
</ol>
<hr />
<ol start="29">
<li>
<p>Edit the <code>inferenceservice-config</code> configuration map within the <code>redhat-ods-applications</code> project. This is best achieved by using the OCP Dashboard via a web browser.</p>
<ul>
<li>From the OCP Dashboard, navigate into <strong>Workloads</strong> &gt; <strong>Configmaps</strong><sup>[A]</sup></li>
<li>From the <em>Project</em><sup>[B]</sup> drop-down list, select <code>redhat-ods-applications</code><sup>[C]</sup></li>
<li>Click the <code>inferenceservice-config</code> resource<sup>[D]</sup> and open the <strong>YAML</strong> tab<sup>[E]</sup></li>
<li>In the <code>metadata.annotations</code> section<sup>[F]</sup> (Lines 4-5) of the file, add a new Line 8<sup>[G]</sup> which reads <code>opendatahub.io/managed: 'false'</code> </li>
<li>The resulting YAML file should resemble the following:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#on-premises-5-__codelineno-26-1"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#on-premises-5-__codelineno-26-2"></a><span class="nt">annotations</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#on-premises-5-__codelineno-26-3"></a><span class="w">    </span><span class="nt">internal.config.kubernetes.io/previousKinds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span><span class="w"></span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#on-premises-5-__codelineno-26-4"></a><span class="w">    </span><span class="nt">internal.config.kubernetes.io/previousNames</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inferenceservice-config</span><span class="w"></span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#on-premises-5-__codelineno-26-5"></a><span class="w">    </span><span class="nt">internal.config.kubernetes.io/previousNamespaces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">opendatahub</span><span class="w"></span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#on-premises-5-__codelineno-26-6"></a><span class="hll"><span class="w">    </span><span class="nt">opendatahub.io/managed</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;false&#39;</span><span class="w"></span>
</span></code></pre></div>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.29a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.29a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.29b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.29b.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.29c.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.29c.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.29d.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.29d.png" /></a></p>
</li>
</ol>
<hr />
<ol start="30">
<li>
<p>Within the same YAML file, look for Line 379 under the <em>ingress</em> section<sup>[A]</sup>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#on-premises-5-__codelineno-27-1"></a><span class="s">&quot;domainTemplate&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">.Name</span><span class="nv"> </span><span class="s">}-{</span><span class="nv"> </span><span class="s">.Namespace</span><span class="nv"> </span><span class="s">}.{</span><span class="nv"> </span><span class="s">.IngressDomain</span><span class="nv"> </span><span class="s">}&quot;</span><span class="err">,</span><span class="w"></span>
</code></pre></div>
<p><strong>Replace</strong> Line 379 with the following (be sure to include the last <code>,</code> character)<sup>[B]</sup>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#on-premises-5-__codelineno-28-1"></a><span class="s">&quot;domainTemplate&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;example.com&quot;</span><span class="err">,</span><span class="w"></span>
</code></pre></div>
<p>Click <strong>Save</strong><sup>[C]</sup> (bottom-left) to finalize the changes to the YAML file. If prompted with a <em>Managed resource</em> warning, click <strong>Save</strong><sup>[D]</sup> again to confirm.</p>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.30a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.30a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.30b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.30b.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-5.30c.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-5.30c.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="on-premises-5-vi-next-steps"><strong>vi. Next steps</strong></h2>
<p>At this stage, all of the necessary prerequisites have been installed and you are ready to begin installation of an IBM Software Hub instance on the OCP cluster.</p>
<details class="note">
<summary>TROUBLESHOOTING: LOGGING IN AND SESSION TIMEOUTS</summary>
<p>Be aware that SSH connections made over Terminal will time out after a long period of inactivity or due to a connection error. If you need to log back into the bastion terminal, follow the procedure below. Replace the <code>&lt;BASTION_PWD&gt;</code> placeholder with the password specific to <em>your</em> environment.</p>
<ol>
<li>
<p>Log back into the bastion node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#on-premises-5-__codelineno-29-1"></a>ssh itzuser@api.67828ca5e432cac47ccc4230.ocp.techzone.ibm.com -p <span class="m">40222</span> &lt;BASTION_PWD&gt;
</code></pre></div>
</li>
<li>
<p>Engage the <code>sudo</code> (privileged access) session:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#on-premises-5-__codelineno-30-1"></a>sudo bash
</code></pre></div>
</li>
<li>
<p>Source the environment variables stored in <code>cpd_vars.sh</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#on-premises-5-__codelineno-31-1"></a><span class="nb">source</span> cpd_vars.sh
</code></pre></div>
</li>
<li>
<p>Log back into OpenShift:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#on-premises-5-__codelineno-32-1"></a><span class="si">${</span><span class="nv">OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
<li>
<p>Log back into <code>cpd-cli</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#on-premises-5-__codelineno-33-1"></a><span class="si">${</span><span class="nv">CPDM_OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
</ol>
</details></section><section class="print-page" id="on-premises-6"><h1 id="on-premises-6-install-ibm-software-hubon-premises-installation-and-deployment"><strong>Install IBM Software Hub</strong></br><em>On-Premises Installation and Deployment</em></h1>
<div class="admonition quote">
<p>The following section is based off of IBM Documentation for <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=installing-preparing-install-instance-software-hub" target="_blank"><strong>Preparing to install an instance of IBM Software Hub</strong></a>.</p>
</div>
<h2 id="on-premises-6-i-install-shared-components"><strong>i. Install shared components</strong></h2>
<p>Before an instance of IBM Software Hub can be installed, you need to install a set of shared services on the OpenShift Container Platform (OCP) cluster: a <strong>license service</strong> and a <strong>scheduler</strong>.</p>
<hr />
<ol>
<li>
<p>Three environment variables were "set" earlier in this lab, which are pertinent now to the license service (as well as the scheduler) that IBM Software Hub requires. These include:</p>
<ul>
<li><code>$PROJECT_LICENSE_SERVICE</code></li>
<li><code>$PROJECT_SCHEDULING_SERVICE</code></li>
<li><code>$VERSION</code></li>
</ul>
<p>Refresh yourself on these variable's values by <strong>executing</strong> the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#on-premises-6-__codelineno-0-1"></a><span class="nb">echo</span> <span class="nv">$PROJECT_LICENSE_SERVICE</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#on-premises-6-__codelineno-0-2"></a><span class="nb">echo</span> <span class="nv">$PROJECT_SCHEDULING_SERVICE</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#on-premises-6-__codelineno-0-3"></a><span class="nb">echo</span> <span class="nv">$VERSION</span>
</code></pre></div>
<p>These variables were defined within the <strong>Cloud Pak for Data (CP4D) Environment Variable</strong> (<a href="https://ibm.github.io/wca-l4/on-premises/3/#iv-environment-variables" target="_blank"><strong>Step 8 of Module 3</strong></a>) on Lines 35, 36, and 53, respectively.</p>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>Install the <strong>license service</strong> components by executing the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#on-premises-6-__codelineno-1-1"></a>cpd-cli manage apply-cluster-components <span class="se">\</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#on-premises-6-__codelineno-1-2"></a>--release<span class="o">=</span><span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#on-premises-6-__codelineno-1-3"></a>--license_acceptance<span class="o">=</span><span class="nb">true</span> --licensing_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_LICENSE_SERVICE</span><span class="si">}</span>
</code></pre></div>
<div class="admonition warning">
<p>This operation will take approximately <strong>10 minutes</strong> to complete. After a successful operation, the console will return the following statements:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#on-premises-6-__codelineno-2-1"></a><span class="o">[</span>✔<span class="o">]</span> Cert manager is ready.
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#on-premises-6-__codelineno-2-2"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T18:58:58.400864Z You may find output and logs <span class="k">in</span> the /home/itzuser/cpd-cli-workspace/olm-utils-workspace/work directory.
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#on-premises-6-__codelineno-2-3"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T18:58:58.400949Z The apply-cluster-components <span class="nb">command</span> ran successfully.
</code></pre></div></p>
</div>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>Install the <strong>scheduling service</strong> by executing the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#on-premises-6-__codelineno-3-1"></a>cpd-cli manage apply-scheduler <span class="se">\</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#on-premises-6-__codelineno-3-2"></a>--release<span class="o">=</span><span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#on-premises-6-__codelineno-3-3"></a>--license_acceptance<span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#on-premises-6-__codelineno-3-4"></a>--scheduler_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_SCHEDULING_SERVICE</span><span class="si">}</span>
</code></pre></div>
<div class="admonition warning">
<p>This operation will take approximately <strong>10 minutes</strong> to complete. After a successful operation, the console will return the following statements:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#on-premises-6-__codelineno-4-1"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T19:14:17.855196Z You may find output and logs <span class="k">in</span> the /home/itzuser/cpd-cli-workspace/olm-utils-workspace/work directory.
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#on-premises-6-__codelineno-4-2"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T19:14:17.855280Z The apply-scheduler <span class="nb">command</span> ran successfully.
</code></pre></div></p>
</div>
</li>
</ol>
<hr />
<h2 id="on-premises-6-ii-install-an-instance-of-ibm-software-hub"><strong>ii. Install an instance of IBM Software Hub</strong></h2>
<p>Finally, the cluster has been prepared to a state where it is ready to install an instance of IBM Software Hub. Although the following section requires relatively few inputs from the participant, it will take approximately 45 minutes for the installation process to complete.</p>
<hr />
<ol start="4">
<li>
<p>Create the two new projects that will host your instance by <strong>executing</strong> the following instructions within a Terminal console:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#on-premises-6-__codelineno-5-1"></a>oc new-project <span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERATORS</span><span class="si">}</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#on-premises-6-__codelineno-5-2"></a>oc new-project <span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERANDS</span><span class="si">}</span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p><strong>Apply</strong> the required permissions for an instance of IBM Software Hub:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#on-premises-6-__codelineno-6-1"></a>cpd-cli manage authorize-instance-topology <span class="se">\</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#on-premises-6-__codelineno-6-2"></a>--cpd_operator_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERATORS</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#on-premises-6-__codelineno-6-3"></a>--cpd_instance_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERANDS</span><span class="si">}</span>
</code></pre></div>
<div class="admonition warning">
<p>This operation will take approximately <strong>2 minutes</strong> to complete. After a successful operation, the console will return the following statements:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#on-premises-6-__codelineno-7-1"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T19:17:06.452627Z You may find output and logs <span class="k">in</span> the /home/itzuser/cpd-cli-workspace/olm-utils-workspace/work directory.
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#on-premises-6-__codelineno-7-2"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T19:17:06.453087Z The authorize-instance-topology <span class="nb">command</span> ran successfully.
</code></pre></div></p>
</div>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>Create the instance by <strong>executing</strong> the following code block:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#on-premises-6-__codelineno-8-1"></a>cpd-cli manage setup-instance <span class="se">\</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#on-premises-6-__codelineno-8-2"></a>--release<span class="o">=</span><span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#on-premises-6-__codelineno-8-3"></a>--license_acceptance<span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#on-premises-6-__codelineno-8-4"></a>--cpd_operator_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERATORS</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#on-premises-6-__codelineno-8-5"></a>--cpd_instance_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERANDS</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#on-premises-6-__codelineno-8-6"></a>--block_storage_class<span class="o">=</span><span class="si">${</span><span class="nv">STG_CLASS_BLOCK</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#on-premises-6-__codelineno-8-7"></a>--file_storage_class<span class="o">=</span><span class="si">${</span><span class="nv">STG_CLASS_FILE</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#on-premises-6-__codelineno-8-8"></a>--run_storage_tests<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<div class="admonition warning">
<p>This operation will take approximately <strong>45 minutes</strong> to complete, after which the console will return:
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#on-premises-6-__codelineno-9-1"></a><span class="o">[</span>SUCCESS<span class="o">]</span> The cpd management server was successfully created <span class="k">in</span> the cpd-watsonx project
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#on-premises-6-__codelineno-9-2"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-18T00:09:51.194282Z You may find output and logs <span class="k">in</span> the /home/itzuser/cpd-cli-workspace/olm-utils-workspace/work directory.
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#on-premises-6-__codelineno-9-3"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-18T00:09:51.194342Z The setup-instance <span class="nb">command</span> ran successfully.
</code></pre></div></p>
</div>
</li>
</ol>
<hr />
<h2 id="on-premises-6-iii-next-steps"><strong>iii. Next steps</strong></h2>
<p>With IBM Software Hub now successfully deployed on the OCP cluster, the environment is primed for the installation of IBM watsonx Code Assistant.</p>
<details class="note">
<summary>TROUBLESHOOTING: LOGGING IN AND SESSION TIMEOUTS</summary>
<p>Be aware that SSH connections made over Terminal will time out after a long period of inactivity or due to a connection error. If you need to log back into the bastion terminal, follow the procedure below. Replace the <code>&lt;BASTION_PWD&gt;</code> placeholder with the password specific to <em>your</em> environment.</p>
<ol>
<li>
<p>Log back into the bastion node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#on-premises-6-__codelineno-10-1"></a>ssh itzuser@api.67828ca5e432cac47ccc4230.ocp.techzone.ibm.com -p <span class="m">40222</span> &lt;BASTION_PWD&gt;
</code></pre></div>
</li>
<li>
<p>Engage the <code>sudo</code> (privileged access) session:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#on-premises-6-__codelineno-11-1"></a>sudo bash
</code></pre></div>
</li>
<li>
<p>Source the environment variables stored in <code>cpd_vars.sh</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#on-premises-6-__codelineno-12-1"></a><span class="nb">source</span> cpd_vars.sh
</code></pre></div>
</li>
<li>
<p>Log back into OpenShift:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#on-premises-6-__codelineno-13-1"></a><span class="si">${</span><span class="nv">OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
<li>
<p>Log back into <code>cpd-cli</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#on-premises-6-__codelineno-14-1"></a><span class="si">${</span><span class="nv">CPDM_OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
</ol>
</details></section><section class="print-page" id="on-premises-7"><h1 id="on-premises-7-install-ibm-watsonx-code-assistanton-premises-installation-and-deployment"><strong>Install IBM watsonx Code Assistant</strong></br><em>On-Premises Installation and Deployment</em></h1>
<div class="admonition quote">
<p>The following section is based off of IBM Documentation for <a href="https://www.ibm.com/docs/en/software-hub/5.1.x?topic=wca-installing" target="_blank"><strong>Installing watsonx Code Assistant v5.1.x</strong></a>.</p>
</div>
<h2 id="on-premises-7-i-user-responsibilities"><strong>i. User responsibilities</strong></h2>
<p>Following the release of Software Hub <code>v5.x</code>, watsonx Code Assistant (WCA) administrators need to only specify the <code>watsonx-code-assistant</code> component in order for the Software Hub to automatically fetch the required dependencies.</p>
<hr />
<p>To install WCA on-premises, you must be an <em>instance administrator</em> with permissions to install software in the following Red Hat OpenShift projects:</p>
<ul>
<li>
<p><strong>The <em>operators project</em> for the instance:</strong> Operators for this instance of WCA are installed in the <code>operators</code> project. In the installation commands, the <code>${PROJECT_CPD_INST_OPERATORS}</code> environment variable refers to the operators project.</p>
</li>
<li>
<p><strong>The <em>operands project</em> for the instance:</strong> The custom resources for the control plane and WCA are installed in the operands project. In the installation commands, the <code>${PROJECT_CPD_INST_OPERANDS}</code> environment variable refers to the operands project.</p>
</li>
</ul>
<h2 id="on-premises-7-ii-system-requirements"><strong>ii. System requirements</strong></h2>
<p>Participants are encouraged to review the following requirements again before continuing with the install to verify that all the components are in place <em>and</em> to reinforce their understanding as to why such components are needed.</p>
<hr />
<p><strong>IBM SOFTWARE HUB VERSIONING</strong>
</br>
All of the components that are associated with an instance of IBM Software Hub must be installed at the same release version. For example, if the IBM Software Hub control plane is installed at <code>Version 5.1.0</code>, you must install WCA at <code>Version 5.1.0</code> as well.</p>
<p></br>
<strong>ENVIRONMENT VARIABLES</strong>
</br>
The commands in this task use environment variables so that you can run the commands exactly as written. In the case of this lab, those variables are defined within the <code>cpd_vars.sh</code> manifest that was created in Module 3.</p>
<ul>
<li>
<p>If you want to read more about how to structure scripts like <code>cpd_vars.sh</code>, which define environment variables within a single source of truth, <a href="https://www.ibm.com/docs/en/SSNFH6_5.1.x/hub/install/collect-info-install-variables.html" target="_blank"><strong>review the IBM Documentation</strong></a>.</p>
</li>
<li>
<p>To use the environment variables from the script, you must source the environment variables before you run the commands in this task. For example, run:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#on-premises-7-__codelineno-0-1"></a><span class="nb">source</span> ./cpd_vars.sh
</code></pre></div></p>
</li>
</ul>
<p><strong>SECURITY CONTEXT CONSTRAINT</strong>
</br>
WCA works with the default Red Hat OpenShift® Container Platform security context constraint, <code>restricted-v2</code>.</p>
<p></br>
<strong>COMMON CORE SERVICES</strong>
</br>
WCA requires the availability of IBM Software Hub common core services. If the common core services are not installed in the <em>operands</em> project for the instance, the common core services are automatically installed when you install WCA. The common core services installation increases the amount of time the installation takes to complete.</p>
<p></br>
<strong>STORAGE</strong>
</br>
Storage classes must be specified ahead of time when installing WCA. The following storage classes are recommended. However, if you don't use these particular storage classes on future clusters you may deploy, ensure that you specify a storage class with an equivalent definition.</p>
<table>
<thead>
<tr>
<th>Storage</th>
<th>Notes</th>
<th>Storage Classes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>OpenShift Data Foundation</strong></td>
<td>When you install the service, specify file storage and block storage.</td>
<td><strong>File storage:</strong> <code>ocs-storagecluster-cephfs</code></br><strong>Block storage:</strong> <code>ocs-storagecluster-ceph-rbd</code></td>
</tr>
<tr>
<td><strong>IBM Fusion Data Foundation</strong></td>
<td>When you install the service, specify file storage and block storage.</td>
<td><strong>File storage:</strong> <code>ocs-storagecluster-cephfs</code></br><strong>Block storage:</strong> <code>ocs-storagecluster-ceph-rbd</code></td>
</tr>
<tr>
<td><strong>IBM Fusion Global Data Platform</strong></td>
<td>When you install the service, specify the same storage class for both file storage and block storage.</td>
<td><strong>File storage:</strong> <code>ibm-spectrum-scale-sc</code> or <code>ibm-storage-fusion-cp-sc</code></br><strong>Block storage:</strong> <code>ibm-spectrum-scale-sc</code> or <code>ibm-storage-fusion-cp-sc</code></td>
</tr>
<tr>
<td><strong>IBM Storage Scale Container Native</strong></td>
<td>When you install the service, specify the same storage class for both file storage and block storage.</td>
<td><strong>File storage:</strong> <code>ibm-spectrum-scale-sc</code></br><strong>Block storage:</strong> <code>ibm-spectrum-scale-sc</code></td>
</tr>
<tr>
<td><strong>Portworx</strong></td>
<td>When you install the service, the <code>--storage_vendor=portworx</code> option ensures that the service uses the correct storage classes.</td>
<td><strong>File storage:</strong> <code>portworx-shared-gp3</code></br><strong>Block storage:</strong> <code>portworx-elastic-sc</code></td>
</tr>
<tr>
<td><strong>NFS</strong></td>
<td>When you install the service, specify the same storage class for both file storage and block storage.</td>
<td><strong>File storage:</strong> <code>managed-nfs-storage</code></br><strong>Block storage:</strong> <code>managed-nfs-storage</code></td>
</tr>
<tr>
<td><strong>Amazon Elastic storage</strong></td>
<td>When you install the service, specify file storage and block storage. File storage is provided by Amazon Elastic File System. Block storage is provided by Amazon Elastic Block Store.</td>
<td><strong>File storage:</strong> <code>efs-nfs-client</code></br><strong>Block storage:</strong> <code>gp2-csi</code> or <code>gp3-csi</code></td>
</tr>
<tr>
<td><strong>NetApp Trident</strong></td>
<td>When you install the service, specify the same storage class for both file storage and block storage.</td>
<td><strong>File storage:</strong> <code>ontap-nas</code></br><strong>Block storage:</strong> <code>ontap-nas</code></td>
</tr>
<tr>
<td><strong>Nutanix</strong></td>
<td>Not supported.</td>
<td>Not applicable.</td>
</tr>
</tbody>
</table>
<h2 id="on-premises-7-iii-deployment-checklist"><strong>iii. Deployment checklist</strong></h2>
<p>To review, the following tasks need to be completed before installing WCA on-premises. The various modules of this hands-on lab have already covered those applicable to the environment you are about to deploy. However, keep this checklist handy for future deployments you will be making with clients and in the field.</p>
<table>
<thead>
<tr>
<th>Prerequisite</th>
<th>Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td>The cluster meets the minimum requirements for installing WCA.</td>
<td><a href="https://www.ibm.com/docs/en/SSNFH6_5.1.x/sys-reqs/overview-sys-reqs.html" target="_blank"><strong>System requirements</strong></a></td>
</tr>
<tr>
<td>The workstation from which you will run the installation is set up as a client workstation and includes the following command-line interfaces: IBM Software Hub CLI (<code>cpd-cli</code>) and OpenShift CLI (<code>oc</code>)</td>
<td><a href="https://www.ibm.com/docs/en/SSNFH6_5.1.x/hub/install/setup-client.html" target="_blank"><strong>Setting up a client workstation</strong></a></td>
</tr>
<tr>
<td>The IBM Software Hub control plane is installed.</td>
<td><a href="https://www.ibm.com/docs/en/SSNFH6_5.1.x/hub/install/install-platform.html" target="_blank"><strong>Installing an instance of IBM Software Hub</strong></a></td>
</tr>
<tr>
<td>For environments that use a private container registry, such as air-gapped environments, the WCA software images are mirrored to the private container registry.</td>
<td><a href="https://www.ibm.com/docs/en/SSNFH6_5.1.x/hub/install/prep-cluster-mirror.html" target="_blank"><strong>Mirroring images to a private container registry</strong></a></td>
</tr>
<tr>
<td>For environments that use a private container registry, such as air-gapped environments, the <code>cpd-cli</code> is configured to pull the <code>olm-utils-v3</code> image from the private container registry.</td>
<td><a href="https://www.ibm.com/docs/en/SSNFH6_5.1.x/hub/install/prep-cluster-move-cli-get-image.html" target="_blank"><strong>Pulling the olm-utils-v3 image from the private container registry</strong></a></td>
</tr>
<tr>
<td>The operators that are required to use GPUs are installed.</td>
<td><a href="https://www.ibm.com/docs/en/SSNFH6_5.1.x/hub/install/prep-cluster-node-gpu.html" target="_blank"><strong>Installing operators for services that require GPUs</strong></a></td>
</tr>
<tr>
<td>Red Hat OpenShift AI is installed.</td>
<td><a href="https://www.ibm.com/docs/en/SSNFH6_5.1.x/hub/install/prep-cluster-openshift-ai.html" target="_blank"><strong>Installing Red Hat OpenShift AI</strong></a></td>
</tr>
</tbody>
</table>
<h2 id="on-premises-7-iv-fetching-dependencies"><strong>iv. Fetching dependencies</strong></h2>
<p>In the following section, participants will assume the role of an instance administrator and install WCA using the IBM Software Hub components set up in the previous module.</p>
<hr />
<ol>
<li>
<p>Apply the entitlement for WCA by <strong>executing</strong> the following code block:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#on-premises-7-__codelineno-1-1"></a>cpd-cli manage apply-entitlement <span class="se">\</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#on-premises-7-__codelineno-1-2"></a>--cpd_instance_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERANDS</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#on-premises-7-__codelineno-1-3"></a>--entitlement<span class="o">=</span>watsonx-code-assistant <span class="se">\</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#on-premises-7-__codelineno-1-4"></a>--production<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<div class="admonition warning">
<p>Completion of this operation will take approximately <strong>1 minute</strong>, after which the console will return:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#on-premises-7-__codelineno-2-1"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T23:02:06.847686Z You may find output and logs <span class="k">in</span> the /home/itzuser/cpd-cli-workspace/olm-utils-workspace/work directory.
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#on-premises-7-__codelineno-2-2"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T23:02:06.847741Z The apply-entitlement <span class="nb">command</span> ran successfully.
</code></pre></div></p>
</div>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>Now that the components have been defined, install the services Operators by <strong>executing</strong> the following code block:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#on-premises-7-__codelineno-3-1"></a>cpd-cli manage apply-olm <span class="se">\</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#on-premises-7-__codelineno-3-2"></a>--release<span class="o">=</span><span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#on-premises-7-__codelineno-3-3"></a>--cpd_operator_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERATORS</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#on-premises-7-__codelineno-3-4"></a>--components<span class="o">=</span><span class="si">${</span><span class="nv">COMPONENTS</span><span class="si">}</span> 
</code></pre></div>
<div class="admonition warning">
<p>Completion of this operation will take approximately <strong>15 minutes</strong>, after which the console will return:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#on-premises-7-__codelineno-4-1"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T23:16:42.690505Z You may find output and logs <span class="k">in</span> the /home/itzuser/cpd-cli-workspace/olm-utils-workspace/work directory.
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#on-premises-7-__codelineno-4-2"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-19T23:16:42.690774Z The apply-olm <span class="nb">command</span> ran successfully.
</code></pre></div></p>
</div>
</li>
</ol>
<hr />
<h2 id="on-premises-7-v-installing-software"><strong>v. Installing software</strong></h2>
<p>Creating the custom resources for watsonx Code Assistant and kicking off the installation process is achieved with relatively few inputs from the administrator.</p>
<hr />
<ol start="3">
<li>
<p>Start the installation process for WCA by executing the following code block:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#on-premises-7-__codelineno-5-1"></a>cpd-cli manage apply-cr <span class="se">\</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#on-premises-7-__codelineno-5-2"></a>--release<span class="o">=</span><span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#on-premises-7-__codelineno-5-3"></a>--cpd_instance_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERANDS</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#on-premises-7-__codelineno-5-4"></a>--components<span class="o">=</span><span class="si">${</span><span class="nv">COMPONENTS</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#on-premises-7-__codelineno-5-5"></a>--block_storage_class<span class="o">=</span><span class="si">${</span><span class="nv">STG_CLASS_BLOCK</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#on-premises-7-__codelineno-5-6"></a>--file_storage_class<span class="o">=</span><span class="si">${</span><span class="nv">STG_CLASS_FILE</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#on-premises-7-__codelineno-5-7"></a>--license_acceptance<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<div class="admonition warning">
<p>Completion of this operation may take up to <strong>2 hours</strong>, after which the console will return:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#on-premises-7-__codelineno-6-1"></a><span class="o">[</span>SUCCESS<span class="o">]</span>... The apply-cr <span class="nb">command</span> ran successfully
</code></pre></div></p>
</div>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>Once the installation procedure of Step 3 has wrapped up, retrieve the details about the WCA instance by <strong>executing</strong> the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#on-premises-7-__codelineno-7-1"></a>cpd-cli manage get-cpd-instance-details <span class="se">\</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#on-premises-7-__codelineno-7-2"></a>--cpd_instance_ns<span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_CPD_INST_OPERANDS</span><span class="si">}</span> <span class="se">\</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#on-premises-7-__codelineno-7-3"></a>--get_admin_initial_credentials<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<ul>
<li>The console will return multiple lines. Take note of the lines with headers <em>CPD Url</em>, <em>CPD Username</em>, and <em>CPD Password</em>. These have been highlighted in the code sample below.</li>
<li><strong>Copy</strong> the three variables from <em>your</em> Terminal's output to a notepad for reference later.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#on-premises-7-__codelineno-8-1"></a><span class="o">[</span>INFO<span class="o">]</span> <span class="m">2025</span>-03-20T03:20:17.481851Z Run command: podman <span class="nb">exec</span> -it olm-utils-play-v3 get-cpd-instance-details --cpd_instance_ns<span class="o">=</span>cpd-watsonx --get_admin_initial_credentials<span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#on-premises-7-__codelineno-8-2"></a><span class="hll">CPD Url: cpd-cpd-watsonx.apps.67da04cc1b2e441b1d48a668.ocp.techzone.ibm.com
</span><a id="__codelineno-8-3" name="__codelineno-8-3" href="#on-premises-7-__codelineno-8-3"></a><span class="hll">CPD Username: cpadmin
</span><a id="__codelineno-8-4" name="__codelineno-8-4" href="#on-premises-7-__codelineno-8-4"></a><span class="hll">CPD Password: xEhwFROJ5rAL4DZ3ggTNKzlREXDYDYHU
</span><a id="__codelineno-8-5" name="__codelineno-8-5" href="#on-premises-7-__codelineno-8-5"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-20T03:20:18.949702Z You may find output and logs <span class="k">in</span> the /home/itzuser/cpd-cli-workspace/olm-utils-workspace/work directory.
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#on-premises-7-__codelineno-8-6"></a><span class="o">[</span>SUCCESS<span class="o">]</span> <span class="m">2025</span>-03-20T03:20:18.949759Z The get-cpd-instance-details <span class="nb">command</span> ran successfully.
</code></pre></div>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>Using a web browser, navigate to the address specified by <em>CPU Url</em>. A page will load for the Administration Console which allows administrators to manage both their IBM Software Hub (CP4D) and IBM watsonx Code Assistant environments.</p>
<ul>
<li>Supply the <em>CPD Username</em><sup>[A]</sup> and <em>CPD Password</em><sup>[B]</sup> values recorded in Step 4</li>
<li>Click <strong>Login in</strong><sup>[C]</sup> to proceed</li>
<li>The web browser will load the IBM Software Hub dashboard, from which a number of administrative and monitoring options are available for you to inspect</li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-7.5a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-7.5a.png" /></a></p>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>Verify that the IBM watsonx Code Assistant service was successfully installed:</p>
<ul>
<li>From the dashboard's navigation menu, drill down into <strong>Services</strong> &gt; <strong>Services catalog</strong><sup>[A]</sup></li>
<li>Search for the <em>IBM watsonx Code Assistant</em> service tile and confirm it is marked with a status of <code>Enabled</code></li>
<li><strong>Click</strong><sup>[B]</sup> on the tile to preview the service</li>
<li>The web browser will load what essentially resembles the "catalog" view you might encounter on a online store portal such as IBM Cloud — this is <em>not</em> the administrative portal used for managing the WCA service</li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-7.5b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-7.5b.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-7.6.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-7.6.png" /></a></p>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>To access the WCA management console, look to the top-right corner of the IBM Software Hub dashboard and <strong>click</strong><sup>[A]</sup> the rectangular-dot icon. This will allow you to toggle between the Software Hub and WCA administrative portals.</p>
<ul>
<li><strong>Click</strong><sup>[B]</sup> the <em>IBM watsonx Code Assistant</em> button to switch portals</li>
<li>The administrative portal for WCA will load within the web browser</li>
</ul>
<p></br>
<a class="glightbox" href="../on-premises/_attachments/onprem-7.7a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-7.7a.png" /></a>
</br>
<a class="glightbox" href="../on-premises/_attachments/onprem-7.7b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../on-premises/_attachments/onprem-7.7b.png" /></a></p>
</li>
</ol>
<h2 id="on-premises-7-vi-next-steps"><strong>vi. Next steps</strong></h2>
<p>Congratulations — you have successfully completed the installation of IBM watsonx Code Assistant within an on-premises environment!</br></br>Explore and inspect various aspects of the on-premises environment as you wish, but keep in mind that without GPUs attached to the environment you will be significantly restricted in terms of usability. Some features may be unavailable or broken without such hardware. That is why for the <em>Application Modernization</em> hands-on modules, you will have full GPU access via the provided IBM Cloud environments. Those modules will delve deeply into the administrative and developer-oriented tasks that are limited for the on-premises environment.</p>
<details class="warning">
<summary>GPUs NOT SUPPORTED FOR ON-PREMISES DEPLOYMENTS</summary>
<p>Resource and budget constraints for IBM Technology Zone and the IBM Enablement teams means that GPUs are <strong>unavailable for the on-premises portion</strong> of the Level 4 curriculum.</p>
<p>The NVIDIA A100 or H100 GPUs required are simply too cost-prohibitive to be made available for individual IBMers and business partners. GPUs cannot be shared in a multi-tenant access pattern for IBM watsonx Code Assistant — and as such at minimum two of such cards would need to be made available for every L4 reservation. These costs are beyond the scope of what can be supported by this training.</p>
<p>Participants <strong><em>will</em> have access to GPUs for the IBM Cloud (SaaS) portion</strong> of the Level 4 curriculum.</p>
</details>
<details class="note">
<summary>TROUBLESHOOTING: LOGGING IN AND SESSION TIMEOUTS</summary>
<p>Be aware that SSH connections made over Terminal will time out after a long period of inactivity or due to a connection error. If you need to log back into the bastion terminal, follow the procedure below. Replace the <code>&lt;BASTION_PWD&gt;</code> placeholder with the password specific to <em>your</em> environment.</p>
<ol>
<li>
<p>Log back into the bastion node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#on-premises-7-__codelineno-9-1"></a>ssh itzuser@api.67828ca5e432cac47ccc4230.ocp.techzone.ibm.com -p <span class="m">40222</span> &lt;BASTION_PWD&gt;
</code></pre></div>
</li>
<li>
<p>Engage the <code>sudo</code> (privileged access) session:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#on-premises-7-__codelineno-10-1"></a>sudo bash
</code></pre></div>
</li>
<li>
<p>Source the environment variables stored in <code>cpd_vars.sh</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#on-premises-7-__codelineno-11-1"></a><span class="nb">source</span> cpd_vars.sh
</code></pre></div>
</li>
<li>
<p>Log back into OpenShift:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#on-premises-7-__codelineno-12-1"></a><span class="si">${</span><span class="nv">OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
<li>
<p>Log back into <code>cpd-cli</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#on-premises-7-__codelineno-13-1"></a><span class="si">${</span><span class="nv">CPDM_OC_LOGIN</span><span class="si">}</span>
</code></pre></div>
</li>
</ol>
</details></section><h1 class='nav-section-title-end'>Ended: On-Premises Installation and Deployment</h1>
                        <h1 class='nav-section-title' id='section-ibm-cloud-saas-configuration'>
                            IBM Cloud (SaaS) Configuration <a class='headerlink' href='#section-ibm-cloud-saas-configuration' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="saas-1"><h1 id="saas-1-objectives-and-requirementsibm-cloud-saas-configuration"><strong>Objectives and requirements</strong></br><em>IBM Cloud (SaaS) Configuration</em></h1>
<h2 id="saas-1-i-about-this-lab"><strong>i. About this lab</strong></h2>
<p>For the purposes of the Level 4 training curriculum, the hands-on components have been split across both on-premises and Software-as-a-Service (SaaS) environments on IBM Cloud. Both are supported by IBM Technology Zone (ITZ) infrastructure.</p>
<p>The <a href="https://ibm.github.io/wca-l4/on-premises/1/" target="_blank"><strong>On-Premises Installation and Deployment</strong></a> modules extensively cover the process of preparing, installing, and deploying a full-stack IBM watsonx Code Assistant (WCA) service "on-premises" (OpenShift on VMware). However, resource and budget constraints for ITZ teams means that <strong>GPUs are unavailable for on-premises training environments</strong> like the one deployed in those modules. The NVIDIA A100 or H100 GPUs required are simply too cost-prohibitive to be made available for individual IBMers and business partners. These costs are beyond the scope of what can be supported for training with on-premises environments.</p>
<p>Fortunately, participants <strong><em>do</em> have access to GPUs for SaaS training environments</strong> on IBM Cloud. This module will guide you through the process of reserving the necessary <em>Standard</em> plan of WCA through ITZ and configuring the environment for use. Other modules in the L4 curriculum  (<em>Application Modernization</em> and <em>Tuning &amp; Configuration</em>) will each leverage the SaaS environment you've configured in the following steps.</p>
<p>There are two tiers of plans (editions) available for SaaS deployments of WCA:</p>
<table>
<thead>
<tr>
<th>Plan</th>
<th>Details</th>
<th>Use Cases</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ESSENTIALS PLAN</strong></td>
<td>Accelerates software development, allowing developers to use WCA with integrated generative AI (gen AI) for coding.</td>
<td>Generating, explaining, and documenting code. Creation of unit tests.</td>
</tr>
<tr>
<td><strong>STANDARD PLAN</strong></td>
<td>In addition to all the capabilities found in the <em>Essentials</em> plan, the <em>Standard</em> plan includes enterprise Java modernization capabilities, which will be of particular advantage for the <em>Application Modernization</em> modules of the Level 4 curriculum.</td>
<td>Java upgrades, regardless of runtime. WebSphere to Liberty transformation. Enhanced test generation and code explanation.</td>
</tr>
</tbody>
</table>
<p>To ensure that participants have access to the enterprise Java modernization capabilities, the instructions of this module call for provisioning <strong>WCA Standard Plan</strong> for the SaaS environment.</p>
<h2 id="saas-1-ii-prerequisites"><strong>ii. Prerequisites</strong></h2>
<p>There are two high-level architectural components to WCA:</p>
<div class="admonition note">
<ol>
<li><strong>WCA extension</strong>: The interface through which developers interact with WCA, in the form of an extension (sometimes called a "plug-in") running in an integrated development environment (IDE). The IDEs currently supported by WCA are Visual Studio Code (VS Code) and Eclipse.</li>
<li><strong>WCA service:</strong> The back-end WCA service, to which requests from the extension are made and the results returned to the participant's IDE. It is available as software-as-a-service (SaaS) on IBM Cloud and as deployable software for on-premises deployments.</li>
</ol>
</div>
<p>Participants require access to ITZ in order to reserve an environment and complete the hands-on work. If you do not yet have an account with the ITZ, you will need to <a href="https://techzone.ibm.com/" target="_blank"><strong>register for one</strong></a>.</p>
<hr />
<h2 id="saas-1-iii-troubleshooting-and-support"><strong>iii. Troubleshooting and support</strong></h2>
<p>If you require assistance or run into issues with the hands-on lab, help is available.</p>
<ul>
<li>
<p><strong>Environment issues:</strong> The lab environment is managed by IBM Technology Zone. <a href="https://techzone.ibm.com/help" target="_blank"><strong>Opening a support case ticket</strong></a> is recommended for issues related to the hands-on environment (provisioning, running, and so on.)</p>
</li>
<li>
<p><strong>Product questions:</strong> For questions related to IBM watsonx Code Assistant capabilities, sales opportunities, roadmap, and other such matters, open a thread on the <a href="https://ibm.enterprise.slack.com/archives/C059NKPUCP9" target="_blank"><strong>#watsonx-code-assistant</strong></a> Slack channel.</p>
</li>
</ul>
<hr />
<h2 id="saas-1-iv-next-steps"><strong>iv. Next steps</strong></h2>
<p>In the following section, participants will prepare the SaaS-based lab environment with the necessary services and configurations through IBM Technology Zone.</p></section><section class="print-page" id="saas-2"><h1 id="saas-2-reserve-an-environmentibm-cloud-saas-configuration"><strong>Reserve an environment</strong></br><em>IBM Cloud (SaaS) Configuration</em></h1>
<div class="admonition quote">
<p>The following section is partially based on IBM Cloud Documentation for <a href="https://cloud.ibm.com/docs/watsonx-code-assistant?topic=watsonx-code-assistant-cloud-setup-wca" target="_blank"><strong>Setting up your watsonx Code Assistant service in IBM Cloud</strong></a>. Some of the configuration steps— such as creation of an access group and adding an access group to the deployment space -are automatically handled by IBM Technology Zone provisioning tasks. As such, if you are repeating this deployment for a client production environment, you may wish to reference the complete documentation set.</p>
</div>
<h2 id="saas-2-i-ibm-technology-zone"><strong>i. IBM Technology Zone</strong></h2>
<p>The following steps will guide participants through the process for requesting access to an IBM watsonx Code Assistant (WCA) Standard Plan environment from IBM Technology Zone (ITZ).</p>
<hr />
<ol>
<li>
<p><strong>Open</strong> the ITZ collection at the following address:</p>
<div class="admonition warning">
<p><strong>URL:</strong> <strong><a href="https://techzone.ibm.com/collection/wca/environments" target="_blank">https://techzone.ibm.com/collection/wca/environments</a></strong></p>
</div>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>There are multiple templates and flavors of WCA available:</p>
<ul>
<li>Locate the <strong>Request watsonx Code Assistant - Standard (GA) [Approval Gated]</strong><sup>[A]</sup> tile</li>
<li>Hover over and click the <strong>IBM Cloud environment / Reserve It</strong><sup>[B]</sup> button</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.2.png" /></a></p>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>Supply additional details about the ITZ reservation request:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Name</strong></td>
<td>Assign the reservation a unique name.</td>
</tr>
<tr>
<td><strong>Purpose</strong></td>
<td><code>Education</code></td>
</tr>
<tr>
<td><strong>Purpose Description</strong></td>
<td>Assign the reservation a unique description.</td>
</tr>
<tr>
<td><strong>Preferred Geography</strong></td>
<td>Select the region and data center closest to your location.</td>
</tr>
<tr>
<td><strong>Start Date and Time</strong></td>
<td>Select a time and date for when the reservation will begin.</td>
</tr>
<tr>
<td><strong>End Date and Time</strong></td>
<td>Select a time and date for when the reservation will expire.</td>
</tr>
</tbody>
</table>
<p>When ready, verify that you agree to the <em>Terms and Conditions</em> for the environment and finalize your reservation request by clicking <strong>Submit for Approval</strong><sup>[A]</sup>.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.3.png" /></a></p>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>Navigate to the <strong><a href="https://techzone.ibm.com/my/reservations" target="_blank">My Reservations</a></strong> tab of the ITZ to monitor the progress. Initially, the request will be marked as <em>Pending Approval</em><sup>[A]</sup>.</p>
<ul>
<li>
<p>You will receive an email with the header <em>Request Approved</em> once the request has been adjudicated by the approvals team</p>
</li>
<li>
<p><strong>Wait</strong> for the ITZ reservation to be marked as <em>Ready</em> before continuing to Step 5</p>
</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.4.png" /></a></p>
<div class="admonition note">
<ul>
<li><strong>Pending Approval:</strong> marked in grey, the reservation is awaiting approval from ITZ</li>
<li><strong>Provisioning:</strong> marked in yellow, the reservation is being deployed</li>
<li><strong>Ready:</strong> marked in green, the reservation has successfully deployed</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">REQUEST IS PENDING APPROVAL</p>
<p>For ITZ templates marked as "Approval Gated", such as the WCA Standard Plan, reservations and provisioning requests are <strong>not</strong> automatically initiated. Per the IBM Technology Zone:</p>
<p>"Your request has successfully been submitted and is pending approval. <strong>Please allow 3 to 4 North American Business Days for the team to review for a decision.</strong> To find more information on the reviewing group, reference the <a href="https://github.com/IBM/itz-support-public/blob/main/IBM-Technology-Zone/IBM-Technology-Zone-Runbooks/approval-workflow.md" target="_blank"><strong>Approval Workflow Runbook</strong></a>. Leverage the <a href="https://github.com/IBM/itz-support-public/blob/main/IBM-Technology-Zone/IBM-Technology-Zone-Runbooks/approval-workflow.md" target="_blank"><strong>Custom Request Runbook</strong></a> for details."</p>
</div>
</li>
</ol>
<h2 id="saas-2-ii-accessing-the-service-details"><strong>ii. Accessing the service details</strong></h2>
<p>Once the WCA service has been approved and provisioned, you will receive <strong>two</strong> emails with the following headers:</p>
<ul>
<li><strong>Reservation Ready on IBM Technology Zone:</strong> indicates that the ITZ cluster has been successfully provisioned</li>
<li><strong>Account: Action required: You are invited to join an account in IBM Cloud:</strong> additional steps required by the administrator (you) in order to link the WCA service to IBM Cloud</li>
</ul>
<hr />
<ol start="5">
<li>
<p>Steps must be taken to link the WCA service and IBM Cloud accounts at this time.</p>
<ul>
<li>Click the <strong>Join now</strong><sup>[A]</sup> button within the body of the <em>Account: Action required: You are invited to join an account in IBM Cloud</em> email</li>
<li>A web browser tab will launch and redirect to IBM Cloud</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.5a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../saas/_attachments/saas-2.5a.png" width="400" /></a>
</br>
<a class="glightbox" href="../saas/_attachments/saas-2.5b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../saas/_attachments/saas-2.5b.png" width="400" /></a></p>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>Check the <strong>I accept the product Terms and Conditions of this registration form</strong><sup>[A]</sup> box under the <em>Account Notice</em> header, then click <strong>Join account</strong><sup>[B]</sup> to continue.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.6.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.6.png" /></a></p>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>You will be presented with a prompt asking for your permission to switch your personal IBM Cloud account's view into the WCA service (ITZ-provisioned) IBM Cloud account — which will resemble something like <code>itz-watsonx-24</code>. Click <strong>Proceed</strong><sup>[A]</sup> to confirm.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.7.png" /></a></p>
</li>
</ol>
<hr />
<ol start="8">
<li>
<p>The IBM Cloud dashboard will now load within your web browser. At this time, confirm you are logged in under the WCA service account by inspecting the drop-down menu<sup>[A]</sup> as shown in the screenshot below.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.8.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.8.png" /></a></p>
<div class="admonition note">
<p class="admonition-title">SWITCHING BETWEEN IBM CLOUD ACCOUNTS</p>
<p>You can toggle between various IBM Cloud accounts at-will. However, for the purposes of this lab it's best that you remain under the WCA service<sup>[B]</sup> account.</p>
</div>
<hr />
</li>
<li>
<p>Open a new web browser tab and navigate to the <strong><a href="https://techzone.ibm.com/my/reservations" target="_blank">My Reservations</a></strong> ITZ page to inspect the details of your newly-provisioned service (or follow the link provided in the <em>Reservation Ready on IBM Technology Zone</em>) email. Click on the newly-provisioned service's tile<sup>[A]</sup> to inspect the environment's access and authentication details.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.9.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.9.png" /></a></p>
</li>
</ol>
<hr />
<ol start="10">
<li>
<p>Scroll down the page to the <em>Reservations Details</em> section and locate the following values. You will need to record these to a notepad for future reference.</p>
<ul>
<li><em>IBM Cloud Service ID</em><sup>[A]</sup></li>
<li><em>IBM Cloud API key</em><sup>[B]</sup></li>
<li><em>WCA URL</em><sup>[C]</sup></li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.10.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.10.png" /></a></p>
</li>
</ol>
<hr />
<ol start="11">
<li>
<p>Open a new browser tab and navigate to the <strong>WCA URL</strong> recorded in Step 10.</p>
<ul>
<li>A <em>Resource list</em> view on IBM Cloud will load</li>
<li>Click the <strong>Launch watsonx Code Assistant</strong><sup>[A]</sup> button to continue</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.11.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.11.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="saas-2-iii-configuring-the-environment"><strong>iii. Configuring the environment</strong></h2>
<p>A new tab will load to present the <strong>WCA Dashboard</strong>, which on a first-time login will automatically prompt you to configure the environment.</p>
<hr />
<ol start="12">
<li>
<p>When presented with the <em>Set up watsonx Code Assistant for Standard plan</em> panel, click on the <strong>Set up</strong><sup>[A]</sup> button to continue.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.12.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.12.png" /></a></p>
</li>
</ol>
<hr />
<ol start="13">
<li>
<p><em>Type of installation</em> configuration options must be configured. Select <strong>Single user</strong><sup>[A]</sup>.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.13.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.13.png" /></a></p>
</li>
</ol>
<hr />
<ol start="14">
<li>
<p>Having specified the installation type, more options will unlock further down the page under the <em>Steps to complete</em> header.</p>
<p>Click the <strong>blue arrow</strong><sup>[A]</sup> icon to the right of the <em>Create a deployment space</em> option.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.14.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.14.png" /></a></p>
</li>
</ol>
<hr />
<ol start="15">
<li>
<p>Configure the <strong>Create a deployment space</strong> page as follows:</p>
<ul>
<li><em>Name<sup>[A]</sup>:</em> Assign a name of your choosing to the deployment space (e.g. <code>wca-l4</code>)</li>
<li><em>Description<sup>[B]</sup>:</em> Optional</li>
<li><em>Select storage service<sup>[C]</sup>:</em> Do not change. IBM Technology Zone has automatically assigned Cloud Object Storage space for this reservation.</li>
<li><em>Code assistant service<sup>[D]</sup>:</em> Click the drop-down menu and select the WCA service belonging to your account.</li>
</ul>
<p>All other fields can remain as their default values. When ready, click <strong>Create</strong><sup>[E]</sup> and remain on the page for the deployment to finish.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.15.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.15.png" /></a></p>
</li>
</ol>
<hr />
<ol start="16">
<li>
<p>Once the deployment space has been prepared, a pop-up alert will display <em>The space is ready</em>. Click the <strong>X</strong><sup>[A]</sup> icon in the top-right corner to dismiss the message and continue with the configuration steps.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.16.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.16.png" /></a></p>
</li>
</ol>
<hr />
<ol start="17">
<li>
<p>The web browser will return to the set up wizard, which now displays additional options under the <em>Steps to complete</em> section.</p>
<ul>
<li>
<p>Notice that the <em>Create a deployment space</em> step has been marked as complete.</p>
</li>
<li>
<p>Click the <strong>blue arrow</strong><sup>[A]</sup> icon to the right of the <em>Select your license preference for response generations</em> option to continue.</p>
</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.17.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.17.png" /></a></p>
</li>
</ol>
<hr />
<ol start="18">
<li>
<p>The <em>Display of Code Suggestions</em> page permits users to configure how to display code suggestions returned by the WCA service.</p>
<ul>
<li><strong>Do not change</strong> any of the settings, but you are welcome to review them if you wish</li>
<li><strong>Close</strong> the page and return to the set up wizard</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.18.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.18.png" /></a></p>
</li>
</ol>
<hr />
<ol start="19">
<li>
<p><strong>Check</strong><sup>[A]</sup> the box to the left of the <em>Select your license preference for response generations</em> option to mark the task as complete.</p>
<ul>
<li>A prompt will appear to indicate that all setup tasks are now complete</li>
<li>Click the <strong>Go to home page</strong><sup>[B]</sup> button to conclude the setup</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.19a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.19a.png" /></a>
</br>
<a class="glightbox" href="../saas/_attachments/saas-2.19b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.19b.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="saas-2-iv-create-a-service-id-and-api-key"><strong>iv. Create a service ID and API key</strong></h2>
<p>Participants will use this API key later to enable Visual Studio Code extensions or Eclipse IDE plug-ins to communicate with the WCA service.</p>
<hr />
<ol start="20">
<li>
<p>Open a new web browser tab and navigate to the <a href="https://cloud.ibm.com/iam/serviceids" target="_blank"><strong>IBM Cloud Service IDs</strong></a> admin page.</p>
<ul>
<li>Verify that the <strong>Service IDs</strong><sup>[A]</sup> tab is open and that the <strong>Resource Group</strong><sup>[B]</sup> is set to the ITZ-provisioned WCA account (Steps 7-8)</li>
<li>Click <strong>Create service ID</strong><sup>[C]</sup> to continue</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.20.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.20.png" /></a></p>
</li>
</ol>
<hr />
<ol start="21">
<li>
<p>Set the <strong>Name</strong><sup>[A]</sup> field equal to <code>IBM watsonx Code Assistant user</code> or another name of your choosing. Click the <strong>Create</strong><sup>[B]</sup> button to continue.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.21.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.21.png" /></a></p>
</li>
</ol>
<hr />
<ol start="22">
<li>
<p>From the tabs along the left side of the page, click <strong>API Keys</strong><sup>[A]</sup>. Once it loads, click <strong>Create</strong><sup>[B]</sup> to continue.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.22.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.22.png" /></a></p>
</li>
</ol>
<hr />
<ol start="23">
<li>
<p>Create a new <strong>IBM Cloud API Key</strong> with the following parameters:</p>
<ul>
<li><em>Name<sup>[A]</sup>:</em> <code>IBM watsonx Code Assistant API key</code></li>
<li><em>Leaked action<sup>[B]</sup>:</em> <code>Disable the leaked key</code></li>
<li><em>Session creation<sup>[C]</sup>:</em> <code>No</code></li>
<li>When ready, click <strong>Create</strong><sup>[D]</sup> to finalize the key</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.23.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.23.png" /></a></p>
</li>
</ol>
<hr />
<ol start="24">
<li>
<p>A prompt will appear reporting that <em>API key successfully created</em>.</p>
<ul>
<li>Click the <strong>Copy</strong><sup>[A]</sup> button and record the <em>WCA API Key</em> to your notebook for reference later</li>
<li>It's recommended that you also <strong>Download</strong> the key as a redundancy</li>
<li>When ready, <strong>close</strong><sup>[B]</sup> the window</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.24.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.24.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="saas-2-v-add-the-service-id-to-the-wca-deployment-space"><strong>v. Add the service ID to the WCA deployment space</strong></h2>
<p>With the <em>Service ID</em> and <em>WCA API Key</em> now generated, they need to be associated with your WCA instance — specifically, the WCA <em>Deployment Space</em>. This will be the way in which the WCA extension (VS Code or Eclipse IDE) communicates with the WCA service.</p>
<hr />
<ol start="25">
<li>
<p>Return to the <strong>WCA Dashboard</strong> web browser tab (where you left off in Step 19).</p>
<ul>
<li>Click the <strong>stacked tiles</strong><sup>[A]</sup> in the top-left corner of the dashboard to expand the menu items along the left-hand side</li>
<li>Click on the <strong>Deployments</strong><sup>[B]</sup> tab</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.25.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.25.png" /></a></p>
</li>
</ol>
<hr />
<ol start="26">
<li>
<p>Within the table of existing deployments, click the <strong>wca-l4</strong><sup>[A]</sup> deployment (or whatever name you chose to assign the deployment created in Step 15).</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.26.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.26.png" /></a></p>
</li>
</ol>
<hr />
<ol start="27">
<li>
<p>From the tabs along the top, click the <strong>Manage</strong><sup>[A]</sup> tab. Then, from the left-hand side options, click the <strong>Access control</strong><sup>[B]</sup> tab.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.27a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.27a.png" /></a>
</br>
<a class="glightbox" href="../saas/_attachments/saas-2.27b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.27b.png" /></a></p>
</li>
</ol>
<hr />
<ol start="28">
<li>
<p>Click the <strong>Add collaborators</strong><sup>[A]</sup> button to expand a list of options, then click <strong>Add service IDs</strong><sup>[B]</sup> to continue.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.28.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.28.png" /></a></p>
</li>
</ol>
<hr />
<ol start="29">
<li>
<p>Within the table of <em>Service IDs</em>, you should see 1 entry for the <code>IBM watsonx Code Assistant user</code> that was created in Step 21.</p>
<ul>
<li><strong>Click</strong><sup>[A]</sup> the box to the left of the ID</li>
<li><strong>Click</strong><sup>[B]</sup> the <em>Role</em> box to the right of the ID and select <strong>Editor</strong> from the drop-down menu</li>
<li>Click <strong>Add</strong><sup>[C]</sup> to finalize the operation</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-2.29.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-2.29.png" /></a></p>
</li>
</ol>
<hr />
<ol start="30">
<li>Confirm that the <code>IBM watsonx Code Assistant user</code> <em>Service ID</em> now appears within the list of approved <em>Collaborators</em> under the <strong>Access Control</strong> tab.</li>
</ol>
<hr />
<h2 id="saas-2-vi-next-steps"><strong>vi. Next steps</strong></h2>
<p>The deployment and initial configurations of the watsonx Code Assistant (SaaS) Standard Plan service on IBM Cloud is now complete. In the following two modules, you will prepare the WCA extensions and plug-ins for Visual Studio Code and Eclipse IDE, respectively.</p></section><section class="print-page" id="saas-3"><h1 id="saas-3-install-wca-extension-for-visual-studio-codeibm-cloud-saas-configuration"><strong>Install WCA extension for Visual Studio Code</strong></br><em>IBM Cloud (SaaS) Configuration</em></h1>
<h2 id="saas-3-i-objectives-and-rationale"><strong>i. Objectives and rationale</strong></h2>
<p>With the WCA service component of the SaaS architecture now successfully provisioned via the ITZ, participants will now need to set up the WCA extension within an integrated development environment (IDE). WCA currently supports both <em>Visual Studio Code</em> (<strong>VS Code</strong>) and <em>Eclipse IDE</em>.</p>
<p>This module guides participants through the process of installing VS Code on their local machine. Afterwards, the WCA extension ("plug-in") can then be easily integrated with the IDE and authorized for use with the ITZ-provisioned WCA service.</p>
<div class="admonition note">
<p class="admonition-title">WHY INSTALL LOCALLY?</p>
<p>Be aware that ITZ only allows two environments to be reserved for education and training purposes at any one time. Reservations for client demonstrations and pilots do not count against this limit.</p>
<p>The WCA Standard plan on SaaS requires at least one reservation slot. The on-premises environment already provisioned through ITZ for the previous <a href="https://ibm.github.io/wca-l4/on-premises/1/" target="_blank"><strong>On-Premises Installation and Deployment</strong></a> modules is occupying the second available slot. Provisioning an ITZ-hosted virtual machine (VM) environment will require a third slot — exceeding what ITZ supports. Therefore, to accommodate a virtualized desktop, participants would <strong>need to retire and deprovision</strong> the on-premises environment that they've already gone to great lengths to set up. Let's avoid that scenario, if possible.</p>
<p>IBM watsonx Code Assistant works great on locally-installed IDEs via extensions built into VS Code and Eclipse IDE. In fact, it's the <em>de facto</em> way to interact with the service and provides the best impression for users by far — with a less cumbersome experience with the lab guide instructions and much more responsive IDE interactions.</p>
</div>
<h2 id="saas-3-ii-locally-install-vs-code"><strong>ii. Locally install VS Code</strong></h2>
<p>Before you configure the extension for VS Code, you must first install the IDE on your machine.</p>
<hr />
<ol>
<li>
<p>Download the latest <strong>Stable Build</strong><sup>[A]</sup> release of VS Code available for your machine's operating system using the link below.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-3.1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.1.png" /></a></p>
<div class="admonition warning">
<p><strong>Download</strong>: <a href="https://code.visualstudio.com" target="_blank">https://code.visualstudio.com</a></p>
<p>Follow along with the installer wizard steps and continue with the hands-on lab instructions once VS Code is running on your local machine.</p>
</div>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>Launch the VS Code application and take note of the sidebar along the left-side.</p>
<p>Click the <strong>Extensions</strong><sup>[A]</sup> icon to open the marketplace of services and open source technologies that can be integrated with VS Code.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-3.2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.2.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="saas-3-iii-install-the-extension"><strong>iii. Install the extension</strong></h2>
<p>Search for the <a href="https://marketplace.visualstudio.com/items?itemName=IBM.wca-eja" target="_blank"><strong>watsonx Code Assistant for Enterprise Java Applications</strong></a> extension, which corresponds to the WCA Standard plan. This plug-in supports all the features of the Essentials plan, plus enterprise Java modernization capabilities, enhanced code explanation, and enhanced unit test generation — all of which will be necessary for the Level 4 curriculum and hands-on training.</p>
<hr />
<ol start="3">
<li>
<p>Into the <strong>search bar</strong><sup>[A]</sup> under the <em>Extensions</em> tab, enter the following text:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#saas-3-__codelineno-0-1"></a>watsonx Code Assistant <span class="k">for</span> Enterprise Java Applications
</code></pre></div>
<ul>
<li>After locating the extension, click the <strong>Install</strong><sup>[B]</sup> button</li>
<li>When prompted, select <strong>Trust Publisher &amp; Install</strong><sup>[C]</sup> to confirm the procedure</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-3.3a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.3a.png" /></a>
</br>
<a class="glightbox" href="../saas/_attachments/saas-3.3b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.3b.png" /></a></p>
<div class="admonition note">
<p class="admonition-title">OTHER EXTENSIONS ARE AVAILABLE</p>
<p>Note that Standard plan installation creates <strong>two</strong> entries in your Visual Studio Code Extensions panel: one for <em>watsonx Code Assistant</em> and one for <em>watsonx Code Assistant for Enterprise Java Applications</em>. The two extensions are dependencies for this installation.</p>
<p>Two other plug-ins are available within VS Code for <em>IBM watsonx Code Assistant</em> specifically, and even more for other offerings such as <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em> and <em>IBM watsonx Code Assistant for Z</em>. For WCA, there are alternative extensions available for <a href="https://marketplace.visualstudio.com/items?itemName=IBM.wca-core" target="_blank"><strong>Trial Plan</strong></a> and <a href="https://marketplace.visualstudio.com/items?itemName=IBM.wca-core" target="_blank"><strong>Essential Plan</strong></a> tiers.</p>
</div>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>To open WCA within VS Code, click on the <strong>watsonx Code Assistant</strong><sup>[A]</sup> icon that has appeared along the left-hand side of the VS Code IDE. You will be greeted with a <code>Welcome, let's get started!</code> prompt within the IDE.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-3.4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.4.png" /></a></p>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>Now let's authorize the extension for use with the WCA service provisioned on IBM Cloud. From the WCA panel, click <strong>Log in with your API key</strong><sup>[A]</sup> to continue.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-3.5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.5.png" /></a></p>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>A drop-down menu will open at the top of the VS Code interface. <strong>Copy and paste</strong><sup>[A]</sup> the <em>WCA API Key</em> that was recorded in <a href="https://ibm.github.io/wca-l4/saas/2/#iv-create-a-service-id-and-api-key" target="_blank"><strong>Step 24 of Module 2</strong></a> into the prompt.</p>
<ul>
<li>The interface should display a line of text indicating a <em>Valid API Key</em> has been detected</li>
<li>Press <span class="keys"><kbd class="key-enter">Enter</kbd></span> to confirm the input</li>
<li>When prompted with <em>The extension 'watsonx Code Assistant' wants to sign in using WCA API Key</em>, click <strong>Allow</strong><sup>[B]</sup></li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-3.6a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.6a.png" /></a>
</br>
<a class="glightbox" href="../saas/_attachments/saas-3.6b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.6b.png" /></a></p>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>Confirm that the extension successfully authenticated with the WCA service by looking for an open <em>Chat session 1</em> with <code>watsonx</code> along the left side of the WCA extension page<sup>[A]</sup>. If this Chat interface is available and operational, that confirms that VS Code extension has been successfully integrated with the WCA service.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-3.7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-3.7.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="saas-3-iv-set-up-the-enterprise-java-application-environment"><strong>iv. Set up the enterprise Java application environment</strong></h2>
<p>As you will be working with the WCA Standard Plan and interacting with enterprise Java applications, you will need to perform some additional configuration (beyond what would be needed for the Trial or Essentials plans).</p>
<hr />
<ol start="8">
<li>
<p>Locally you must <strong>install</strong> <em>either</em> Java or Apache Maven distributions. Details and download links for the two are summarized in the table below.</p>
<p><strong>Java Requirements</strong></p>
<table>
<thead>
<tr>
<th>Distribution</th>
<th>Details</th>
<th>Resources</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Java</strong></td>
<td>Java SE 11 with Java Developer Kit 11, or a later version.</td>
<td><strong><a href="https://www.java.com/en/download/manual.jsp" target="_blank">Download</a></strong></td>
</tr>
<tr>
<td><strong>Maven</strong></td>
<td>Use Maven to build your application. If you are using Liberty Tools and the Liberty Maven plug-in to build your app or project, use at least Maven 3.8.6.</td>
<td><strong><a href="https://maven.apache.org/download.cgi" target="_blank">Download</a></strong></td>
</tr>
</tbody>
</table>
</li>
</ol>
<hr />
<ol start="9">
<li>
<p>With your preferred Java distribution installed locally, you now need to set the appropriate environment variables.</p>
<p>Find the Java installation path on your local machine using the instruction set that corresponds to your local operating system.</p>
<ul>
<li><strong>macOS:</strong> Open a Terminal and execute: <code>/usr/libexec/java_home</code><ul>
<li>The output should resemble something like: <code>/Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home</code></li>
</ul>
</li>
<li><strong>Windows:</strong> Open a Command Prompt and execute: <code>echo %JAVA_HOME%</code><ul>
<li>If the <code>JAVA_HOME</code> variable has not yet been set, the Java installations are typically located in the <code>C:\Program Files\Java\jdk-XX.X.X</code> directory</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="10">
<li>
<p>Set the <code>JAVA_HOME</code> environment variable.</p>
<ul>
<li><strong>macOS:</strong> Edit the shell configuration file<ul>
<li>Default shell (<code>zsh</code>) with Terminal: <code>nano ~/.zshrc</code></li>
<li>Alternatively, older shell (<code>bash</code>) with Terminal: <code>nano ~/.bash_profile</code></li>
<li><strong>Add</strong> the following line to the file:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#saas-3-__codelineno-1-1"></a>bash&lt;br&gt;export <span class="nv">JAVA_HOME</span><span class="o">=</span><span class="k">$(</span>/usr/libexec/java_home<span class="k">)</span>&lt;br&gt;
</code></pre></div></li>
<li><strong>Save</strong> (<span class="keys"><kbd class="key-control">Ctrl</kbd></span> + <span class="keys"><kbd class="key-o">O</kbd></span>) and <strong>exit</strong> (<span class="keys"><kbd class="key-control">Ctrl</kbd></span> + <span class="keys"><kbd class="key-x">X</kbd></span>) the editor</li>
</ul>
</li>
<li><strong>Windows:</strong><ul>
<li>Open the <strong>Start</strong> menu and search for <code>Environment Variables</code></li>
<li>Select <em>Edit the system environment variables</em> option</li>
<li>Click the <strong>Environment Variables</strong> button</li>
<li>Under <em>System Variables</em>, click <strong>New</strong></li>
<li>Set the <em>Variable Name</em> = <code>JAVA_HOME</code> and <em>Variable Value</em> = <em>JDK path from Step 9</em> (e.g. <code>C:\Program Files\Java\jdk-17</code>)</li>
<li>Click <strong>OK</strong> to finalize</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="11">
<li>Apply the changes immediately.<ul>
<li><strong>macOS</strong>: Run <em>either</em> of these commands with Terminal<ul>
<li>For <code>zsh</code> shell: <code>source ~/.zshrc</code></li>
<li>For <code>bash</code> shell: <code>source ~/.bash_profile</code></li>
</ul>
</li>
<li><strong>Windows:</strong><ul>
<li>Close all open command prompts or terminals</li>
<li>Open a <em>new</em> Command Prompt to pick up the changes</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="12">
<li>Verify the <code>JAVA_HOME</code> environment variable has been correctly set.<ul>
<li><strong>macOS:</strong><ul>
<li>With Terminal, execute: <code>bash&lt;br&gt;echo $JAVA_HOME&lt;br&gt;</code></li>
<li>The console will return the Java installation path</li>
</ul>
</li>
<li><strong>Windows:</strong><ul>
<li>With Command Prompt, execute: <code>cmd&lt;br&gt;echo %JAVA_HOME%&lt;br&gt;</code></li>
<li>The console will return the Java installation path</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="13">
<li>
<p>For both <strong>macOS</strong> and <strong>Windows</strong> users, you must <strong>restart</strong> the Visual Studio Code application for the changes to take effect within the IDE. <strong>Close and re-launch the application.</strong></p>
<p></br>
At this stage, the WCA Standard Plan extension for VS Code has been successfully installed and configured! Additional context and information is presented below (<a href="https://ibm.github.io/wca-l4/saas/3/#iv-set-up-enterprise-java-environment" target="_blank"><strong>vi. Determine the JDK</strong></a> and <a href="https://ibm.github.io/wca-l4/saas/3/#vi-set-the-logging-level" target="_blank"><strong>vii. Set the logging level</strong></a>) for those curious to learn more. Otherwise, continue on to Section <a href="https://ibm.github.io/wca-l4/saas/3/#vi-next-steps" target="_blank"><strong>viii. Next steps</strong></a> to conclude the module.</p>
</li>
</ol>
<hr />
<h2 id="saas-3-v-determine-the-jdk"><strong>v. Determine the JDK</strong></h2>
<p>For VS Code and WCA Standard Plans, watsonx Code Assistant needs to determine the Java developer kit (JDK) to use, in the following order of precedence:</p>
<table>
<thead>
<tr>
<th>Order of precedence</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1</strong></td>
<td>Globally-configured Java developer kit for automatic building in the Red Hat extension, which is <code>java.configuration.runtimes</code> in the IDE <code>settings.json</code> file</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><code>java.jdt.ls.java.home</code> or <code>java.home</code> IDE settings if they are present</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td><code>JAVA_HOME</code> system environment variable, or else <code>JDK_HOME</code></td>
</tr>
<tr>
<td><strong>4</strong></td>
<td>The Java developer kit in the system <code>PATH</code></td>
</tr>
</tbody>
</table>
<p>When WCA Standard Plan features are used, such as Java modernization or upgrade, you can verify which Java developer kit is being used:</p>
<ul>
<li>Within the VS Code IDE, click <strong>View</strong> and then <strong>Output</strong></li>
<li>In the <em>Output</em> view, use the dropdown menu to select <strong>WCA</strong></li>
<li>Look for a message such as <code>Using the Java developer kit that is defined in &lt;location&gt; to run watsonx Code Assistant components. The path is: &lt;path&gt;</code> to determine the feature currently in use</li>
</ul>
<hr />
<h2 id="saas-3-vi-set-the-logging-level"><strong>vi. Set the logging level</strong></h2>
<p>To adjust logging for the VS Code extension for WCA:</p>
<ul>
<li>From the <strong>Extensions</strong> panel of VS Code, locate the WCA extension and right-click to pull down a list of available options</li>
<li>Select the <strong>Extension Settings</strong> option</li>
<li>Scroll down (or search) for <strong>WCA: Log level</strong></li>
<li>You may adjust this field from the default <code>INFO</code> setting to alternative options (like <code>WARN</code>) to cycle between various logging levels</li>
</ul>
<hr />
<h2 id="saas-3-vii-next-steps"><strong>vii. Next steps</strong></h2>
<p>The following module will guide participants through the steps of locally configuring Eclipse IDE for use with the WCA extension.</p></section><section class="print-page" id="saas-4"><h1 id="saas-4-install-wca-plug-in-for-eclipse-ideibm-cloud-saas-configuration"><strong>Install WCA plug-in for Eclipse IDE</strong></br><em>IBM Cloud (SaaS) Configuration</em></h1>
<h2 id="saas-4-i-objectives-and-rationale"><strong>i. Objectives and rationale</strong></h2>
<p>With the WCA service component of the SaaS architecture now successfully provisioned via the ITZ, participants will now need to set up the WCA extension within an integrated development environment (IDE). WCA currently supports both <em>Visual Studio Code</em> (<strong>VS Code</strong>) and <em>Eclipse IDE</em>.</p>
<p>This module guides participants through the process of installing Eclipse IDE on their local machine. Afterwards, the WCA extension ("plug-in") can then be easily integrated with the IDE and authorized for use with the ITZ-provisioned WCA service.</p>
<div class="admonition note">
<p class="admonition-title">WHY INSTALL LOCALLY?</p>
<p>Be aware that ITZ only allows two environments to be reserved for education and training purposes at any one time. Reservations for client demonstrations and pilots do not count against this limit.</p>
<p>The WCA Standard plan on SaaS requires at least one reservation slot. The on-premises environment already provisioned through ITZ for the previous <a href="https://ibm.github.io/wca-l4/on-premises/1/" target="_blank"><strong>On-Premises Installation and Deployment</strong></a> modules is occupying the second available slot. Provisioning an ITZ-hosted virtual machine (VM) environment will require a third slot — exceeding what ITZ supports. Therefore, to accommodate a virtualized desktop, participants would <strong>need to retire and deprovision</strong> the on-premises environment that they've already gone to great lengths to set up. Let's avoid that scenario, if possible.</p>
<p>IBM watsonx Code Assistant works great on locally-installed IDEs via extensions built into VS Code and Eclipse IDE. In fact, it's the <em>de facto</em> way to interact with the service and provides the best impression for users by far — with a less cumbersome experience with the lab guide instructions and much more responsive IDE interactions.</p>
</div>
<h2 id="saas-4-ii-locally-install-eclipse-ide"><strong>ii. Locally install Eclipse IDE</strong></h2>
<p>With the IBM Cloud credentials set up, the next step will be to install the Eclipse IDE locally and then integrate it with the WCA service via the IDE plug-in.</p>
<hr />
<ol>
<li>
<p><strong>Download</strong> the <em>Eclipse IDE</em> from the Eclipse Foundation.</p>
<ul>
<li>Use the <em>Eclipse Installer</em>, recommended at the top of the download page<sup>[A]</sup></li>
<li>Select the version appropriate to your local machine's operating system</li>
</ul>
<div class="admonition warning">
<p><strong>URL:</strong> <a href="https://www.eclipse.org/downloads/packages/" target="_blank">https://www.eclipse.org/downloads/packages/</a></p>
</div>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.4.png" /></a></p>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>Run the installer on your local machine.</p>
<ul>
<li>Select the <strong>Eclipse IDE for Java Developers</strong> option<sup>[A]</sup></li>
<li>Follow along with the remaining prompts until the Eclipse IDE has been installed</li>
<li>Once the install process has concluded, click <strong>Launch</strong><sup>[B]</sup> from the installer or manually launch the Eclipse IDE application yourself</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.5a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../saas/_attachments/saas-4.5a.png" width="300" /></a>
</br>
<a class="glightbox" href="../saas/_attachments/saas-4.5b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../saas/_attachments/saas-4.5b.png" width="300" /></a></p>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>Upon launching the Eclipse IDE for the first time, users will be prompted to <em>Select a directory as workspace</em>. Choose a directory on your local machine<sup>[A]</sup> you feel appropriate (or select the one selected by default for you) and then click <strong>Launch</strong><sup>[B]</sup> to continue.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.6.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../saas/_attachments/saas-4.6.png" width="300" /></a></p>
</li>
</ol>
<hr />
<h2 id="saas-4-iii-install-the-plug-in"><strong>iii. Install the plug-in</strong></h2>
<p>Open the <a href="https://marketplace.eclipse.org/content/ibm®-watsonx™-code-assistant-enterprise-java-applications" target="_blank"><strong>Eclipse Marketplace</strong></a> listing for <em>IBM watsonx Code Assistant for Enterprise Java Applications</em> plug-in, which corresponds to the WCA Standard plan. This plug-in supports all the features of the Essentials plan, plus enterprise Java modernization capabilities, enhanced code explanation, and enhanced unit test generation — all of which will be necessary for the Level 4 curriculum.</p>
<hr />
<ol start="4">
<li>
<p>Locate the <strong>Install</strong> button on the Eclipse Marketplace page. The easiest method for installing this plug-in is to <strong>click and hold</strong><sup>[A]</sup> the mouse button down on this Install button, then <strong>drag and release</strong><sup>[B]</sup> on top of the open Eclipse IDE application.</p>
<ul>
<li>An install wizard will open within the Eclipse IDE automatically</li>
<li><em>Confirm Selected Features</em>: verify the two WCA options are selected<sup>[C]</sup> and <strong>Confirm</strong><sup>[D]</sup></li>
<li>Installation should take about 1 minute to conclude</li>
<li>Wait for the <em>Review Licenses</em> panel to load</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.7a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.7a.png" /></a>
</br>
<a class="glightbox" href="../saas/_attachments/saas-4.7b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.7b.png" /></a>
</br>
<a class="glightbox" href="../saas/_attachments/saas-4.7c.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.7c.png" /></a></p>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>Within the <em>Review Licenses</em> panel, read through all three license agreements<sup>[A]</sup> and click the <strong>I accept the terms of the license agreements</strong><sup>[B]</sup> option.</p>
<ul>
<li>To progress the installation, click <strong>Finish</strong></li>
<li>Wait a few moments for the <em>Trust Authorities</em> panel to load</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.8.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.8.png" /></a></p>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>Within the <em>Trust Authorities</em>, examine the <strong>Authority / Update Site</strong> table at the top to load.</p>
<ul>
<li><strong>Select</strong><sup>[A]</sup> (tick the box) left of the <code>https://public.dhe.ibm.com</code> option field</li>
<li>All other fields can remain as their default settings</li>
<li>Click the <strong>Trust Selected</strong><sup>[B]</sup> button to continue</li>
<li>Wait 1 to 2 minutes for the software to continue installing</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.9.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.9.png" /></a></p>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>After a few moments, a <em>Software Updates</em> window will prompt you to restart the Eclipse IDE.</p>
<ul>
<li>Click the <strong>Restart Now</strong><sup>[A]</sup> button to re-launch the application</li>
<li>Installation of the WCA plug-in software and dependencies will continue after launching</li>
<li>Wait a moment for the installation to conclude</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.10.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.10.png" /></a></p>
</li>
</ol>
<h2 id="saas-4-iv-validate-the-plug-in"><strong>iv. Validate the plug-in</strong></h2>
<p>At this stage, the WCA plug-in for Eclipse IDE has been successfully installed on your local machine. Now you must authorize the plug-in for use with the WCA service on IBM Cloud.</p>
<hr />
<ol start="8">
<li>
<p>From the Eclipse application, select <strong>Window</strong>, then <strong>Show View</strong>, and finally <strong>Other</strong><sup>[A]</sup> to open the plug-ins browser.</p>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.11.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.11.png" /></a></p>
</li>
</ol>
<hr />
<ol start="9">
<li>
<p>From the table of option, scroll down and locate <em>watsonx Code Assistant</em>.</p>
<ul>
<li>Double-click on the folder (or click the arrow to the left of it)</li>
<li>Select the <strong>Chat</strong><sup>[A]</sup> option and then click <strong>Open</strong><sup>[B]</sup></li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.12.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.12.png" /></a></p>
</li>
</ol>
<hr />
<ol start="10">
<li>
<p>A new window (among several open tabs) will open at the bottom of the Eclipse IDE<sup>[A]</sup>.</p>
<ul>
<li>Scroll down within the window to the bottom of the page</li>
<li>Click the <strong>Log in with your API key</strong><sup>[B]</sup> button</li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.13.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.13.png" /></a></p>
</li>
</ol>
<hr />
<ol start="11">
<li>
<p>A new <em>Preferences</em> window will open.</p>
<ul>
<li>Within the <em>API Key</em> field<sup>[A]</sup>, <strong>paste</strong> the <em>WCA API Key</em> that was recorded in <a href="https://ibm.github.io/wca-l4/saas/2/#iv-create-a-service-id-and-api-key" target="_blank"><strong>Step 24 of Module 2</strong></a> into the prompt</li>
<li>The remaining settings can remain at the default values</li>
<li>Click the <strong>Apply and Close</strong><sup>[B]</sup> button</li>
<li>Click <strong>No</strong><sup>[C]</sup> when prompted to create a <em>Secure Storage - Password Hint Needed</em></li>
</ul>
<p></br>
<a class="glightbox" href="../saas/_attachments/saas-4.14.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../saas/_attachments/saas-4.14.png" /></a></p>
</li>
</ol>
<hr />
<h2 id="saas-4-v-next-steps"><strong>v. Next steps</strong></h2>
<p>The Eclipse IDE plug-in for IBM watsonx Code Assistant has been successfully installed and authorized for use with the WCA Standard (SaaS) plan deployed on IBM Cloud. The environment is now ready for use with the <em>Application Modernization</em> modules of the Level 4 curriculum.</p></section><h1 class='nav-section-title-end'>Ended: IBM Cloud (SaaS) Configuration</h1>
                        <h1 class='nav-section-title' id='section-application-modernization-websphere-to-liberty'>
                            Application Modernization - WebSphere to Liberty <a class='headerlink' href='#section-application-modernization-websphere-to-liberty' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="appmod1-1"><h1 id="appmod1-1-objectives-and-requirementsapplication-modernization-websphere-to-liberty"><strong>Objectives and requirements</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<h2 id="appmod1-1-i-section-1"><strong>i. Section 1</strong></h2></section><section class="print-page" id="appmod1-2"><h1 id="appmod1-2-basic-migration-capabilitiesapplication-modernization-websphere-to-liberty"><strong>Basic migration capabilities</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-2-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<p>Lariat Corporation has a large collection of <strong>WebSphere Enterprise Archive</strong> (EAR) applications designed specifically for deployments using <strong>WAS</strong>. These are packaged archive files that bundle together multiple Java Enterprise Edition (Java EE shorthand, or more recently referred to by Jakarta EE) components: web modules, Enterprise JavaBeans (EJB) files, resource adapters, libraries, and so on. Collectively, all of these components allow for Lariat's engineers and developers to manage complex enterprise applications "efficiently" (as the theory goes) by encapsulating all of the necessary components into a single, structured archive. </p>
<p><strong>Liberty</strong>, however, supports comparatively simple and standardized configurations that greatly reduce the complexities found with WAS applications. Chiefly, by removing the need for multiple external descriptors and consolidating settings into one unified file (<code>server.xml</code>). Overally, this approach improves the maintainability of the code base in the long term and improves the deployment speed for new instances (or versions) of the Liberty-based application.</p>
<p>As part of the modernization efforts, the new Liberty application will need to support the functionality of the legacy WAS application, such as:</p>
<ul>
<li>Deployment of complex, modular Java EE applications onto WebSphere servers</li>
<li>Encapsulation of web applications, EJB modules, and dependencies in a structured format</li>
<li>Facilitate version control, deployment, and existing rollback strategies to guarantee consistent and reliable production environments</li>
</ul>
<p>In general, the team supporting the modernization anticipate that Liberty will enable greatly simplified, more modular deployment structures — which in turn will reduce the overhead, complexity, and maintenance burden of these applications.</p>
<hr />
<h2 id="appmod1-2-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger WebSphere EAR application. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-2-__tabbed_1_1" name="appmod1-2-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-2-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-2-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-13">13</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-14">14</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-15">15</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-16">16</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-17">17</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-18">18</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-19">19</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-20">20</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-0-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- application.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;application&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;module&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>        <span class="nt">&lt;web&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>            <span class="nt">&lt;web-uri&gt;</span>legacyapp.war<span class="nt">&lt;/web-uri&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>            <span class="nt">&lt;context-root&gt;</span>/legacyapp<span class="nt">&lt;/context-root&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>        <span class="nt">&lt;/web&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="nt">&lt;/module&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="nt">&lt;module&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span class="nt">&lt;ejb&gt;</span>legacyEJB.jar<span class="nt">&lt;/ejb&gt;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>    <span class="nt">&lt;/module&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="nt">&lt;security-role&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>        <span class="nt">&lt;role-name&gt;</span>user<span class="nt">&lt;/role-name&gt;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>    <span class="nt">&lt;/security-role&gt;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="nt">&lt;/application&gt;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="cm">&lt;!-- ibm-web-bnd.xml --&gt;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="nt">&lt;web-bnd&gt;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="nt">&lt;virtual-host</span> <span class="na">name=</span><span class="s">&quot;default_host&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>    <span class="nt">&lt;resource-ref</span> <span class="na">name=</span><span class="s">&quot;jdbc/LegacyDS&quot;</span> <span class="na">binding-name=</span><span class="s">&quot;jdbc/LegacyDS&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="nt">&lt;/web-bnd&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p></br>
The application defines two modules— <code>legacyapp.war</code> and <code>legacyEJB.jar</code> —which denote the web and EJB components of the application, respectively (<strong>lines 5 and 10</strong>).</p>
<ul>
<li>The code sets a specific context root to access the <code>legacyapp.war</code> web module.</li>
<li>It also introduces WebSphere-specific bindings such as <code>ibm-web-bnd.xml</code> (beginning on <strong>line 17</strong>), which are employed for virtual hosting and resource references.</li>
<li>Security roles and resource bindings are managed externally through the use of XML.</li>
</ul>
<p>The legacy code showcased here has a particular structural element that makes it a prime candidate for this type of Liberty modernization. Chiefly, the EAR application uses <em>separate</em> XML descriptors like <code>application.xml</code> (<strong>line 1</strong>) and <code>ibm-web-bnd.xml</code> (<strong>line 17</strong>) to define distinct modules. This setup, at enterprise scale, becomes cumbersome to maintain and can often result in frequent deployment delays (or human-induced configuration errors) each time the modules need to be modified. The maintenance burden of this more intricate structural design can be reduced with a more simplified, Liberty-based approach.</p>
<hr />
<h2 id="appmod1-2-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code with Liberty:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-2-__tabbed_2_1" name="appmod1-2-__tabbed_2" type="radio" /><input id="appmod1-2-__tabbed_2_2" name="appmod1-2-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-2-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-2-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-2-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-14">14</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-15">15</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-16">16</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-17">17</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-18">18</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-19">19</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-20">20</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-21">21</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-1-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="hll"><span class="cm">&lt;!-- server.xml --&gt;</span>
</span><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">&lt;server&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="nt">&lt;featureManager&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>        <span class="nt">&lt;feature&gt;</span>webProfile-8.0<span class="nt">&lt;/feature&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>        <span class="nt">&lt;feature&gt;</span>jdbc-4.2<span class="nt">&lt;/feature&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>    <span class="nt">&lt;/featureManager&gt;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>    <span class="nt">&lt;httpEndpoint</span> <span class="na">host=</span><span class="s">&quot;*&quot;</span> <span class="na">httpPort=</span><span class="s">&quot;9080&quot;</span> <span class="na">httpsPort=</span><span class="s">&quot;9443&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>    <span class="nt">&lt;application</span> <span class="na">id=</span><span class="s">&quot;modernapp&quot;</span> <span class="na">location=</span><span class="s">&quot;modernapp.war&quot;</span> <span class="na">context-root=</span><span class="s">&quot;/modernapp&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>        <span class="nt">&lt;classloader</span> <span class="na">delegation=</span><span class="s">&quot;parentLast&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>    <span class="nt">&lt;/application&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>    <span class="nt">&lt;dataSource</span> <span class="na">id=</span><span class="s">&quot;jdbc/ModernDS&quot;</span> <span class="na">jndiName=</span><span class="s">&quot;jdbc/ModernDS&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>        <span class="nt">&lt;jdbcDriver</span> <span class="na">libraryRef=</span><span class="s">&quot;jdbcLib&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a>        <span class="nt">&lt;connectionManager</span> <span class="na">maxPoolSize=</span><span class="s">&quot;50&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>    <span class="nt">&lt;/dataSource&gt;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a>    <span class="nt">&lt;library</span> <span class="na">id=</span><span class="s">&quot;jdbcLib&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a>        <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${server.config.dir}/jdbc&quot;</span> <span class="na">includes=</span><span class="s">&quot;*.jar&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a>    <span class="nt">&lt;/library&gt;</span>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="nt">&lt;/server&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-2-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-12">12</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-13">13</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-14">14</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-15">15</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-16">16</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-17">17</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-18">18</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-19">19</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-20">20</a></span>
<span class="normal"><a href="#appmod1-2-__codelineno-2-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="hll"><span class="cm">&lt;!-- application.xml --&gt;</span>
</span><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;application&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;module&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>        <span class="nt">&lt;web&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>            <span class="nt">&lt;web-uri&gt;</span>legacyapp.war<span class="nt">&lt;/web-uri&gt;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>            <span class="nt">&lt;context-root&gt;</span>/legacyapp<span class="nt">&lt;/context-root&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>        <span class="nt">&lt;/web&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>    <span class="nt">&lt;/module&gt;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>    <span class="nt">&lt;module&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>        <span class="nt">&lt;ejb&gt;</span>legacyEJB.jar<span class="nt">&lt;/ejb&gt;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>    <span class="nt">&lt;/module&gt;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>    <span class="nt">&lt;security-role&gt;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>        <span class="nt">&lt;role-name&gt;</span>user<span class="nt">&lt;/role-name&gt;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>    <span class="nt">&lt;/security-role&gt;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="nt">&lt;/application&gt;</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="hll"><span class="cm">&lt;!-- ibm-web-bnd.xml --&gt;</span>
</span><a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="nt">&lt;web-bnd&gt;</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>    <span class="nt">&lt;virtual-host</span> <span class="na">name=</span><span class="s">&quot;default_host&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a>    <span class="nt">&lt;resource-ref</span> <span class="na">name=</span><span class="s">&quot;jdbc/LegacyDS&quot;</span> <span class="na">binding-name=</span><span class="s">&quot;jdbc/LegacyDS&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="nt">&lt;/web-bnd&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">BREVITY: DISPELLING MODERNIZATION MISCONCEPTIONS</p>
<p>The Liberty application code snippet is in fact "longer", in terms of lines of code, than the legacy WAS predecessor application. This raises an important point about modernized application code: <em>the brevity and terseness of an application's code does not always reflect more efficient or practical code.</em></p>
<p>What is important to the success and value of modernization efforts is that the new code is more appropriate to the tasks to be performed, has greater efficacy than before, and is more easily maintained — or a combination of these factors. Whether that is achieved in fewer lines of code than before is ultimately far less important.</p>
</div>
<p></br>
The modernized Liberty application code streamlines the original WebSphere configuration details into a <em>single</em> WAR file (<code>server.xml</code>) with clear, unified definitions.</p>
<ul>
<li>
<p>JDBC configurations are directly defined alongside the application deployment, removing the need for external bindings.</p>
<ol>
<li>Legacy EAR files have been consolidated into lightweight Web Archive (WAR) structures.</li>
<li>WebSphere-specific descriptors like <code>ibm-web-bnd.xml</code> have been converted into modern Liberty features (<code>webProfile-8.0</code>, <code>jdbc-4.2</code>).</br></li>
</ol>
</li>
<li>
<p>WebSphere-specific APIs and deprecated components, like <em>AdminClient APIs</em> or <em>Java Naming and Directory Interface (JDNI)</em> look-ups, have been replaced.</p>
</li>
<li>
<p>Liberty WAR configuration file uses <code>parentLast</code> (<strong>line 11</strong>) class loading to ensure that the application's resources take precedence.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#appmod1-2-__codelineno-3-1"></a><span class="nt">&lt;application</span> <span class="na">id=</span><span class="s">&quot;modernapp&quot;</span> <span class="na">location=</span><span class="s">&quot;modernapp.war&quot;</span> <span class="na">context-root=</span><span class="s">&quot;/modernapp&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#appmod1-2-__codelineno-3-2"></a>    <span class="nt">&lt;classloader</span> <span class="na">delegation=</span><span class="s">&quot;parentLast&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#appmod1-2-__codelineno-3-3"></a><span class="nt">&lt;/application&gt;</span>
</code></pre></div>
</li>
</ul>
<p></br>
Ultimately, the modernized Liberty application code supports Lariat's objectives of simplified, modular deployment structures that reduce the overhead and technical burdens placed on developers maintaining the legacy WebSphere code base.</p>
<hr />
<h2 id="appmod1-2-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-2-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-3"><h1 id="appmod1-3-configuration-and-dependency-managementapplication-modernization-websphere-to-liberty"><strong>Configuration and dependency management</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-3-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<p>In order to perform configuration and dependency management, Lariat Corporation employs various WebSphere <strong>class loader configurations</strong> to exert control over how Java classes and libraries are accessed by applications. In essence, these class loaders help define the scope and visibility of Java classes, resources, and libraries that are available for use by those applications.</p>
<p>Legacy applications built for WAS can use class loader configurations in a variety of ways, including:</p>
<ul>
<li><strong>Isolation of application dependencies:</strong> provide assurances that applications avoid conflicts or unintended interactions that might arise from using shared libraries</li>
<li><strong>Application module management:</strong> for WebSphere Enterprise Archive (EAR) applications, like those covered in the previous section, class loader configurations can manage the visibility of classes across different modules of the same EAR file</li>
</ul>
<p>In addition, the ability to selectively control class loading can reduce the overall memory footprint and resource overhead of an application. The result is that class loader configurations play an important part for managing dependency conflicts and application stability across Lariat's WAS services and environments.</p>
<p>However, Lariat's <strong>legacy WAS</strong> implementation suffers from significant (and unnecessary) complexity owing to bloated class-loader configurations. Multiple, shared libraries need to be configured and adjusted via an admin console, resulting in redundant use of dependencies and libraries that could otherwise be shared with better design. Through modernization of the code to <strong>Liberty</strong>, the expectation is that process of managing dependencies and application configuration can be simplified and more easily maintained.</p>
<hr />
<h2 id="appmod1-3-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger WebSphere class loader configuration.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-3-__tabbed_1_1" name="appmod1-3-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-3-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-3-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-13">13</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-14">14</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-15">15</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-16">16</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-17">17</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-0-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- deployment.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;deployment&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;classloader</span> <span class="na">mode=</span><span class="s">&quot;PARENT_LAST&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>        <span class="nt">&lt;library&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>            <span class="nt">&lt;file</span> <span class="na">path=</span><span class="s">&quot;/shared/libs/customlib.jar&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>        <span class="nt">&lt;/library&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>        <span class="nt">&lt;shared-library</span> <span class="na">name=</span><span class="s">&quot;LegacySharedLib&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="nt">&lt;/classloader&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="nt">&lt;/deployment&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="cm">&lt;!-- shared-libraries.xml --&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="nt">&lt;shared-libraries&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="nt">&lt;library</span> <span class="na">name=</span><span class="s">&quot;LegacySharedLib&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>        <span class="nt">&lt;files&gt;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>            <span class="nt">&lt;file&gt;</span>/opt/was/shared/lib/shared-legacy.jar<span class="nt">&lt;/file&gt;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>        <span class="nt">&lt;/files&gt;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="nt">&lt;/library&gt;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="nt">&lt;/shared-libraries&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p></br>
The legacy implementation utilizes separate, detailed descriptor files like <code>deployment.xml</code> (<strong>lines 1-9</strong>) and <code>shared-libraries.xml</code> (<strong>lines 11-18</strong>) to handle complex dependency and class-loading configurations. Lariat administrators who manage this code base must <em>explicitly</em> set class loader modes to control resource loading order — an inefficient, manual process achieved using the <code>PARENT_LAST</code> option.</p>
<p>As a consequence, libraries that should ideally be shared by multiple applications instead need to be managed separate by each application in turn. This is terribly inefficient and produces needlessly complex classloader configurations. For Lariat's administrators, this approach to configuration and dependency management has frequently resulted in version conflicts for applications and complex debugging work for developers.</p>
<hr />
<h2 id="appmod1-3-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code with Liberty:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-3-__tabbed_2_1" name="appmod1-3-__tabbed_2" type="radio" /><input id="appmod1-3-__tabbed_2_2" name="appmod1-3-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-3-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-3-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-3-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-14">14</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-15">15</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-16">16</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-17">17</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-1-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="hll"><span class="cm">&lt;!-- server.xml --&gt;</span>
</span><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">&lt;server&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="nt">&lt;featureManager&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>        <span class="nt">&lt;feature&gt;</span>webProfile-8.0<span class="nt">&lt;/feature&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="nt">&lt;/featureManager&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>    <span class="nt">&lt;library</span> <span class="na">id=</span><span class="s">&quot;customLib&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>        <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${server.config.dir}/shared/libs&quot;</span> <span class="na">includes=</span><span class="s">&quot;*.jar&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>    <span class="nt">&lt;/library&gt;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>    <span class="nt">&lt;application</span> <span class="na">location=</span><span class="s">&quot;modernized.war&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>        <span class="nt">&lt;classloader</span> <span class="na">delegation=</span><span class="s">&quot;parentLast&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>            <span class="nt">&lt;commonLibrary&gt;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>                <span class="nt">&lt;library</span> <span class="na">ref=</span><span class="s">&quot;customLib&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>            <span class="nt">&lt;/commonLibrary&gt;</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a>        <span class="nt">&lt;/classloader&gt;</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>    <span class="nt">&lt;/application&gt;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="nt">&lt;/server&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-3-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-12">12</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-13">13</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-14">14</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-15">15</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-16">16</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-17">17</a></span>
<span class="normal"><a href="#appmod1-3-__codelineno-2-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="hll"><span class="cm">&lt;!-- deployment.xml --&gt;</span>
</span><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;deployment&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;classloader</span> <span class="na">mode=</span><span class="s">&quot;PARENT_LAST&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>        <span class="nt">&lt;library&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>            <span class="nt">&lt;file</span> <span class="na">path=</span><span class="s">&quot;/shared/libs/customlib.jar&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>        <span class="nt">&lt;/library&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>        <span class="nt">&lt;shared-library</span> <span class="na">name=</span><span class="s">&quot;LegacySharedLib&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>    <span class="nt">&lt;/classloader&gt;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="nt">&lt;/deployment&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="hll"><span class="cm">&lt;!-- shared-libraries.xml --&gt;</span>
</span><a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="nt">&lt;shared-libraries&gt;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>    <span class="nt">&lt;library</span> <span class="na">name=</span><span class="s">&quot;LegacySharedLib&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>        <span class="nt">&lt;files&gt;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>            <span class="nt">&lt;file&gt;</span>/opt/was/shared/lib/shared-legacy.jar<span class="nt">&lt;/file&gt;</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>        <span class="nt">&lt;/files&gt;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>    <span class="nt">&lt;/library&gt;</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="nt">&lt;/shared-libraries&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p></br>
The modernized Liberty code implementation simplifies the management of dependencies by removing the discrete (separate) descriptors like <code>deployment.xml</code> and <code>shared-libraries.xml</code> from the WAS implementation. Instead, configuration and depedency management has been consolidated into a single <code>server.xml</code> descriptor, which more clearly defines the permitted libraries and their associated paths.</p>
<p>Other benefits from the modernization work also include:</p>
<ul>
<li>
<p>Class loading policies (such as 'parentLast' on <strong>line 12</strong>) are now explicitly stated, helping to simplify the process of resource management for developers drawing from these resources.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#appmod1-3-__codelineno-3-1"></a><span class="nt">&lt;classloader</span> <span class="na">delegation=</span><span class="s">&quot;parentLast&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#appmod1-3-__codelineno-3-2"></a>    <span class="nt">&lt;commonLibrary&gt;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#appmod1-3-__codelineno-3-3"></a>        <span class="nt">&lt;library</span> <span class="na">ref=</span><span class="s">&quot;customLib&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#appmod1-3-__codelineno-3-4"></a>    <span class="nt">&lt;/commonLibrary&gt;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#appmod1-3-__codelineno-3-5"></a><span class="nt">&lt;/classloader&gt;</span>
</code></pre></div>
</li>
<li>
<p>Dependencies are now directly tied and associated to applications, creating relationships between the two that are more transparent and easier to maintain.</p>
</li>
</ul>
<p>Ultimately, the modernization process into Liberty has resulted in configuration and dependency management that reduces dependency conflicts, simplifies resource management, and improves the overall clarity and maintainability of these assets going forward.</p>
<hr />
<h2 id="appmod1-3-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-3-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-4"><h1 id="appmod1-4-apis-and-librariesapplication-modernization-websphere-to-liberty"><strong>APIs and libraries</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-4-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<p>Lariat Corporation's application stack utilizes a myriad of <strong>WebSphere Application Server APIs</strong>— Work Manager API, Async Beans, Scheduler API, and so on —which will likely be impacted and require remediation as part of the company's overall modernization towards WebSphere Liberty. WAS APIs may not be immediately portable in their current form, they are potentially more costly to maintain than their Liberty counterparts, and may have less functionality given their outdated implementations.</p>
<p>Liberty-compatible APIs increase the portability of applications across different Java Enterprise Edition (<em>Java EE</em> or <em>Jakarta EE</em>) application servers. The result is that developers can more easily facilitate cloud deployments or migrations to other runtimes. Liberty APIs follow standardized annotations and conventions that simplify the boilerplate code needed for applications to exchange data with these APIs. WAS-specific APIs, by contrast, are potentially locked to specific versions of WebSphere - which in turn "lock in" those applications dependent on such APIs.</p>
<p>Currently, Lariat's <strong>WAS-based APIs</strong> rely upon IBM-specific extensions (such as <code>.com.ibm.websphere</code> packages) that will need to be identified and resolved before modernization with <strong>Liberty-based APIs</strong>. The shift from proprietary WAS-based APIs to standardized Liberty-based APIs (built to Jakarta EE / Java EE specifications) improves application portability and aligns with best practices.</p>
<hr />
<h2 id="appmod1-4-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy Java code (below), which as mentioned previously is a snapshot of a larger WebSphere Scheduler API.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-4-__tabbed_1_1" name="appmod1-4-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-4-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-4-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-13">13</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-14">14</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-15">15</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-16">16</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-17">17</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-18">18</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-19">19</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-20">20</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-0-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.ibm.websphere.scheduler.TaskHandler</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.ibm.websphere.scheduler.Scheduler</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.naming.InitialContext</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LegacySchedulerTask</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">scheduleTask</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">        </span><span class="n">InitialContext</span><span class="w"> </span><span class="n">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InitialContext</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">        </span><span class="n">Scheduler</span><span class="w"> </span><span class="n">scheduler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Scheduler</span><span class="p">)</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="na">lookup</span><span class="p">(</span><span class="s">&quot;scheduler/legacyScheduler&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">        </span><span class="n">TaskHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scheduler</span><span class="p">.</span><span class="na">createTaskHandler</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">            </span><span class="s">&quot;TaskName&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">LegacyTask</span><span class="p">(),</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">            </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">            </span><span class="s">&quot;0 0/5 * * * ?&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">            </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">            </span><span class="kc">null</span><span class="w"></span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">        </span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">        </span><span class="n">handler</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p></br>
The <code>LegacySchedulerTask</code> API describes a WAS-specific scheduler (identifiable by the <code>com.ibm.websphere.scheduler</code> import statements on <strong>lines 1 and 2</strong>), which invokes IBM-proprietary API standards. These API invocations are in turn used to shcedule periodic task executions within Lariat's application estate.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#appmod1-4-__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.ibm.websphere.scheduler.TaskHandler</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#appmod1-4-__codelineno-1-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.ibm.websphere.scheduler.Scheduler</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Utilizing WAS-specific API calls requires explicit JDNI (Java Naming and Directory Interface) look-ups. Furthermore, it demands manual intervention on the part of application developers to create and manage scheduled API tasks. The result is that this legacy API code, by placing heavy reliance upon WebSphere platform-specific APIs, has impaired the portability of applications.</p>
<hr />
<h2 id="appmod1-4-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) Java code in support of Liberty-based APIs:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-4-__tabbed_2_1" name="appmod1-4-__tabbed_2" type="radio" /><input id="appmod1-4-__tabbed_2_2" name="appmod1-4-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-4-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-4-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-4-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-12">12</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-13">13</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-14">14</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-15">15</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-16">16</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-17">17</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-18">18</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-19">19</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-20">20</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-21">21</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-22">22</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-2-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.annotation.Resource</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.enterprise.context.ApplicationScoped</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.enterprise.concurrent.ManagedScheduledExecutorService</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.TimeUnit</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="nd">@ApplicationScoped</span><span class="w"></span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ModernSchedulerTask</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="nd">@Resource</span><span class="w"></span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="n">ManagedScheduledExecutorService</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">scheduleTask</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">        </span><span class="n">executor</span><span class="p">.</span><span class="na">scheduleAtFixedRate</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">                </span><span class="c1">// Modern task logic here</span><span class="w"></span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Executing scheduled task.&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">            </span><span class="p">},</span><span class="w"></span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">            </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">            </span><span class="mi">5</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">            </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">MINUTES</span><span class="w"></span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">        </span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-4-__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-10">10</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-11">11</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-12">12</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-13">13</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-14">14</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-15">15</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-16">16</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-17">17</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-18">18</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-19">19</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-20">20</a></span>
<span class="normal"><a href="#appmod1-4-__codelineno-3-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.ibm.websphere.scheduler.TaskHandler</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.ibm.websphere.scheduler.Scheduler</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.naming.InitialContext</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">LegacySchedulerTask</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">scheduleTask</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">        </span><span class="n">InitialContext</span><span class="w"> </span><span class="n">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InitialContext</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">        </span><span class="n">Scheduler</span><span class="w"> </span><span class="n">scheduler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Scheduler</span><span class="p">)</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="na">lookup</span><span class="p">(</span><span class="s">&quot;scheduler/legacyScheduler&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">        </span><span class="n">TaskHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scheduler</span><span class="p">.</span><span class="na">createTaskHandler</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">            </span><span class="s">&quot;TaskName&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">LegacyTask</span><span class="p">(),</span><span class="w"></span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">            </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">            </span><span class="s">&quot;0 0/5 * * * ?&quot;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">            </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">            </span><span class="kc">null</span><span class="w"></span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">        </span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="w">        </span><span class="n">handler</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p></br>
In contrast to the legacy WAS-based Java API, the modernized Liberty approach (templated using Jakarta EE's API conventions) significantly simplifies the scheduling logic. The standardized <code>ManagedScheduledExecutorService</code> API for concurrency simplifies the scheduling of tasks using direct resource injection, as indicated by <code>@Resource</code> beginning on <strong>line 9</strong>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#appmod1-4-__codelineno-4-1"></a><span class="nd">@Resource</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#appmod1-4-__codelineno-4-2"></a><span class="n">ManagedScheduledExecutorService</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>The previous (legacy) requirement of forcing JDNI look-ups, therefore, has been remediated through the use of direct resource injection. The Jakarta EE standard also follows an annotation-driven model for scheduling tasks to reduce the overall complexity of the code and improve its "readability" for human developers.</p>
<p>Ultimately, the modernization efforts have significantly increased the portability and extensibility of Lariat's API-driven application estate. The structure of the API code has been simplified and made much more portable by breaking away from propriety API standards.</p>
<hr />
<h2 id="appmod1-4-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-4-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-5"><h1 id="appmod1-5-ejb-modernizationapplication-modernization-websphere-to-liberty"><strong>EJB modernization</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-5-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<hr />
<h2 id="appmod1-5-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger WebSphere application that uses EJB Stateless Session Bean with XML. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-5-__tabbed_1_1" name="appmod1-5-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-5-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-5-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-0-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- ejb-jar.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;ejb-jar&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;enterprise-beans&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>        <span class="nt">&lt;session&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>            <span class="nt">&lt;ejb-name&gt;</span>LegacySessionBean<span class="nt">&lt;/ejb-name&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>            <span class="nt">&lt;home&gt;</span>com.lariat.ejb.LegacyHome<span class="nt">&lt;/home&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>            <span class="nt">&lt;remote&gt;</span>com.lariat.ejb.LegacyRemote<span class="nt">&lt;/remote&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>            <span class="nt">&lt;ejb-class&gt;</span>com.lariat.ejb.LegacySessionBean<span class="nt">&lt;/ejb-class&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>            <span class="nt">&lt;session-type&gt;</span>Stateless<span class="nt">&lt;/session-type&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>            <span class="nt">&lt;transaction-type&gt;</span>Container<span class="nt">&lt;/transaction-type&gt;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>        <span class="nt">&lt;/session&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="nt">&lt;/enterprise-beans&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="nt">&lt;/ejb-jar&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-5-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code with Liberty, using EJB Stateless Session Bean with annotations and Java:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-5-__tabbed_2_1" name="appmod1-5-__tabbed_2" type="radio" /><input id="appmod1-5-__tabbed_2_2" name="appmod1-5-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-5-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-5-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-5-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-14">14</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-15">15</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-16">16</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-17">17</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-18">18</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-19">19</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-20">20</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-21">21</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-22">22</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-1-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.lariat.ejb</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.ejb.Stateless</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.ejb.Remote</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="nd">@Stateless</span><span class="w"></span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nd">@Remote</span><span class="p">(</span><span class="n">ModernRemote</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ModernSessionBean</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ModernRemote</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getGreeting</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Hello, &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;!&quot;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.lariat.ejb</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.ejb.Remote</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="nd">@Remote</span><span class="w"></span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">ModernRemote</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">getGreeting</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-5-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-12">12</a></span>
<span class="normal"><a href="#appmod1-5-__codelineno-2-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cm">&lt;!-- ejb-jar.xml --&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;ejb-jar&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;enterprise-beans&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>        <span class="nt">&lt;session&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>            <span class="nt">&lt;ejb-name&gt;</span>LegacySessionBean<span class="nt">&lt;/ejb-name&gt;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>            <span class="nt">&lt;home&gt;</span>com.lariat.ejb.LegacyHome<span class="nt">&lt;/home&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>            <span class="nt">&lt;remote&gt;</span>com.lariat.ejb.LegacyRemote<span class="nt">&lt;/remote&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>            <span class="nt">&lt;ejb-class&gt;</span>com.lariat.ejb.LegacySessionBean<span class="nt">&lt;/ejb-class&gt;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>            <span class="nt">&lt;session-type&gt;</span>Stateless<span class="nt">&lt;/session-type&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>            <span class="nt">&lt;transaction-type&gt;</span>Container<span class="nt">&lt;/transaction-type&gt;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>        <span class="nt">&lt;/session&gt;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>    <span class="nt">&lt;/enterprise-beans&gt;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="nt">&lt;/ejb-jar&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-5-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-5-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-6"><h1 id="appmod1-6-servlet-and-jsp-modernizationapplication-modernization-websphere-to-liberty"><strong>Servlet and JSP modernization</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-6-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<hr />
<h2 id="appmod1-6-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger WebSphere application using JSP with extensive scriptlets. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-6-__tabbed_1_1" name="appmod1-6-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-6-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-6-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-0-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">import</span><span class="o">=</span><span class="s">&quot;java.util.Date,java.text.SimpleDateFormat&quot;</span><span class="w"> </span><span class="k">%&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;html&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="nt">&lt;body&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="k">&lt;%</span><span class="w"> </span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">        </span><span class="n">Date</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">        </span><span class="n">SimpleDateFormat</span><span class="w"> </span><span class="n">formatter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="p">(</span><span class="s">&quot;dd-MM-yyyy HH:mm:ss&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">dateString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">formatter</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">now</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="k">%&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="nt">&lt;h2&gt;</span>Current Time:<span class="nt">&lt;/h2&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>    <span class="nt">&lt;p&gt;</span><span class="k">&lt;%=</span><span class="w"> </span><span class="n">dateString</span><span class="w"> </span><span class="k">%&gt;</span><span class="nt">&lt;/p&gt;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="nt">&lt;/body&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="nt">&lt;/html&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-6-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code with Liberty using JSP with JSTL and EL:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-6-__tabbed_2_1" name="appmod1-6-__tabbed_2" type="radio" /><input id="appmod1-6-__tabbed_2_2" name="appmod1-6-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-6-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-6-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-6-__codelineno-1-1">1</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-1-2">2</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-1-3">3</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-1-4">4</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-1-5">5</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-1-6">6</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-1-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">&lt;%@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;fmt&quot;</span><span class="w"> </span><span class="k">%&gt;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">&lt;html&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="nt">&lt;body&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>    <span class="nt">&lt;h2&gt;</span>Current Time:<span class="nt">&lt;/h2&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="nt">&lt;p&gt;&lt;fmt:formatDate</span> <span class="na">value=</span><span class="s">&quot;${pageContext.request.time}&quot;</span> <span class="na">pattern=</span><span class="s">&quot;dd-MM-yyyy HH:mm:ss&quot;</span><span class="nt">/&gt;&lt;/p&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="nt">&lt;/body&gt;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nt">&lt;/html&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-6-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-6-__codelineno-2-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">&lt;%@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">import</span><span class="o">=</span><span class="s">&quot;java.util.Date,java.text.SimpleDateFormat&quot;</span><span class="w"> </span><span class="k">%&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;html&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="nt">&lt;body&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="k">&lt;%</span><span class="w"> </span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">        </span><span class="n">Date</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">        </span><span class="n">SimpleDateFormat</span><span class="w"> </span><span class="n">formatter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="p">(</span><span class="s">&quot;dd-MM-yyyy HH:mm:ss&quot;</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">dateString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">formatter</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">now</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="k">%&gt;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>    <span class="nt">&lt;h2&gt;</span>Current Time:<span class="nt">&lt;/h2&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>    <span class="nt">&lt;p&gt;</span><span class="k">&lt;%=</span><span class="w"> </span><span class="n">dateString</span><span class="w"> </span><span class="k">%&gt;</span><span class="nt">&lt;/p&gt;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="nt">&lt;/body&gt;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="nt">&lt;/html&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-6-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-6-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-7"><h1 id="appmod1-7-security-modernizationapplication-modernization-websphere-to-liberty"><strong>Security modernization</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-7-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<hr />
<h2 id="appmod1-7-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger WebSphere application using XML-based security:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-7-__tabbed_1_1" name="appmod1-7-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-7-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-7-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-13">13</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-14">14</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-15">15</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-16">16</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-17">17</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-18">18</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-19">19</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-20">20</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-21">21</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-0-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- web.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;security-constraint&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;web-resource-collection&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>        <span class="nt">&lt;web-resource-name&gt;</span>SecureArea<span class="nt">&lt;/web-resource-name&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>        <span class="nt">&lt;url-pattern&gt;</span>/secured/*<span class="nt">&lt;/url-pattern&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="nt">&lt;/web-resource-collection&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span class="nt">&lt;auth-constraint&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>        <span class="nt">&lt;role-name&gt;</span>admin<span class="nt">&lt;/role-name&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="nt">&lt;/auth-constraint&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="nt">&lt;/security-constraint&gt;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="nt">&lt;login-config&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="nt">&lt;auth-method&gt;</span>FORM<span class="nt">&lt;/auth-method&gt;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>    <span class="nt">&lt;form-login-config&gt;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>        <span class="nt">&lt;form-login-page&gt;</span>/login.jsp<span class="nt">&lt;/form-login-page&gt;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>        <span class="nt">&lt;form-error-page&gt;</span>/error.jsp<span class="nt">&lt;/form-error-page&gt;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="nt">&lt;/form-login-config&gt;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="nt">&lt;/login-config&gt;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="nt">&lt;security-role&gt;</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>    <span class="nt">&lt;role-name&gt;</span>admin<span class="nt">&lt;/role-name&gt;</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="nt">&lt;/security-role&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-7-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code using Liberty annotation-based security with Java:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-7-__tabbed_2_1" name="appmod1-7-__tabbed_2" type="radio" /><input id="appmod1-7-__tabbed_2_2" name="appmod1-7-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-7-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-7-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-7-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-14">14</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-15">15</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-16">16</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-1-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.annotation.security.DeclareRoles</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.annotation.security.RolesAllowed</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.ws.rs.GET</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.ws.rs.Path</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.ws.rs.core.Response</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/secured&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="nd">@DeclareRoles</span><span class="p">({</span><span class="s">&quot;admin&quot;</span><span class="p">})</span><span class="w"></span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SecuredEndpoint</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="nd">@GET</span><span class="w"></span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">    </span><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/data&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">    </span><span class="nd">@RolesAllowed</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Response</span><span class="w"> </span><span class="nf">getSecuredData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="s">&quot;Sensitive data available only to admins.&quot;</span><span class="p">).</span><span class="na">build</span><span class="p">();</span><span class="w"></span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-7-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-12">12</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-13">13</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-14">14</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-15">15</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-16">16</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-17">17</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-18">18</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-19">19</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-20">20</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-21">21</a></span>
<span class="normal"><a href="#appmod1-7-__codelineno-2-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cm">&lt;!-- web.xml --&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;security-constraint&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;web-resource-collection&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>        <span class="nt">&lt;web-resource-name&gt;</span>SecureArea<span class="nt">&lt;/web-resource-name&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>        <span class="nt">&lt;url-pattern&gt;</span>/secured/*<span class="nt">&lt;/url-pattern&gt;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>    <span class="nt">&lt;/web-resource-collection&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>    <span class="nt">&lt;auth-constraint&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>        <span class="nt">&lt;role-name&gt;</span>admin<span class="nt">&lt;/role-name&gt;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>    <span class="nt">&lt;/auth-constraint&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="nt">&lt;/security-constraint&gt;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="nt">&lt;login-config&gt;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>    <span class="nt">&lt;auth-method&gt;</span>FORM<span class="nt">&lt;/auth-method&gt;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>    <span class="nt">&lt;form-login-config&gt;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>        <span class="nt">&lt;form-login-page&gt;</span>/login.jsp<span class="nt">&lt;/form-login-page&gt;</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>        <span class="nt">&lt;form-error-page&gt;</span>/error.jsp<span class="nt">&lt;/form-error-page&gt;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>    <span class="nt">&lt;/form-login-config&gt;</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="nt">&lt;/login-config&gt;</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="nt">&lt;security-role&gt;</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>    <span class="nt">&lt;role-name&gt;</span>admin<span class="nt">&lt;/role-name&gt;</span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="nt">&lt;/security-role&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-7-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-7-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-8"><h1 id="appmod1-8-data-source-and-connection-poolingapplication-modernization-websphere-to-liberty"><strong>Data source and connection pooling</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-8-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<hr />
<h2 id="appmod1-8-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger WebSphere application using JNDI DataSource in XML:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-8-__tabbed_1_1" name="appmod1-8-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-8-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-8-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-0-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- web.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;resource-ref&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;description&gt;</span>Legacy JDBC DataSource<span class="nt">&lt;/description&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="nt">&lt;res-ref-name&gt;</span>jdbc/LegacyDS<span class="nt">&lt;/res-ref-name&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>    <span class="nt">&lt;res-type&gt;</span>javax.sql.DataSource<span class="nt">&lt;/res-type&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="nt">&lt;res-auth&gt;</span>Container<span class="nt">&lt;/res-auth&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="nt">&lt;/resource-ref&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="cm">&lt;!-- ibm-web-bnd.xml --&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="nt">&lt;web-bnd&gt;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>    <span class="nt">&lt;resource-ref</span> <span class="na">name=</span><span class="s">&quot;jdbc/LegacyDS&quot;</span> <span class="na">binding-name=</span><span class="s">&quot;jdbc/legacyDB&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="nt">&lt;/web-bnd&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-8-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code using Liberty JDBC configuration:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-8-__tabbed_2_1" name="appmod1-8-__tabbed_2" type="radio" /><input id="appmod1-8-__tabbed_2_2" name="appmod1-8-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-8-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-8-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-8-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-14">14</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-1-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="cm">&lt;!-- server.xml --&gt;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">&lt;server&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="nt">&lt;featureManager&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>        <span class="nt">&lt;feature&gt;</span>jdbc-4.2<span class="nt">&lt;/feature&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="nt">&lt;/featureManager&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>    <span class="nt">&lt;dataSource</span> <span class="na">id=</span><span class="s">&quot;jdbc/ModernDS&quot;</span> <span class="na">jndiName=</span><span class="s">&quot;jdbc/ModernDS&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>        <span class="nt">&lt;jdbcDriver</span> <span class="na">libraryRef=</span><span class="s">&quot;jdbcLib&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>        <span class="nt">&lt;connectionManager</span> <span class="na">maxPoolSize=</span><span class="s">&quot;100&quot;</span> <span class="na">minPoolSize=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>    <span class="nt">&lt;/dataSource&gt;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>    <span class="nt">&lt;library</span> <span class="na">id=</span><span class="s">&quot;jdbcLib&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>        <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${server.config.dir}/jdbc&quot;</span> <span class="na">includes=</span><span class="s">&quot;*.jar&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>    <span class="nt">&lt;/library&gt;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="nt">&lt;/server&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-8-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-8-__codelineno-2-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cm">&lt;!-- web.xml --&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;resource-ref&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;description&gt;</span>Legacy JDBC DataSource<span class="nt">&lt;/description&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="nt">&lt;res-ref-name&gt;</span>jdbc/LegacyDS<span class="nt">&lt;/res-ref-name&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>    <span class="nt">&lt;res-type&gt;</span>javax.sql.DataSource<span class="nt">&lt;/res-type&gt;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>    <span class="nt">&lt;res-auth&gt;</span>Container<span class="nt">&lt;/res-auth&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="nt">&lt;/resource-ref&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="cm">&lt;!-- ibm-web-bnd.xml --&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="nt">&lt;web-bnd&gt;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>    <span class="nt">&lt;resource-ref</span> <span class="na">name=</span><span class="s">&quot;jdbc/LegacyDS&quot;</span> <span class="na">binding-name=</span><span class="s">&quot;jdbc/legacyDB&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="nt">&lt;/web-bnd&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-8-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-8-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-9"><h1 id="appmod1-9-jms-messaging-integrationapplication-modernization-websphere-to-liberty"><strong>JMS messaging integration</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-9-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<hr />
<h2 id="appmod1-9-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger WebSphere application using WebSphere MQ JMS integration:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-9-__tabbed_1_1" name="appmod1-9-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-9-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-9-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-13">13</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-14">14</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-15">15</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-16">16</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-17">17</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-18">18</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-0-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- ejb-jar.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;message-driven&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;ejb-name&gt;</span>LegacyMDB<span class="nt">&lt;/ejb-name&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="nt">&lt;ejb-class&gt;</span>com.lariat.messaging.LegacyMDB<span class="nt">&lt;/ejb-class&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>    <span class="nt">&lt;transaction-type&gt;</span>Container<span class="nt">&lt;/transaction-type&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="nt">&lt;message-driven-destination&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>        <span class="nt">&lt;destination-type&gt;</span>javax.jms.Queue<span class="nt">&lt;/destination-type&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="nt">&lt;/message-driven-destination&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="nt">&lt;/message-driven&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="cm">&lt;!-- ibm-ejb-jar-bnd.xml --&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="nt">&lt;message-driven</span> <span class="na">name=</span><span class="s">&quot;LegacyMDB&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="nt">&lt;activation-config&gt;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>        <span class="nt">&lt;activation-config-property&gt;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>            <span class="nt">&lt;activation-config-property-name&gt;</span>destination<span class="nt">&lt;/activation-config-property-name&gt;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>            <span class="nt">&lt;activation-config-property-value&gt;</span>jms/legacyQueue<span class="nt">&lt;/activation-config-property-value&gt;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>        <span class="nt">&lt;/activation-config-property&gt;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>    <span class="nt">&lt;/activation-config&gt;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="nt">&lt;/message-driven&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-9-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code using Liberty JMS configuration:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-9-__tabbed_2_1" name="appmod1-9-__tabbed_2" type="radio" /><input id="appmod1-9-__tabbed_2_2" name="appmod1-9-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-9-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-9-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-9-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-14">14</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-15">15</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-1-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="cm">&lt;!-- server.xml --&gt;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">&lt;server&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="nt">&lt;featureManager&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>        <span class="nt">&lt;feature&gt;</span>jms-2.0<span class="nt">&lt;/feature&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="nt">&lt;/featureManager&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>    <span class="nt">&lt;jmsQueue</span> <span class="na">id=</span><span class="s">&quot;modernQueue&quot;</span> <span class="na">jndiName=</span><span class="s">&quot;jms/modernQueue&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>    <span class="nt">&lt;messageDrivenBean</span> <span class="na">id=</span><span class="s">&quot;ModernMDB&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>        <span class="nt">&lt;activationSpec&gt;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>            <span class="nt">&lt;activationSpecClass&gt;</span>javax.jms.Queue<span class="nt">&lt;/activationSpecClass&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>            <span class="nt">&lt;activationSpecProperty</span> <span class="na">name=</span><span class="s">&quot;destination&quot;</span><span class="nt">&gt;</span>jms/modernQueue<span class="nt">&lt;/activationSpecProperty&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>        <span class="nt">&lt;/activationSpec&gt;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>        <span class="nt">&lt;className&gt;</span>com.lariat.messaging.ModernMDB<span class="nt">&lt;/className&gt;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>    <span class="nt">&lt;/messageDrivenBean&gt;</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="nt">&lt;/server&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-9-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-12">12</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-13">13</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-14">14</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-15">15</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-16">16</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-17">17</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-18">18</a></span>
<span class="normal"><a href="#appmod1-9-__codelineno-2-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cm">&lt;!-- ejb-jar.xml --&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;message-driven&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;ejb-name&gt;</span>LegacyMDB<span class="nt">&lt;/ejb-name&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="nt">&lt;ejb-class&gt;</span>com.lariat.messaging.LegacyMDB<span class="nt">&lt;/ejb-class&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>    <span class="nt">&lt;transaction-type&gt;</span>Container<span class="nt">&lt;/transaction-type&gt;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>    <span class="nt">&lt;message-driven-destination&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>        <span class="nt">&lt;destination-type&gt;</span>javax.jms.Queue<span class="nt">&lt;/destination-type&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>    <span class="nt">&lt;/message-driven-destination&gt;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="nt">&lt;/message-driven&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="cm">&lt;!-- ibm-ejb-jar-bnd.xml --&gt;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="nt">&lt;message-driven</span> <span class="na">name=</span><span class="s">&quot;LegacyMDB&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>    <span class="nt">&lt;activation-config&gt;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>        <span class="nt">&lt;activation-config-property&gt;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>            <span class="nt">&lt;activation-config-property-name&gt;</span>destination<span class="nt">&lt;/activation-config-property-name&gt;</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>            <span class="nt">&lt;activation-config-property-value&gt;</span>jms/legacyQueue<span class="nt">&lt;/activation-config-property-value&gt;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>        <span class="nt">&lt;/activation-config-property&gt;</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>    <span class="nt">&lt;/activation-config&gt;</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="nt">&lt;/message-driven&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-9-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-9-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-10"><h1 id="appmod1-10-session-management-and-state-handlingapplication-modernization-websphere-to-liberty"><strong>Session management and state handling</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-10-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<hr />
<h2 id="appmod1-10-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger  application using WebSphere HTTP session management:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-10-__tabbed_1_1" name="appmod1-10-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-10-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-10-__codelineno-0-1">1</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-0-2">2</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-0-3">3</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-0-4">4</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-0-5">5</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-0-6">6</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-0-7">7</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-0-8">8</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-0-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- web.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;session-config&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;session-timeout&gt;</span>20<span class="nt">&lt;/session-timeout&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="nt">&lt;/session-config&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="cm">&lt;!-- ibm-web-ext.xml --&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="nt">&lt;session-management</span> <span class="na">enable-url-rewriting=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="nt">&lt;session-persistence</span> <span class="na">persistence-type=</span><span class="s">&quot;DATABASE&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="nt">&lt;/session-management&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-10-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code using Liberty HTTP session configuration:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-10-__tabbed_2_1" name="appmod1-10-__tabbed_2" type="radio" /><input id="appmod1-10-__tabbed_2_2" name="appmod1-10-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-10-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-10-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-10-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-14">14</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-15">15</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-16">16</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-17">17</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-18">18</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-1-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="cm">&lt;!-- server.xml --&gt;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">&lt;server&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="nt">&lt;featureManager&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>        <span class="nt">&lt;feature&gt;</span>sessionDatabase-1.0<span class="nt">&lt;/feature&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="nt">&lt;/featureManager&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>    <span class="nt">&lt;httpSession</span> <span class="na">persistence=</span><span class="s">&quot;database&quot;</span> <span class="na">invalidationTimeout=</span><span class="s">&quot;30m&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>        <span class="nt">&lt;databaseStore</span> <span class="na">dataSourceRef=</span><span class="s">&quot;jdbc/SessionDS&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>    <span class="nt">&lt;/httpSession&gt;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>    <span class="nt">&lt;dataSource</span> <span class="na">id=</span><span class="s">&quot;jdbc/SessionDS&quot;</span> <span class="na">jndiName=</span><span class="s">&quot;jdbc/SessionDS&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>        <span class="nt">&lt;jdbcDriver</span> <span class="na">libraryRef=</span><span class="s">&quot;jdbcLib&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>        <span class="nt">&lt;connectionManager</span> <span class="na">maxPoolSize=</span><span class="s">&quot;20&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>    <span class="nt">&lt;/dataSource&gt;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a>    <span class="nt">&lt;library</span> <span class="na">id=</span><span class="s">&quot;jdbcLib&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>        <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${server.config.dir}/jdbc&quot;</span> <span class="na">includes=</span><span class="s">&quot;*.jar&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a>    <span class="nt">&lt;/library&gt;</span>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="nt">&lt;/server&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-10-__codelineno-2-1">1</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-2-2">2</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-2-3">3</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-2-4">4</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-2-5">5</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-2-6">6</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-2-7">7</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-2-8">8</a></span>
<span class="normal"><a href="#appmod1-10-__codelineno-2-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cm">&lt;!-- web.xml --&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;session-config&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;session-timeout&gt;</span>20<span class="nt">&lt;/session-timeout&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="nt">&lt;/session-config&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="cm">&lt;!-- ibm-web-ext.xml --&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="nt">&lt;session-management</span> <span class="na">enable-url-rewriting=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>    <span class="nt">&lt;session-persistence</span> <span class="na">persistence-type=</span><span class="s">&quot;DATABASE&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="nt">&lt;/session-management&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-10-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-10-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-11"><h1 id="appmod1-11-clustering-and-load-balancingapplication-modernization-websphere-to-liberty"><strong>Clustering and load balancing</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-11-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<hr />
<h2 id="appmod1-11-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger application using WebSphere ND clustering:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-11-__tabbed_1_1" name="appmod1-11-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-11-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-11-__codelineno-0-1">1</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-0-2">2</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-0-3">3</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-0-4">4</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-0-5">5</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-0-6">6</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-0-7">7</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-0-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- cluster.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;clusters&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;cluster</span> <span class="na">name=</span><span class="s">&quot;LegacyCluster&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>        <span class="nt">&lt;member</span> <span class="na">host=</span><span class="s">&quot;server1&quot;</span> <span class="na">node=</span><span class="s">&quot;node1&quot;</span> <span class="na">weight=</span><span class="s">&quot;2&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>        <span class="nt">&lt;member</span> <span class="na">host=</span><span class="s">&quot;server2&quot;</span> <span class="na">node=</span><span class="s">&quot;node2&quot;</span> <span class="na">weight=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="nt">&lt;/cluster&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span class="nt">&lt;session-affinity&gt;</span>true<span class="nt">&lt;/session-affinity&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="nt">&lt;/clusters&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-11-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code using Liberty collective configuration:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-11-__tabbed_2_1" name="appmod1-11-__tabbed_2" type="radio" /><input id="appmod1-11-__tabbed_2_2" name="appmod1-11-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-11-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-11-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-11-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-1-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="cm">&lt;!-- server.xml --&gt;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">&lt;server&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="nt">&lt;featureManager&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>        <span class="nt">&lt;feature&gt;</span>collectiveMember-1.0<span class="nt">&lt;/feature&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="nt">&lt;/featureManager&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>    <span class="nt">&lt;collective&gt;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>        <span class="nt">&lt;controller</span> <span class="na">host=</span><span class="s">&quot;controller.lariat.com&quot;</span> <span class="na">port=</span><span class="s">&quot;9443&quot;</span><span class="nt">/&gt;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>        <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;server1&quot;</span> <span class="na">host=</span><span class="s">&quot;server1.lariat.com&quot;</span> <span class="na">weight=</span><span class="s">&quot;2&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>        <span class="nt">&lt;member</span> <span class="na">name=</span><span class="s">&quot;server2&quot;</span> <span class="na">host=</span><span class="s">&quot;server2.lariat.com&quot;</span> <span class="na">weight=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>    <span class="nt">&lt;/collective&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>    <span class="nt">&lt;httpSession</span> <span class="na">cookieSecure=</span><span class="s">&quot;true&quot;</span> <span class="na">cookieHttpOnly=</span><span class="s">&quot;true&quot;</span> <span class="na">persistence=</span><span class="s">&quot;replicated&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="nt">&lt;/server&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-11-__codelineno-2-1">1</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-2-2">2</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-2-3">3</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-2-4">4</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-2-5">5</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-2-6">6</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-2-7">7</a></span>
<span class="normal"><a href="#appmod1-11-__codelineno-2-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cm">&lt;!-- cluster.xml --&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;clusters&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;cluster</span> <span class="na">name=</span><span class="s">&quot;LegacyCluster&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>        <span class="nt">&lt;member</span> <span class="na">host=</span><span class="s">&quot;server1&quot;</span> <span class="na">node=</span><span class="s">&quot;node1&quot;</span> <span class="na">weight=</span><span class="s">&quot;2&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>        <span class="nt">&lt;member</span> <span class="na">host=</span><span class="s">&quot;server2&quot;</span> <span class="na">node=</span><span class="s">&quot;node2&quot;</span> <span class="na">weight=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>    <span class="nt">&lt;/cluster&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>    <span class="nt">&lt;session-affinity&gt;</span>true<span class="nt">&lt;/session-affinity&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="nt">&lt;/clusters&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-11-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-11-v-next-steps"><strong>v. Next steps</strong></h2></section><section class="print-page" id="appmod1-12"><h1 id="appmod1-12-performance-optimizationapplication-modernization-websphere-to-liberty"><strong>Performance optimization</strong></br><em>Application Modernization - WebSphere to Liberty</em></h1>
<div class="admonition quote">
<p class="admonition-title">TERMINOLOGY</p>
<p>For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank"><strong>IBM WebSphere Application Server</strong></a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank"><strong>IBM WebSphere Liberty</strong></a> is referenced in shorthand as simply "Liberty".</p>
</div>
<h2 id="appmod1-12-i-incentives-to-modernize"><strong>i. Incentives to modernize</strong></h2>
<hr />
<h2 id="appmod1-12-ii-websphere-legacy-code"><strong>ii. WebSphere legacy code</strong></h2>
<p>First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger  application using WebSphere thread pools and AsyncBeans: </p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="appmod1-12-__tabbed_1_1" name="appmod1-12-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="appmod1-12-__tabbed_1_1">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-12-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-0-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="cm">&lt;!-- thread-pools.xml --&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="nt">&lt;threadPools&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;threadPool</span> <span class="na">id=</span><span class="s">&quot;LegacyThreadPool&quot;</span> <span class="na">maxThreads=</span><span class="s">&quot;50&quot;</span> <span class="na">minThreads=</span><span class="s">&quot;5&quot;</span> <span class="na">inactivityTimeout=</span><span class="s">&quot;60000&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="nt">&lt;/threadPools&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="cm">&lt;!-- AsyncBeans configuration --&gt;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="nt">&lt;asyncbeans&gt;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="nt">&lt;workManager</span> <span class="na">jndiName=</span><span class="s">&quot;wm/LegacyWorkManager&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>        <span class="nt">&lt;minThreads&gt;</span>5<span class="nt">&lt;/minThreads&gt;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span class="nt">&lt;maxThreads&gt;</span>50<span class="nt">&lt;/maxThreads&gt;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>        <span class="nt">&lt;threadPriority&gt;</span>5<span class="nt">&lt;/threadPriority&gt;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="nt">&lt;/workManager&gt;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="nt">&lt;/asyncbeans&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-12-iii-liberty-modernized-code"><strong>iii. Liberty modernized code</strong></h2>
<p>Consider below the modernized (but functionally equivalent) application code using Liberty (Jakarta EE patterned) concurrency APIs:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="appmod1-12-__tabbed_2_1" name="appmod1-12-__tabbed_2" type="radio" /><input id="appmod1-12-__tabbed_2_2" name="appmod1-12-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="appmod1-12-__tabbed_2_1">WEBSPHERE LIBERTY</label><label for="appmod1-12-__tabbed_2_2">WEBSPHERE APPLICATION SERVER</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-12-__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-10">10</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-11">11</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-12">12</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-13">13</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-14">14</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-15">15</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-16">16</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-17">17</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-18">18</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-19">19</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-20">20</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-21">21</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-22">22</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-1-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.annotation.Resource</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.enterprise.context.ApplicationScoped</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.enterprise.concurrent.ManagedExecutorService</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="nd">@ApplicationScoped</span><span class="w"></span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ModernExecutorService</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">    </span><span class="nd">@Resource</span><span class="p">(</span><span class="n">lookup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;concurrent/ModernExecutor&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ManagedExecutorService</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">executeTask</span><span class="p">(</span><span class="n">Runnable</span><span class="w"> </span><span class="n">task</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">        </span><span class="n">executor</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="n">task</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="o">&lt;!--</span><span class="w"> </span><span class="n">server</span><span class="p">.</span><span class="na">xml</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"></span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="o">&lt;</span><span class="n">server</span><span class="o">&gt;</span><span class="w"></span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">featureManager</span><span class="o">&gt;</span><span class="w"></span>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">feature</span><span class="o">&gt;</span><span class="n">concurrent</span><span class="o">-</span><span class="mf">1.0</span><span class="o">&lt;/</span><span class="n">feature</span><span class="o">&gt;</span><span class="w"></span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">featureManager</span><span class="o">&gt;</span><span class="w"></span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">managedExecutorService</span><span class="w"> </span><span class="n">jndiName</span><span class="o">=</span><span class="s">&quot;concurrent/ModernExecutor&quot;</span><span class="w"> </span><span class="n">maxThreads</span><span class="o">=</span><span class="s">&quot;50&quot;</span><span class="w"> </span><span class="n">minThreads</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="n">hungTaskThreshold</span><span class="o">=</span><span class="s">&quot;5m&quot;</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"></span>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="o">&lt;/</span><span class="n">server</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#appmod1-12-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-12">12</a></span>
<span class="normal"><a href="#appmod1-12-__codelineno-2-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="cm">&lt;!-- thread-pools.xml --&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">&lt;threadPools&gt;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="nt">&lt;threadPool</span> <span class="na">id=</span><span class="s">&quot;LegacyThreadPool&quot;</span> <span class="na">maxThreads=</span><span class="s">&quot;50&quot;</span> <span class="na">minThreads=</span><span class="s">&quot;5&quot;</span> <span class="na">inactivityTimeout=</span><span class="s">&quot;60000&quot;</span> <span class="nt">/&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="nt">&lt;/threadPools&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="cm">&lt;!-- AsyncBeans configuration --&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="nt">&lt;asyncbeans&gt;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>    <span class="nt">&lt;workManager</span> <span class="na">jndiName=</span><span class="s">&quot;wm/LegacyWorkManager&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>        <span class="nt">&lt;minThreads&gt;</span>5<span class="nt">&lt;/minThreads&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>        <span class="nt">&lt;maxThreads&gt;</span>50<span class="nt">&lt;/maxThreads&gt;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>        <span class="nt">&lt;threadPriority&gt;</span>5<span class="nt">&lt;/threadPriority&gt;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>    <span class="nt">&lt;/workManager&gt;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="nt">&lt;/asyncbeans&gt;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<hr />
<h2 id="appmod1-12-iv-hands-on-with-wca"><strong>iv. Hands-on with WCA</strong></h2>
<hr />
<h2 id="appmod1-12-v-next-steps"><strong>v. Next steps</strong></h2></section><h1 class='nav-section-title-end'>Ended: Application Modernization - WebSphere to Liberty</h1>
                        <h1 class='nav-section-title' id='section-tuning-and-customization'>
                            Tuning and Customization <a class='headerlink' href='#section-tuning-and-customization' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="tuning-1"><h1 id="tuning-1-getting-code-suggestionstuning-and-customization"><strong>Getting Code Suggestions</strong></br><em>Tuning and Customization</em></h1>
<h2 id="tuning-1-i-section-1"><strong>i. Section 1</strong></h2></section><section class="print-page" id="tuning-2"><h1 id="tuning-2-explaining-codetuning-and-customization"><strong>Explaining Code</strong></br><em>Tuning and Customization</em></h1>
<h2 id="tuning-2-i-section-1"><strong>i. Section 1</strong></h2></section><section class="print-page" id="tuning-3"><h1 id="tuning-3-documenting-codetuning-and-customization"><strong>Documenting Code</strong></br><em>Tuning and Customization</em></h1>
<h2 id="tuning-3-i-section-1"><strong>i. Section 1</strong></h2></section><section class="print-page" id="tuning-4"><h1 id="tuning-4-unit-test-generationtuning-and-customization"><strong>Unit Test Generation</strong></br><em>Tuning and Customization</em></h1>
<h2 id="tuning-4-i-section-1"><strong>i. Section 1</strong></h2></section><section class="print-page" id="tuning-5"><h1 id="tuning-5-upgrading-java-versionstuning-and-customization"><strong>Upgrading Java Versions</strong></br><em>Tuning and Customization</em></h1>
<h2 id="tuning-5-i-section-1"><strong>i. Section 1</strong></h2></section><h1 class='nav-section-title-end'>Ended: Tuning and Customization</h1></div>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "/", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate", "content.code.copy", "content.code.select", "navigation.footer"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>