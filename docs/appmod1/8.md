# **Data source and connection pooling**</br>*Application Modernization - WebSphere to Liberty*

!!! quote "TERMINOLOGY"
    For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank">**IBM WebSphere Application Server**</a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank">**IBM WebSphere Liberty**</a> is referenced in shorthand as simply "Liberty".
    
## **i. Incentives to modernize**



---

## **ii. WebSphere legacy code**

First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger application using **WebSphere's JNDI DataSource in XML**:

=== "WEBSPHERE APPLICATION SERVER"

    ``` xml linenums="1"
    <!-- web.xml -->
    <resource-ref>
        <description>Legacy JDBC DataSource</description>
        <res-ref-name>jdbc/LegacyDS</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>

    <!-- ibm-web-bnd.xml -->
    <web-bnd>
        <resource-ref name="jdbc/LegacyDS" binding-name="jdbc/legacyDB" />
    </web-bnd>
    ```

---

## **iii. Liberty modernized code**

Consider below the modernized (but functionally equivalent) application code using **Liberty's JDBC configuration**:

=== "WEBSPHERE LIBERTY"

    ``` xml linenums="1"
    <!-- server.xml -->
    <server>
        <featureManager>
            <feature>jdbc-4.2</feature>
        </featureManager>

        <dataSource id="jdbc/ModernDS" jndiName="jdbc/ModernDS">
            <jdbcDriver libraryRef="jdbcLib" />
            <connectionManager maxPoolSize="100" minPoolSize="10" />
        </dataSource>

        <library id="jdbcLib">
            <fileset dir="${server.config.dir}/jdbc" includes="*.jar" />
        </library>
    </server>
    ```

=== "WEBSPHERE APPLICATION SERVER"

    ``` xml linenums="1"
    <!-- web.xml -->
    <resource-ref>
        <description>Legacy JDBC DataSource</description>
        <res-ref-name>jdbc/LegacyDS</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>

    <!-- ibm-web-bnd.xml -->
    <web-bnd>
        <resource-ref name="jdbc/LegacyDS" binding-name="jdbc/legacyDB" />
    </web-bnd>
    ```

---

## **iv. Hands-on with WCA**



---

## **v. Next steps**


