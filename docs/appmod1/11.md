# **Clustering and load balancing**</br>*Application Modernization - WebSphere to Liberty*

!!! quote "TERMINOLOGY"
    For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank">**IBM WebSphere Application Server**</a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank">**IBM WebSphere Liberty**</a> is referenced in shorthand as simply "Liberty".
    
## **i. Incentives to modernize**



---

## **ii. WebSphere legacy code**

First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger application using **WebSphere's ND clustering**:

=== "WEBSPHERE APPLICATION SERVER"

    ``` xml linenums="1"
    <!-- cluster.xml -->
    <clusters>
        <cluster name="LegacyCluster">
            <member host="server1" node="node1" weight="2" />
            <member host="server2" node="node2" weight="1" />
        </cluster>
        <session-affinity>true</session-affinity>
    </clusters>
    ```

---

## **iii. Liberty modernized code**

Consider below the modernized (but functionally equivalent) application code using **Liberty's collective configuration**:

=== "WEBSPHERE LIBERTY"

    ``` xml linenums="1"
    <!-- server.xml -->
    <server>
        <featureManager>
            <feature>collectiveMember-1.0</feature>
        </featureManager>

        <collective>
            <controller host="controller.lariat.com" port="9443"/>
            <member name="server1" host="server1.lariat.com" weight="2" />
            <member name="server2" host="server2.lariat.com" weight="1" />
        </collective>

        <httpSession cookieSecure="true" cookieHttpOnly="true" persistence="replicated" />
    </server>
    ```

=== "WEBSPHERE APPLICATION SERVER"

    ``` xml linenums="1"
    <!-- cluster.xml -->
    <clusters>
        <cluster name="LegacyCluster">
            <member host="server1" node="node1" weight="2" />
            <member host="server2" node="node2" weight="1" />
        </cluster>
        <session-affinity>true</session-affinity>
    </clusters>
    ```

---

## **iv. Hands-on with WCA**



---

## **v. Next steps**


