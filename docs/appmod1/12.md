# **Performance optimization**</br>*Application Modernization - WebSphere to Liberty*

!!! quote "TERMINOLOGY"
    For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank">**IBM WebSphere Application Server**</a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank">**IBM WebSphere Liberty**</a> is referenced in shorthand as simply "Liberty".
    
## **i. Incentives to modernize**



---

## **ii. WebSphere legacy code**

First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger  application using **WebSphere's thread pools and AsyncBeans**: 

=== "WEBSPHERE APPLICATION SERVER"

    ``` xml linenums="1"
    <!-- thread-pools.xml -->
    <threadPools>
        <threadPool id="LegacyThreadPool" maxThreads="50" minThreads="5" inactivityTimeout="60000" />
    </threadPools>

    <!-- AsyncBeans configuration -->
    <asyncbeans>
        <workManager jndiName="wm/LegacyWorkManager">
            <minThreads>5</minThreads>
            <maxThreads>50</maxThreads>
            <threadPriority>5</threadPriority>
        </workManager>
    </asyncbeans>
    ```

---

## **iii. Liberty modernized code**

Consider below the modernized (but functionally equivalent) application code using **Liberty's (Jakarta EE patterned) concurrency APIs**:

=== "WEBSPHERE LIBERTY"

    ``` java linenums="1"
    import javax.annotation.Resource;
    import javax.enterprise.context.ApplicationScoped;
    import javax.enterprise.concurrent.ManagedExecutorService;

    @ApplicationScoped
    public class ModernExecutorService {

        @Resource(lookup = "concurrent/ModernExecutor")
        private ManagedExecutorService executor;

        public void executeTask(Runnable task) {
            executor.submit(task);
        }
    }

    <!-- server.xml -->
    <server>
        <featureManager>
            <feature>concurrent-1.0</feature>
        </featureManager>

        <managedExecutorService jndiName="concurrent/ModernExecutor" maxThreads="50" minThreads="5" hungTaskThreshold="5m" />
    </server>
    ```

=== "WEBSPHERE APPLICATION SERVER"

    ``` xml linenums="1"
    <!-- thread-pools.xml -->
    <threadPools>
        <threadPool id="LegacyThreadPool" maxThreads="50" minThreads="5" inactivityTimeout="60000" />
    </threadPools>

    <!-- AsyncBeans configuration -->
    <asyncbeans>
        <workManager jndiName="wm/LegacyWorkManager">
            <minThreads>5</minThreads>
            <maxThreads>50</maxThreads>
            <threadPriority>5</threadPriority>
        </workManager>
    </asyncbeans>
    ```

---

## **iv. Hands-on with WCA**



---

## **v. Next steps**


