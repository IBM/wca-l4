# **JavaServer Pages (JSP) modernization**</br>*Application Modernization - WebSphere to Liberty*

!!! quote "TERMINOLOGY"
    For readability, <a href="https://www.ibm.com/products/websphere-application-server" target="_blank">**IBM WebSphere Application Server**</a> (WAS) in this chapter is referred to in shorthand as "WebSphere", unless noted otherwise. Similarly, <a href="https://www.ibm.com/products/cloud-pak-for-applications/liberty" target="_blank">**IBM WebSphere Liberty**</a> is referenced in shorthand as simply "Liberty".
    
## **i. Incentives to modernize**

**WebSphere JavaServer Pages** (**JSP**) is traditionally used for embedding Java code into HTML pages, which in turn allow Lariat Corporation's developers to generate dynamic web content. Those fragments of Java code, known as "scriptlets", are inserted directly into JSP pages — the result of which are HTML pages mixed with Java code, producing web content that becomes increasingly challenging for developers to maintain and read.

**Liberty** makes use of **JavaServer Pages Standard Tag Library** (**JSTL**) and **Expression Language** (**EL**) to significantly improve the clarity and maintainability of dynamically generated web content. Without going into unnecessary detail, suffice it to say that these two approaches when used together reduce the amount of scriptlets (Java code) inserted alongside HTML for the dynamically generated web content, creating fewer artifacts and resulting in content that Lariat's developers will ultimately have an easier time maintaining.

</br>

| Feature | WebSphere JSP | Liberty JSP |
| - | - | - |
| **Maintainability** | Harder due to intertwined HTML and Java logic. | Easier due to separation of logic from views. |
| **Readability** | Challenging readability due to cluttered Java logic. | Simplified readability and more declarative style. |
| **Productivity** | Lower developer productivity due to complexity. | Improved developer productivity owing to clearer syntax. |
| **Standardization** | Considered a legacy practice. | Aligns with modern Java Enterprise Edition (Java EE or Jakarta EE) standards. |

Modernizing **WebSphere JSP** into **Liberty JSTL + EL** should provide Lariat with a clearer delineation of tasks and responsibilities for their developers. Application code will be easier to maintain owing to the reduced complexity; furthermore, the troubleshooting and debugging for dynamic web content back-ends should be made simpler as a consequence of such changes.


---

## **ii. WebSphere legacy code**

First, examine the legacy code (below), which as mentioned previously is a snapshot of a larger application using **WebSphere's JSP with extensive scriptlets**: 

=== "WEBSPHERE APPLICATION SERVER"

    ``` jsp linenums="1"
    <%@ page import="java.util.Date,java.text.SimpleDateFormat" %>
    <html>
    <body>
        <% 
            Date now = new Date();
            SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
            String dateString = formatter.format(now);
        %>
        <h2>Current Time:</h2>
        <p><%= dateString %></p>
    </body>
    </html>
    ```

</br>

The legacy application code contains Java code that is directly embedded within the resulting JSP pages ("scriptlets"), creating a confusing mixture of logic and presentation. In turn, it produces output that is more complicated for Lariat's developers to maintain — and dynamic web content that steadily deteriotes in quality (and readability) over it.

Manual imports and detailed formatting logic need to be defined within the JSP to make this possible. The process of untangling code structures between the mix of Java and XML/HTML code adds to the maintenance burden of those teams.

---

## **iii. Liberty modernized code**

Consider below the modernized (but functionally equivalent) application code using **Liberty's JSP with JSTL + EL**:

=== "WEBSPHERE LIBERTY"

    ``` jsp linenums="1"
    <%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
    <html>
    <body>
        <h2>Current Time:</h2>
        <p><fmt:formatDate value="${pageContext.request.time}" pattern="dd-MM-yyyy HH:mm:ss"/></p>
    </body>
    </html>
    ```

=== "WEBSPHERE APPLICATION SERVER"

    ``` jsp linenums="1"
    <%@ page import="java.util.Date,java.text.SimpleDateFormat" %>
    <html>
    <body>
        <% 
            Date now = new Date();
            SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
            String dateString = formatter.format(now);
        %>
        <h2>Current Time:</h2>
        <p><%= dateString %></p>
    </body>
    </html>
    ```

</br> 

The modernized Liberty JSP code combines both JSTL + EL in order to clearly delineate between the application's business logic and presentation logic. This eliminates the previous need (with the legacy application code) of embedding Java code into XML/HTML, thereby resulting in more easily maintained and human-readable pages.

Added clarity in *what* it is the Liberty code is performing is also beneficial to Lariat's developers: formatting and logic are expressly handled with reusable tags and EL expressions.

---

## **iv. Hands-on with WCA**



---

## **v. Next steps**


